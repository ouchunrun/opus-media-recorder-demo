const e=new WeakMap,t=new WeakMap;function n(t){const n=e.get(t);return console.assert(null!=n,"'this' is expected an Event object, but got",t),n}function r(t,n){e.set(this,{eventTarget:t,event:n,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,passiveListener:null,timeStamp:n.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const r=Object.keys(n);for(let e=0;e<r.length;++e){const t=r[e];t in this||Object.defineProperty(this,t,o(t))}}function o(e){return{get(){return n(this).event[e]},set(t){n(this).event[e]=t},configurable:!0,enumerable:!0}}function i(e){return{value(){const t=n(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function s(e){if(null==e||e===Object.prototype)return r;let n=t.get(e);return null==n&&(n=function(e,t){const n=Object.keys(t);if(0===n.length)return e;function r(t,n){e.call(this,t,n)}r.prototype=Object.create(e.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let s=0;s<n.length;++s){const a=n[s];if(!(a in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,a).value;Object.defineProperty(r.prototype,a,e?i(a):o(a))}}return r}(s(Object.getPrototypeOf(e)),e),t.set(e,n)),n}function a(e){return n(e).stopped}function c(e,t){n(e).passiveListener=t}r.prototype={get type(){return n(this).event.type},get target(){return n(this).eventTarget},get currentTarget(){return n(this).currentTarget},composedPath(){const e=n(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return n(this).eventPhase},stopPropagation(){const e=n(this);"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=n(this);e.stopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(n(this).event.bubbles)},get cancelable(){return Boolean(n(this).event.cancelable)},preventDefault(){const e=n(this);null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):console.warn("EventWrapper#preventDefault() was called from a passive listener:",e.passiveListener)},get defaultPrevented(){return n(this).canceled},get composed(){return Boolean(n(this).event.composed)},get timeStamp(){return n(this).timeStamp}},Object.defineProperty(r.prototype,"constructor",{value:r,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(r.prototype,window.Event.prototype),t.set(window.Event.prototype,r));const u=new WeakMap;function l(e){return null!==e&&"object"==typeof e}function p(e){const t=u.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function d(e,t){Object.defineProperty(e,"on"+t,function(e){return{get(){let t=p(this).get(e);for(;null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set(t){"function"==typeof t||l(t)||(t=null);const n=p(this);let r=null,o=n.get(e);for(;null!=o;)3===o.listenerType?null!==r?r.next=o.next:null!==o.next?n.set(e,o.next):n.delete(e):r=o,o=o.next;if(null!==t){const o={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===r?n.set(e,o):r.next=o}},configurable:!0,enumerable:!0}}(t))}function f(e){function t(){h.call(this)}t.prototype=Object.create(h.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)d(t.prototype,e[n]);return t}function h(){if(!(this instanceof h)){if(1===arguments.length&&Array.isArray(arguments[0]))return f(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return f(e)}throw new TypeError("Cannot call a class as a function")}u.set(this,new Map)}h.prototype={addEventListener(e,t,n){if(null==t)return!1;if("function"!=typeof t&&!l(t))throw new TypeError("'listener' should be a function or an object.");const r=p(this),o=l(n),i=(o?Boolean(n.capture):Boolean(n))?1:2,s={listener:t,listenerType:i,passive:o&&Boolean(n.passive),once:o&&Boolean(n.once),next:null};let a=r.get(e);if(void 0===a)return r.set(e,s),!0;let c=null;for(;null!=a;){if(a.listener===t&&a.listenerType===i)return!1;c=a,a=a.next}return c.next=s,!0},removeEventListener(e,t,n){if(null==t)return!1;const r=p(this),o=(l(n)?Boolean(n.capture):Boolean(n))?1:2;let i=null,s=r.get(e);for(;null!=s;){if(s.listener===t&&s.listenerType===o)return null!==i?i.next=s.next:null!==s.next?r.set(e,s.next):r.delete(e),!0;i=s,s=s.next}return!1},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=p(this),r=e.type;let o=t.get(r);if(null==o)return!0;const i=function(e,t){return new(s(Object.getPrototypeOf(t)))(e,t)}(this,e);let u=null;for(;null!=o;){if(o.once?null!==u?u.next=o.next:null!==o.next?t.set(r,o.next):t.delete(r):u=o,c(i,o.passive?o.listener:null),"function"==typeof o.listener)try{o.listener.call(this,i)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==o.listenerType&&"function"==typeof o.listener.handleEvent&&o.listener.handleEvent(i);if(a(i))break;o=o.next}return c(i,null),function(e,t){n(e).eventPhase=t}(i,0),function(e,t){n(e).currentTarget=t}(i,null),!i.defaultPrevented}},Object.defineProperty(h.prototype,"constructor",{value:h,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(h.prototype,window.EventTarget.prototype);var m=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},_=function(e,t,n){this.name=e,this.version=t,this.os=n},y=function(e){this.version=e,this.name="node",this.os=process.platform},w=function(){this.bot=!0,this.name="bot",this.version=null,this.os=null},g=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],b=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]];function v(e){var t=""!==e&&g.reduce((function(t,n){var r=n[0],o=n[1];if(t)return t;var i=o.exec(e);return!!i&&[r,i]}),!1);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new w;var o=r[1]&&r[1].split(/[._]/).slice(0,3);return o?o.length<3&&(o=m(o,function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-o.length))):o=[],new _(n,o.join("."),function(e){for(var t=0,n=b.length;t<n;t++){var r=b[t],o=r[0];if(r[1].test(e))return o}return null}(e))}const E=T?v(T):"undefined"!=typeof navigator?v(navigator.userAgent):"undefined"!=typeof process&&process.version?new y(process.version.slice(1)):null;var T;const A=window.AudioContext||window.webkitAudioContext||!1;class S extends h{constructor(e,t={},n={},r){const{mimeType:o,audioBitsPerSecond:i,videoBitsPerSecond:s,bitsPerSecond:a}=t,{encoderWorkerFactory:c,OggOpusEncoderWasmPath:u,WebMOpusEncoderWasmPath:l}=n;if(super(),this._stream=e,this._state="inactive",this._mimeType=o||"audio/ogg",this._audioBitsPerSecond=i||a,this.workerState="inactive",this.recordingDuration=r||3e4,!S.isTypeSupported(this._mimeType))throw new TypeError("invalid arguments, a MIME Type is not supported");switch(S._parseType(this._mimeType).subtype){case"wave":case"wav":this._mimeType="audio/wave";break;case"webm":this._mimeType="audio/webm";break;case"ogg":this._mimeType="audio/ogg";break;default:switch(E&&E.name){case"chrome":this._mimeType="audio/webm";break;case"firefox":this._mimeType="audio/ogg";break;case"edge":this._mimeType="audio/webm";break;case"ios":case"safari":this._mimeType="audio/wave";break;default:this._mimeType="audio/webm"}}switch(this._mimeType){case"audio/wave":this._wasmPath="";break;case"audio/webm":this._wasmPath=l||"";break;case"audio/ogg":this._wasmPath=u||"";break;default:throw new Error("Internal Error: Unexpected MIME Type: "+this._mimeType)}let p="";document.currentScript?p=document.currentScript.src:self.location&&(p=self.location.href),p=p.substr(0,p.lastIndexOf("/"))+"/src/encoderWorker.js","function"==typeof S.encoderWorker&&(p=URL.createObjectURL(new Blob([`(${S.encoderWorker})()`]))),this._workerFactory="function"==typeof c?c:e=>new Worker(p),this._spawnWorker()}get stream(){return this._stream}get mimeType(){return this._mimeType}get state(){return this._state}get videoBitsPerSecond(){}get audioBitsPerSecond(){return this._audioBitsPerSecond}_spawnWorker(){this.worker=this._workerFactory(),this.worker.onmessage=e=>this._onmessageFromWorker(e),this.worker.onerror=e=>this._onerrorFromWorker(e),this._postMessageToWorker("loadEncoder",{mimeType:this._mimeType,wasmPath:this._wasmPath})}_postMessageToWorker(e,t={}){switch(e){case"loadEncoder":let{mimeType:n,wasmPath:r}=t;this.worker.postMessage({command:e,mimeType:n,wasmPath:r});break;case"init":let{sampleRate:o,channelCount:i,bitsPerSecond:s}=t;this.worker.postMessage({command:e,sampleRate:o,channelCount:i,bitsPerSecond:s}),this.workerState="encoding",this.source.connect(this.processor),this.processor.connect(this.context.destination);let a=new window.Event("start");this.dispatchEvent(a);break;case"pushInputData":let{channelBuffers:c,length:u,duration:l}=t;this.worker.postMessage({command:e,channelBuffers:c,length:u,duration:l},c.map(e=>e.buffer));break;case"getEncodedData":case"done":this.worker.postMessage({command:e});break;default:throw new Error("Internal Error: Incorrect postMessage requested.")}}_onmessageFromWorker(e){const{command:t,buffers:n}=e.data;let r;switch(t){case"readyToInit":const{sampleRate:e,channelCount:o}=this;this.workerState="readyToInit","recording"===this.state&&this._postMessageToWorker("init",{sampleRate:e,channelCount:o,bitsPerSecond:this.audioBitsPerSecond});break;case"encodedData":case"lastEncodedData":let i=new Blob(n,{type:this._mimeType});r=new window.Event("dataavailable"),r.data=i,this.dispatchEvent(r),"lastEncodedData"===t&&(r=new window.Event("stop"),this.dispatchEvent(r),this.workerState="closed")}}_onerrorFromWorker(e){this.source.disconnect(),this.processor.disconnect(),this.worker.terminate(),this.workerState="closed";let t=["FileName: "+e.filename,"LineNumber: "+e.lineno,"Message: "+e.message].join(" - "),n=new window.Event("error");n.name="UnknownError",n.message=t,this.dispatchEvent(n)}_enableAudioProcessCallback(e){let t=0;this.processor.onaudioprocess=n=>{const{inputBuffer:r,playbackTime:o}=n,{sampleRate:i,length:s,duration:a,numberOfChannels:c}=r,u=new Array(c);for(let e=0;e<c;e++)u[e]=r.getChannelData(e);const l={channelBuffers:u,length:s,duration:a};this._postMessageToWorker("pushInputData",l),t+=a,t>=e&&(this._postMessageToWorker("getEncodedData"),t=0)}}handleRecordingDuration(e){e=e||0;let t=this;"paused"!==t._state?"stopped"!==t._state&&(e>=t.recordingDuration?t.stopRecording():(e+=1e3,setTimeout((function(){t.handleRecordingDuration(e)}),1e3))):setTimeout((function(){t.handleRecordingDuration(e)}),1e3)}startRecording(e=Number.MAX_SAFE_INTEGER){if("inactive"!==this.state)throw new Error("DOMException: INVALID_STATE_ERR, state must be inactive.");if(e<0)throw new TypeError("invalid arguments, timeslice should be 0 or higher.");if(e/=1e3,"closed"===this.workerState&&this._spawnWorker(),this.context=new A,!this.stream.getAudioTracks()[0])throw new Error("DOMException: UnkownError, media track not found.");if(this.channelCount=2,this.sampleRate=this.context.sampleRate,this.source=this.context.createMediaStreamSource(this.stream),this.processor=this.context.createScriptProcessor(4096,this.channelCount,this.channelCount),this._state="recording",this._enableAudioProcessCallback(e),"readyToInit"===this.workerState){const{sampleRate:e,channelCount:t}=this;this._postMessageToWorker("init",{sampleRate:e,channelCount:t,bitsPerSecond:this.audioBitsPerSecond})}this.recordingDuration&&this.handleRecordingDuration()}stopRecording(){if("inactive"===this.state)throw new Error("DOMException: INVALID_STATE_ERR, state must NOT be inactive.");this.source.disconnect(),this.processor.disconnect(),this.context.close(),this._postMessageToWorker("done"),this._state="inactive"}pauseRecording(){if("inactive"===this.state)throw new Error("DOMException: INVALID_STATE_ERR, state must NOT be inactive.");this.source.disconnect(),this.processor.disconnect();let e=new window.Event("pause");this.dispatchEvent(e),this._state="paused"}resumeRecording(){if("inactive"===this.state)throw new Error("DOMException: INVALID_STATE_ERR, state must NOT be inactive.");this.source.connect(this.processor),this.processor.connect(this.context.destination);let e=new window.Event("resume");this.dispatchEvent(e),this._state="recording"}requestData(){if("inactive"===this.state)throw new Error("DOMException: INVALID_STATE_ERR, state must NOT be inactive.");this._postMessageToWorker("getEncodedData")}static isTypeSupported(e){if("string"==typeof e&&!e)return!0;try{var{type:t,subtype:n,codec:r}=S._parseType(e)}catch(e){return!1}if("audio"!==t||"ogg"!==n&&"webm"!==n&&"wave"!==n&&"wav"!==n)return!1;switch(n){case"ogg":case"webm":if("opus"!==r&&r)return!1;break;case"wave":case"wav":if(r)return!1}return!0}static _parseType(e){try{const o=/^(\w+)\/(\w+)(;\s*codecs=(\w+))?$/;var[,t,n,,r]=e.match(o)}catch(t){return"string"!=typeof e||e?null:{type:"",subtype:"",codec:""}}return{type:t,subtype:n,codec:r}}}var O;["start","stop","dataavailable","pause","resume","error"].forEach(e=>d(S.prototype,e)),E&&"edge"===E.name&&(O=Worker.prototype.postMessage,Worker.prototype.postMessage=function(e,t=null){O.apply(this,[e])});class P{constructor(e,t,n,r){switch(this._size=t,this._module=e,this._size){case 1:this._heapArray=n?this._module.HEAP8:this._module.HEAPU8;break;case 2:this._heapArray=n?this._module.HEAP16:this._module.HEAPU16;break;case 4:this._heapArray=n?this._module.HEAP32:this._module.HEAPU32;break;default:this._heapArray=this._module.HEAPU8}r&&(this._size=4,this._heapArray=this._module.HEAPF32),this._pointer=this._module._malloc(t)}free(){this._module._free(this.pointer)}get pointer(){return this._pointer}get value(){let e=0;switch(this._size){case 2:e=1;break;case 4:e=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}return this._heapArray[this.pointer>>e]}set value(e){let t=0;switch(this._size){case 2:t=1;break;case 4:t=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}this._heapArray[this.pointer>>t]=e}}class k extends P{constructor(e,t){super(e,4,!0,!1),void 0!==t&&(this.value=t)}}class x extends P{constructor(e,t){super(e,4,!1,!1),void 0!==t&&(this.value=t)}}class R extends P{constructor(e,t,n,r,o){super(e,t*n,r,o);let i=0;switch(n){case 1:this._heapArray=r?this._module.HEAP8:this._module.HEAPU8,i=0;break;case 2:this._heapArray=r?this._module.HEAP16:this._module.HEAPU16,i=1;break;case 4:this._heapArray=r?this._module.HEAP32:this._module.HEAPU32,i=2;break;default:throw new Error("Unit size must be an integer-size")}o&&(this._heapArray=this._module.HEAPF32,i=2);let s=this._pointer>>i;this._buffer=this._heapArray.subarray(s,s+t),this._length=t}set(e,t){this._buffer.set(e,t)}subarray(e,t){return this._buffer.subarray(e,t)}get length(){return this._length}}class B extends R{constructor(e,t){super(e,t,4,!0,!0)}}class M extends R{constructor(e,t){super(e,t,1,!1,!1)}}class W{constructor(e){this._module=e}mallocInt32(e){return new k(this._module,e)}mallocUint32(e){return new x(this._module,e)}mallocUint8Buffer(e){return new M(this._module,e)}mallocFloat32Buffer(e){return new B(this._module,e)}}var I,C=(I="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){e=void 0!==(e=e||{})?e:{};class t{constructor(t,n,r){this.config={inputSampleRate:t,channelCount:n},this.memory=new W(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._container=new e.Container,this._container.init(48e3,n,Math.floor(4294967295*Math.random())),this.OpusInitCodec(48e3,n,r),this.SpeexInitResampler(t,48e3,n),this.inputSamplesPerChannel=20*t/1e3,this.outputSamplePerChannel=960,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*n),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*n),this.mOutputBuffer=this.memory.mallocUint8Buffer(4e3),this.interleavedBuffers=1!==n?new Float32Array(4096*n):void 0}encode(e){let t=this.interleave(e),n=0;for(;n<t.length;){let e=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+e),this.inputBufferIndex),this.inputBufferIndex+=e,this.inputBufferIndex>=this.mInputBuffer.length){let e=this.memory.mallocUint32(this.inputSamplesPerChannel),t=this.memory.mallocUint32(this.outputSamplePerChannel),n=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,e.pointer,this.mResampledBuffer.pointer,t.pointer);if(e.free(),t.free(),0!==n)throw new Error("Resampling error.");let r=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(r<0)throw new Error("Opus encoding error.");this._container.writeFrame(this.mOutputBuffer.pointer,r,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=e}}close(){const{channelCount:t}=this.config;let n=[];for(let e=0;e<t;++e)n.push(new Float32Array(4096-this.inputBufferIndex/t));this.encode(n),e.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}interleave(e){const t=e.length;if(1===t)return e[0];for(let n=0;n<t;n++){let r=e[n];for(let e=0;e<r.length;e++)this.interleavedBuffers[e*t+n]=r[e]}return this.interleavedBuffers}OpusInitCodec(e,t,n){let r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,2049,r.pointer);let o=r.value;if(r.free(),0!==o)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(4002,n)}OpusSetOpusControl(e,t){let n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}SpeexInitResampler(e,t,n){let r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,6,r.pointer);let o=r.value;if(r.free(),0!==o)throw new Error("Initializing resampler failed.")}}e.init=function(n,r,o){e.encodedBuffers=[],e.encoder=new t(n,r,o)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){return e.encodedBuffers.splice(0,e.encodedBuffers.length)},e.close=function(){e.encoder.close()};var n,r,o,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(e,t){throw t},e.preRun=[],e.postRun=[],r="object"==typeof window,o="function"==typeof importScripts;var s="";(r||o)&&(o?s=self.location.href:document.currentScript&&(s=document.currentScript.src),I&&(s=I),s=0!==s.indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):"",e.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},o&&(e.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),e.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},e.setWindowTitle=function(e){document.title=e});var a,c=e.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),u=e.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||c);for(n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);i=void 0,"object"!=typeof WebAssembly&&u("no native wasm support detected");var l,p,d,f,h=!1,m="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t){return e?function(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&m)return m.decode(e.subarray(t,o));for(var i="";t<o;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var u=s-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&s)<<6|a)}else i+=String.fromCharCode(s)}return i}(d,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var y=e.TOTAL_MEMORY||16777216;function w(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}y<5242880&&u("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+y+"! (TOTAL_STACK=5242880)"),e.buffer?l=e.buffer:"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(a=new WebAssembly.Memory({initial:y/65536,maximum:y/65536}),l=a.buffer):l=new ArrayBuffer(y),e.HEAP8=p=new Int8Array(l),e.HEAP16=new Int16Array(l),e.HEAP32=f=new Int32Array(l),e.HEAPU8=d=new Uint8Array(l),e.HEAPU16=new Uint16Array(l),e.HEAPU32=new Uint32Array(l),e.HEAPF32=new Float32Array(l),e.HEAPF64=new Float64Array(l),f[10228]=5283824;var g=[],b=[],v=[],E=[],T=!1,A=Math.abs,S=Math.sqrt,O=Math.ceil,P=Math.floor,k=0,x=null,R=null;function B(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}e.preloadedImages={},e.preloadedAudios={};var M,C="OggOpusEncoder.wasm";function D(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(e.readBinary)return e.readBinary(C);throw"both async and sync fetching of the wasm failed"}catch(e){Y(e)}}function j(t){var n={env:t};function i(t,n){var r=t.exports;e.asm=r,function(t){if(k--,e.monitorRunDependencies&&e.monitorRunDependencies(k),0==k&&(null!==x&&(clearInterval(x),x=null),R)){var n=R;R=null,n()}}()}function s(e){i(e.instance)}function a(t){return(e.wasmBinary||!r&&!o||"function"!=typeof fetch?new Promise((function(e,t){e(D())})):fetch(C,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+C+"'";return e.arrayBuffer()})).catch((function(){return D()}))).then((function(e){return WebAssembly.instantiate(e,n)})).then(t,(function(e){u("failed to asynchronously prepare wasm: "+e),Y(e)}))}if(k++,e.monitorRunDependencies&&e.monitorRunDependencies(k),e.instantiateWasm)try{return e.instantiateWasm(n,i)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(e.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||B(C)||"function"!=typeof fetch)return a(s);fetch(C,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,n).then(s,(function(e){u("wasm streaming compile failed: "+e),u("falling back to ArrayBuffer instantiation"),a(s)}))}))}(),{}}function U(e){return(e=+e)>=0?+P(e+.5):+O(e-.5)}function L(t){return e.___errno_location&&(f[e.___errno_location()>>2]=t),t}function H(e){Y("OOM")}B(C)||(M=C,C=e.locateFile?e.locateFile(M,s):s+M),e.asm=function(e,t,n){return t.memory=a,t.table=new WebAssembly.Table({initial:31,maximum:31,element:"anyfunc"}),j(t)};var N={b:function(e,t,n,r){Y("Assertion failed: "+_(e)+", at: "+[t?_(t):"unknown filename",n,r?_(r):"unknown function"])},j:function(){throw h=!0,"Pure virtual function called!"},i:function(){e.abort()},a:A,d:function(t,n){let r=new Uint8Array(e.HEAPU8.buffer,t,n);e.encodedBuffers.push(new Uint8Array(r).buffer)},g:function(e,t,n){d.set(d.subarray(t,t+n),e)},h:A,k:P,f:function(e){return(e=+e)-+P(e)!=.5?+U(e):2*+U(e/2)},c:function(e){var t,n,r;return e|=0,r=0|p.length,(0|e)>0&(0|(n=(t=0|f[10228])+e|0))<(0|t)|(0|n)<0?(H(),L(12),-1):(0|n)>(0|r)&&!(0|void H())?(L(12),-1):(f[10228]=0|n,0|t)},e:S},F=e.asm({},N,l);e.asm=F,e.___wasm_call_ctors=function(){return e.asm.__wasm_call_ctors.apply(null,arguments)};var z=e._emscripten_bind_VoidPtr___destroy___0=function(){return e.asm.l.apply(null,arguments)},V=e._emscripten_bind_Container_Container_0=function(){return e.asm.m.apply(null,arguments)},G=e._emscripten_bind_Container_init_3=function(){return e.asm.n.apply(null,arguments)},$=e._emscripten_bind_Container_writeFrame_3=function(){return e.asm.o.apply(null,arguments)},q=e._emscripten_bind_Container___destroy___0=function(){return e.asm.p.apply(null,arguments)};function X(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function K(t){function n(){e.calledRun||(e.calledRun=!0,h||(T||(T=!0,w(b)),w(v),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),E.unshift(t);var t;w(E)}()))}t=t||e.arguments,k>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),g.unshift(t);var t;w(g)}(),k>0||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}function Y(t){throw e.onAbort&&e.onAbort(t),void 0!==t?(c(t),u(t),t='"'+t+'"'):t="",h=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(e._opus_encoder_create=function(){return e.asm.q.apply(null,arguments)},e._opus_encode_float=function(){return e.asm.r.apply(null,arguments)},e._opus_encoder_ctl=function(){return e.asm.s.apply(null,arguments)},e._opus_encoder_destroy=function(){return e.asm.t.apply(null,arguments)},e._malloc=function(){return e.asm.u.apply(null,arguments)},e._free=function(){return e.asm.v.apply(null,arguments)},e._speex_resampler_init=function(){return e.asm.w.apply(null,arguments)},e._speex_resampler_destroy=function(){return e.asm.x.apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return e.asm.y.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.z.apply(null,arguments)},e.dynCall_v=function(){return e.asm.A.apply(null,arguments)},e.asm=F,e.then=function(t){if(e.calledRun)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},X.prototype=new Error,X.prototype.constructor=X,R=function t(){e.calledRun||K(),e.calledRun||(R=t)},e.run=K,e.abort=Y,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function J(){}function Q(e){return(e||J).__cache__}function Z(e,t){var n=Q(t),r=n[e];return r||((r=Object.create((t||J).prototype)).ptr=e,n[e]=r)}function ee(){throw"cannot construct a VoidPtr, no constructor in IDL"}function te(){this.ptr=V(),Q(te)[this.ptr]=this}return e.noExitRuntime=!0,K(),J.prototype=Object.create(J.prototype),J.prototype.constructor=J,J.prototype.__class__=J,J.__cache__={},e.WrapperObject=J,e.getCache=Q,e.wrapPointer=Z,e.castObject=function(e,t){return Z(e.ptr,t)},e.NULL=Z(0),e.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Q(e.__class__)[e.ptr]},e.compare=function(e,t){return e.ptr===t.ptr},e.getPointer=function(e){return e.ptr},e.getClass=function(e){return e.__class__},ee.prototype=Object.create(J.prototype),ee.prototype.constructor=ee,ee.prototype.__class__=ee,ee.__cache__={},e.VoidPtr=ee,ee.prototype.__destroy__=ee.prototype.__destroy__=function(){var e=this.ptr;z(e)},te.prototype=Object.create(J.prototype),te.prototype.constructor=te,te.prototype.__class__=te,te.__cache__={},e.Container=te,te.prototype.init=te.prototype.init=function(e,t,n){var r=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),G(r,e,t,n)},te.prototype.writeFrame=te.prototype.writeFrame=function(e,t,n){var r=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),$(r,e,t,n)},te.prototype.__destroy__=te.prototype.__destroy__=function(){var e=this.ptr;q(e)},function(){function e(){}var t;T||(t=e,v.unshift(t))}(),e});"object"==typeof exports&&"object"==typeof module?module.exports=C:"function"==typeof define&&define.amd?define([],(function(){return C})):"object"==typeof exports&&(exports.Module=C),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&function(e){const t=C;let n;e.onmessage=function(e){const{command:r}=e.data;switch(r){case"loadEncoder":const{mimeType:o,wasmPath:i}=e.data;let s;switch(o){case"audio/ogg":s=t}let a={};i&&(a.locateFile=function(e,t){return e.match(/.wasm/)?i:t+e}),s(a).then(e=>{n=e,self.postMessage({command:"readyToInit"})});break;case"init":const{sampleRate:c,channelCount:u,bitsPerSecond:l}=e.data;n.init(c,u,l);break;case"pushInputData":const{channelBuffers:p,length:d,duration:f}=e.data;for(let e=0;e<p.length;e++)p[e]=new Float32Array(p[e].buffer);n.encode(p);break;case"getEncodedData":case"done":"done"===r&&n.close();const h=n.flush();self.postMessage({command:"done"===r?"lastEncodedData":"encodedData",buffers:h},h),"done"===r&&self.close()}}}(self);let D=document.createElement("audio");D.muted=!0,D.hidden=!0,D.autoplay=!0,document.body.appendChild(D);let j=null,U=null,L={},H=null;const N={OggOpusEncoderWasmPath:"./OggOpusEncoder.wasm"};window.MediaRecorder=S,D.addEventListener("canplay",(function(){try{D.play(),L=function(e,t){let n={mimeType:"audio/ogg"},r=new MediaRecorder(e,n,N,t),o=[];return r.onstart=function(){o=[],console.log("Recorder started")},r.ondataavailable=function(e){o.push(e.data),console.log("Recorder data available ")},r.onstop=function(){console.log("recorder complete!");let t=new Blob(o,{type:r.mimeType});if(o=[],!t.size)throw new Error("Exception: Blob is empty");H&&(H(t),L=null,U=null,e=null,H=null)},r.onpause=function(){console.log("Recorder paused")},r.onresume=function(){console.log("Recorder resumed")},r.onerror=function(e){e&&(e.name||(e.name="UnknownError"),-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e),console.error("Recorder encounters error:"+e.message),"inactive"!==r._state&&"stopped"!==r._state&&r.stop())},r}(j,3e4),console.log("Creating MediaRecorder is successful, Start recorder..."),L.startRecording()}catch(e){console.log("MediaRecorder is failed: "+e.message),Promise.reject(new Error)}})),D.addEventListener("ended",(function(){"inactive"!==L._state&&"stopped"!==L._state&&L.stopRecording()})),window.addEventListener("load",(function(){if(void 0===S)console.error("No OpusMediaRecorder found");else{["audio/wave","audio/wav","audio/ogg","audio/ogg;codecs=opus","audio/webm","audio/webm;codecs=opus"].forEach((function(e){console.log(e+" is "+(MediaRecorder.isTypeSupported(e)?"supported":"NOT supported"))}))}}),!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk9nZ09wdXNSZWNvcmRlci5qcyJdLCJuYW1lcyI6WyJwcml2YXRlRGF0YSIsIldlYWtNYXAiLCJ3cmFwcGVycyIsInBkIiwiZXZlbnQiLCJyZXR2IiwiZ2V0IiwiY29uc29sZSIsImFzc2VydCIsIkV2ZW50V3JhcHBlciIsImV2ZW50VGFyZ2V0Iiwic2V0IiwidGhpcyIsImV2ZW50UGhhc2UiLCJjdXJyZW50VGFyZ2V0IiwiY2FuY2VsZWQiLCJzdG9wcGVkIiwicGFzc2l2ZUxpc3RlbmVyIiwidGltZVN0YW1wIiwiRGF0ZSIsIm5vdyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJlbnVtZXJhYmxlIiwia2V5cyIsImkiLCJsZW5ndGgiLCJrZXkiLCJkZWZpbmVSZWRpcmVjdERlc2NyaXB0b3IiLCJbb2JqZWN0IE9iamVjdF0iLCJjb25maWd1cmFibGUiLCJkZWZpbmVDYWxsRGVzY3JpcHRvciIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0V3JhcHBlciIsInByb3RvIiwicHJvdG90eXBlIiwid3JhcHBlciIsIkJhc2VFdmVudCIsIkN1c3RvbUV2ZW50IiwiY2FsbCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwid3JpdGFibGUiLCJpc0Z1bmMiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJkZWZpbmVXcmFwcGVyIiwiZ2V0UHJvdG90eXBlT2YiLCJpc1N0b3BwZWQiLCJzZXRQYXNzaXZlTGlzdGVuZXIiLCJ0eXBlIiwidGFyZ2V0IiwiTk9ORSIsIkNBUFRVUklOR19QSEFTRSIsIkFUX1RBUkdFVCIsIkJVQkJMSU5HX1BIQVNFIiwiZGF0YSIsInN0b3BQcm9wYWdhdGlvbiIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImJ1YmJsZXMiLCJCb29sZWFuIiwiY2FuY2VsYWJsZSIsInByZXZlbnREZWZhdWx0Iiwid2FybiIsImRlZmF1bHRQcmV2ZW50ZWQiLCJjb21wb3NlZCIsIndpbmRvdyIsIkV2ZW50Iiwic2V0UHJvdG90eXBlT2YiLCJsaXN0ZW5lcnNNYXAiLCJpc09iamVjdCIsIngiLCJnZXRMaXN0ZW5lcnMiLCJsaXN0ZW5lcnMiLCJUeXBlRXJyb3IiLCJkZWZpbmVFdmVudEF0dHJpYnV0ZSIsImV2ZW50VGFyZ2V0UHJvdG90eXBlIiwiZXZlbnROYW1lIiwibm9kZSIsImxpc3RlbmVyVHlwZSIsImxpc3RlbmVyIiwibmV4dCIsInByZXYiLCJkZWxldGUiLCJuZXdOb2RlIiwicGFzc2l2ZSIsIm9uY2UiLCJkZWZpbmVFdmVudEF0dHJpYnV0ZURlc2NyaXB0b3IiLCJkZWZpbmVDdXN0b21FdmVudFRhcmdldCIsImV2ZW50TmFtZXMiLCJDdXN0b21FdmVudFRhcmdldCIsIkV2ZW50VGFyZ2V0V3JhcHBlciIsIkFycmF5IiwiaXNBcnJheSIsInR5cGVzIiwiTWFwIiwib3B0aW9ucyIsIm9wdGlvbnNJc09iaiIsImNhcHR1cmUiLCJ1bmRlZmluZWQiLCJ3cmFwcGVkRXZlbnQiLCJ3cmFwRXZlbnQiLCJlcnIiLCJlcnJvciIsImhhbmRsZUV2ZW50Iiwic2V0RXZlbnRQaGFzZSIsInNldEN1cnJlbnRUYXJnZXQiLCJFdmVudFRhcmdldCIsIl9fc3ByZWFkQXJyYXlzIiwicyIsImlsIiwiciIsImsiLCJhIiwiaiIsImpsIiwiQnJvd3NlckluZm8iLCJuYW1lIiwidmVyc2lvbiIsIm9zIiwiTm9kZUluZm8iLCJwcm9jZXNzIiwicGxhdGZvcm0iLCJCb3RJbmZvIiwiYm90IiwidXNlckFnZW50UnVsZXMiLCJvcGVyYXRpbmdTeXN0ZW1SdWxlcyIsInBhcnNlVXNlckFnZW50IiwidWEiLCJtYXRjaGVkUnVsZSIsInJlZHVjZSIsIm1hdGNoZWQiLCJfYSIsImJyb3dzZXIiLCJyZWdleCIsInVhTWF0Y2giLCJleGVjIiwibWF0Y2giLCJ2ZXJzaW9uUGFydHMiLCJzcGxpdCIsInNsaWNlIiwiY291bnQiLCJvdXRwdXQiLCJpaSIsInB1c2giLCJjcmVhdGVWZXJzaW9uUGFydHMiLCJqb2luIiwidGVzdCIsImRldGVjdE9TIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiT2dnT3B1c01lZGlhUmVjb3JkZXIiLCJzdHJlYW0iLCJ3b3JrZXJPcHRpb25zIiwiZHVyYXRpb24iLCJtaW1lVHlwZSIsImF1ZGlvQml0c1BlclNlY29uZCIsInZpZGVvQml0c1BlclNlY29uZCIsImJpdHNQZXJTZWNvbmQiLCJlbmNvZGVyV29ya2VyRmFjdG9yeSIsIk9nZ09wdXNFbmNvZGVyV2FzbVBhdGgiLCJXZWJNT3B1c0VuY29kZXJXYXNtUGF0aCIsInN1cGVyIiwiX3N0cmVhbSIsIl9zdGF0ZSIsIl9taW1lVHlwZSIsIl9hdWRpb0JpdHNQZXJTZWNvbmQiLCJ3b3JrZXJTdGF0ZSIsInJlY29yZGluZ0R1cmF0aW9uIiwiaXNUeXBlU3VwcG9ydGVkIiwiX3BhcnNlVHlwZSIsInN1YnR5cGUiLCJfd2FzbVBhdGgiLCJFcnJvciIsIndvcmtlckRpciIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsImVuY29kZXJXb3JrZXIiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJCbG9iIiwiX3dvcmtlckZhY3RvcnkiLCJfIiwiV29ya2VyIiwiX3NwYXduV29ya2VyIiwic3RhdGUiLCJ3b3JrZXIiLCJvbm1lc3NhZ2UiLCJlIiwiX29ubWVzc2FnZUZyb21Xb3JrZXIiLCJvbmVycm9yIiwiX29uZXJyb3JGcm9tV29ya2VyIiwiX3Bvc3RNZXNzYWdlVG9Xb3JrZXIiLCJ3YXNtUGF0aCIsImNvbW1hbmQiLCJtZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJzYW1wbGVSYXRlIiwiY2hhbm5lbENvdW50Iiwic291cmNlIiwiY29ubmVjdCIsInByb2Nlc3NvciIsImNvbnRleHQiLCJkZXN0aW5hdGlvbiIsImV2ZW50VG9QdXNoIiwiZGlzcGF0Y2hFdmVudCIsImNoYW5uZWxCdWZmZXJzIiwibWFwIiwiYnVmZmVyIiwiYnVmZmVycyIsImRpc2Nvbm5lY3QiLCJ0ZXJtaW5hdGUiLCJmaWxlbmFtZSIsImxpbmVubyIsImVycm9yVG9QdXNoIiwidGltZXNsaWNlIiwiZWxhcHNlZFRpbWUiLCJvbmF1ZGlvcHJvY2VzcyIsImlucHV0QnVmZmVyIiwicGxheWJhY2tUaW1lIiwibnVtYmVyT2ZDaGFubmVscyIsImdldENoYW5uZWxEYXRhIiwiY291bnRlciIsInN0b3BSZWNvcmRpbmciLCJzZXRUaW1lb3V0IiwiaGFuZGxlUmVjb3JkaW5nRHVyYXRpb24iLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiZ2V0QXVkaW9UcmFja3MiLCJjcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSIsImNyZWF0ZVNjcmlwdFByb2Nlc3NvciIsIl9lbmFibGVBdWRpb1Byb2Nlc3NDYWxsYmFjayIsImNsb3NlIiwiY29kZWMiLCJvcmlnaW5hbCIsImZvckVhY2giLCJ0cmFuc2ZlciIsIl9BbGxvY2F0ZWRQb2ludGVyIiwiZW1Nb2R1bGUiLCJzaXplIiwiaXNTaWduZWQiLCJpc0Zsb2F0IiwiX3NpemUiLCJfbW9kdWxlIiwiX2hlYXBBcnJheSIsIkhFQVA4IiwiSEVBUFU4IiwiSEVBUDE2IiwiSEVBUFUxNiIsIkhFQVAzMiIsIkhFQVBVMzIiLCJIRUFQRjMyIiwiX3BvaW50ZXIiLCJfbWFsbG9jIiwiX2ZyZWUiLCJwb2ludGVyIiwiYml0c1RvU2hpZnQiLCJ2YWx1ZVRvU2V0IiwiX0ludDMyUG9pbnRlciIsIl9VaW50MzJQb2ludGVyIiwiX0FsbG9jYXRlZEJ1ZmZlciIsInVuaXRTaXplIiwib2Zmc2V0IiwiX2J1ZmZlciIsInN1YmFycmF5IiwiX2xlbmd0aCIsImFycmF5IiwiYmVnaW4iLCJlbmQiLCJfRmxvYXQzMkJ1ZmZlciIsIl9VaW50OEJ1ZmZlciIsIkVtc2NyaXB0ZW5NZW1vcnlBbGxvY2F0b3IiLCJfc2NyaXB0RGlyIiwiTW9kdWxlIiwiX09wdXNFbmNvZGVyIiwiaW5wdXRTYW1wbGVSYXRlIiwiY29uZmlnIiwibWVtb3J5IiwiX29wdXNfZW5jb2Rlcl9jcmVhdGUiLCJfb3B1c19lbmNvZGVyX2N0bCIsIl9vcHVzX2VuY29kZV9mbG9hdCIsIl9vcHVzX2VuY29kZXJfZGVzdHJveSIsIl9zcGVleF9yZXNhbXBsZXJfaW5pdCIsIl9zcGVleF9yZXNhbXBsZXJfcHJvY2Vzc19pbnRlcmxlYXZlZF9mbG9hdCIsIl9zcGVleF9yZXNhbXBsZXJfZGVzdHJveSIsIl9jb250YWluZXIiLCJDb250YWluZXIiLCJpbml0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiT3B1c0luaXRDb2RlYyIsIlNwZWV4SW5pdFJlc2FtcGxlciIsImlucHV0U2FtcGxlc1BlckNoYW5uZWwiLCJvdXRwdXRTYW1wbGVQZXJDaGFubmVsIiwiT1BVU19PVVRQVVRfU0FNUExFX1JBVEUiLCJpbnB1dEJ1ZmZlckluZGV4IiwibUlucHV0QnVmZmVyIiwibWFsbG9jRmxvYXQzMkJ1ZmZlciIsIm1SZXNhbXBsZWRCdWZmZXIiLCJtT3V0cHV0QnVmZmVyIiwibWFsbG9jVWludDhCdWZmZXIiLCJpbnRlcmxlYXZlZEJ1ZmZlcnMiLCJGbG9hdDMyQXJyYXkiLCJzYW1wbGVzIiwiaW50ZXJsZWF2ZSIsInNhbXBsZUluZGV4IiwibGVuZ3RoVG9Db3B5IiwibWluIiwibUlucHV0TGVuZ3RoIiwibWFsbG9jVWludDMyIiwibU91dHB1dExlbmd0aCIsInJlc2FtcGxlciIsImZyZWUiLCJwYWNrZXRMZW5ndGgiLCJlbmNvZGVyIiwid3JpdGVGcmFtZSIsImZpbmFsRnJhbWVCdWZmZXJzIiwiZW5jb2RlIiwiZGVzdHJveSIsImNoQ291bnQiLCJjaCIsIm91dFJhdGUiLCJiaXRSYXRlIiwibUVyciIsIk9wdXNTZXRPcHVzQ29udHJvbCIsInJlcXVlc3QiLCJ2YUFyZyIsIm1hbGxvY0ludDMyIiwiaW5wdXRSYXRlIiwib3V0cHV0UmF0ZSIsImVuY29kZWRCdWZmZXJzIiwiZmx1c2giLCJzcGxpY2UiLCJFTlZJUk9OTUVOVF9JU19XRUIiLCJFTlZJUk9OTUVOVF9JU19XT1JLRVIiLCJtb2R1bGVPdmVycmlkZXMiLCJoYXNPd25Qcm9wZXJ0eSIsInN0YXR1cyIsInRvVGhyb3ciLCJpbXBvcnRTY3JpcHRzIiwic2NyaXB0RGlyZWN0b3J5IiwiaW5kZXhPZiIsInVybCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZVR5cGUiLCJVaW50OEFycmF5IiwicmVzcG9uc2UiLCJvbmxvYWQiLCJ0aXRsZSIsIndhc21NZW1vcnkiLCJvdXQiLCJsb2ciLCJiaW5kIiwicHJpbnQiLCJwcmludEVyciIsIldlYkFzc2VtYmx5IiwiQUJPUlQiLCJVVEY4RGVjb2RlciIsIlRleHREZWNvZGVyIiwiVVRGOFRvU3RyaW5nIiwicHRyIiwibWF4Qnl0ZXNUb1JlYWQiLCJ1OEFycmF5IiwiaWR4IiwiZW5kSWR4IiwiZW5kUHRyIiwiZGVjb2RlIiwic3RyIiwidTAiLCJ1MSIsInUyIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiVVRGOEFycmF5VG9TdHJpbmciLCJJTklUSUFMX1RPVEFMX01FTU9SWSIsImNhbGxSdW50aW1lQ2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiY2FsbGJhY2siLCJzaGlmdCIsImZ1bmMiLCJhcmciLCJNZW1vcnkiLCJpbml0aWFsIiwibWF4aW11bSIsIkFycmF5QnVmZmVyIiwiSW50OEFycmF5IiwiSW50MTZBcnJheSIsIkludDMyQXJyYXkiLCJVaW50MTZBcnJheSIsIlVpbnQzMkFycmF5IiwiRmxvYXQ2NEFycmF5IiwiRFlOQU1JQ1RPUF9QVFIiLCJfX0FUUFJFUlVOX18iLCJfX0FUSU5JVF9fIiwiX19BVE1BSU5fXyIsIl9fQVRQT1NUUlVOX18iLCJydW50aW1lSW5pdGlhbGl6ZWQiLCJNYXRoX2FicyIsImFicyIsIk1hdGhfc3FydCIsInNxcnQiLCJNYXRoX2NlaWwiLCJjZWlsIiwiTWF0aF9mbG9vciIsInJ1bkRlcGVuZGVuY2llcyIsInJ1bkRlcGVuZGVuY3lXYXRjaGVyIiwiZGVwZW5kZW5jaWVzRnVsZmlsbGVkIiwiaXNEYXRhVVJJIiwic3RhcnRzV2l0aCIsInBhdGgiLCJ3YXNtQmluYXJ5RmlsZSIsImdldEJpbmFyeSIsImFib3J0IiwiY3JlYXRlV2FzbSIsImVudiIsImluZm8iLCJyZWNlaXZlSW5zdGFuY2UiLCJpbnN0YW5jZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJpZCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVSdW5EZXBlbmRlbmN5IiwicmVjZWl2ZUluc3RhbnRpYXRlZFNvdXJjZSIsImluc3RhbnRpYXRlQXJyYXlCdWZmZXIiLCJyZWNlaXZlciIsImZldGNoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjcmVkZW50aWFscyIsInRoZW4iLCJjYXRjaCIsImJpbmFyeSIsImluc3RhbnRpYXRlIiwicmVhc29uIiwiaW5zdGFudGlhdGVTdHJlYW1pbmciLCJpbnN0YW50aWF0ZUFzeW5jIiwiX3JvdW5kIiwiZCIsIl9fX3NldEVyck5vIiwiYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnkiLCJyZXF1ZXN0ZWRTaXplIiwiZ2xvYmFsIiwicHJvdmlkZWRCdWZmZXIiLCJUYWJsZSIsImVsZW1lbnQiLCJhc21MaWJyYXJ5QXJnIiwiYiIsImNvbmRpdGlvbiIsImxpbmUiLCJidWYiLCJsZW4iLCJnIiwiZGVzdCIsIm51bSIsImgiLCJmIiwiYyIsImluY3JlbWVudCIsIm9sZER5bmFtaWNUb3AiLCJuZXdEeW5hbWljVG9wIiwidG90YWxNZW1vcnkiLCJhc20iLCJfZW1zY3JpcHRlbl9iaW5kX1ZvaWRQdHJfX19kZXN0cm95X19fMCIsIl9lbXNjcmlwdGVuX2JpbmRfQ29udGFpbmVyX0NvbnRhaW5lcl8wIiwiX2Vtc2NyaXB0ZW5fYmluZF9Db250YWluZXJfaW5pdF8zIiwiX2Vtc2NyaXB0ZW5fYmluZF9Db250YWluZXJfd3JpdGVGcmFtZV8zIiwiX2Vtc2NyaXB0ZW5fYmluZF9Db250YWluZXJfX19kZXN0cm95X19fMCIsIkV4aXRTdGF0dXMiLCJydW4iLCJhcmdzIiwiZG9SdW4iLCJjYiIsInVuc2hpZnQiLCJwb3N0UnVuIiwicHJlUnVuIiwid2hhdCIsIm9sZCIsInJ1bkNhbGxlciIsInBvcCIsIldyYXBwZXJPYmplY3QiLCJnZXRDYWNoZSIsIl9fY2xhc3NfXyIsIl9fY2FjaGVfXyIsIndyYXBQb2ludGVyIiwiY2FjaGUiLCJyZXQiLCJWb2lkUHRyIiwib2JqIiwib2JqMSIsIm9iajIiLCJfX2Rlc3Ryb3lfXyIsImFyZzAiLCJhcmcxIiwiYXJnMiIsInNldHVwRW51bXMiLCJkZWZpbmUiLCJXb3JrZXJHbG9iYWxTY29wZSIsIndvcmtlckdsb2JhbFNjb3BlIiwiT2dnT3B1c0VuY29kZXIiLCJlbmNvZGVyTW9kdWxlIiwiaW5pdFdvcmtlciIsImxvY2FsQXVkaW8iLCJjcmVhdGVFbGVtZW50IiwibXV0ZWQiLCJoaWRkZW4iLCJhdXRvcGxheSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImF1ZGlvQ3R4IiwiYXVkaW9SZWNvcmRlciIsInJlY29yZGVyQ2FsbGJhY2siLCJNZWRpYVJlY29yZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXkiLCJyZWNvcmRlciIsImRhdGFDaHVua3MiLCJvbnN0YXJ0Iiwib25kYXRhYXZhaWxhYmxlIiwib25zdG9wIiwiYmxvYiIsIm9ucGF1c2UiLCJvbnJlc3VtZSIsInRvU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJzdG9wIiwiY3JlYXRlTWVkaWFSZWNvcmRlciIsInN0YXJ0UmVjb3JkaW5nIl0sIm1hcHBpbmdzIjoiQUFLQSxNQUFNQSxFQUFjLElBQUlDLFFBT2xCQyxFQUFXLElBQUlELFFBUXJCLFNBQVNFLEVBQUdDLEdBQ1IsTUFBTUMsRUFBT0wsRUFBWU0sSUFBSUYsR0FFN0IsT0FEQUcsUUFBUUMsT0FBZSxNQUFSSCxFQUFjLDhDQUErQ0QsR0FDckVDLEVBYVgsU0FBU0ksRUFBYUMsRUFBYU4sR0FDL0JKLEVBQVlXLElBQUlDLEtBQU0sQ0FDbEJGLFlBQUFBLEVBQ0FOLE1BQUFBLEVBQ0FTLFdBQVksRUFDWkMsY0FBZUosRUFDZkssVUFBVSxFQUNWQyxTQUFTLEVBQ1RDLGdCQUFpQixLQUNqQkMsVUFB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UUFBUWlHLE1BQU0seUpBQTBKQSxHQUNsSixpQkFBZkEsRUFBTWMsS0FDYi9HLFFBQVFpRyxNQUFNLCtFQUFnRkEsR0FFOUZqRyxRQUFRaUcsTUFBTSxzQkFBdUJBLEdBR3pDakcsUUFBUWlHLE1BQU0sNkJBQStCQSxFQUFNb0csU0FDM0IsYUFBcEJzVSxFQUFTM1csUUFBNkMsWUFBcEIyVyxFQUFTM1csUUFDM0MyVyxFQUFTVSxTQUlWVixFQXdCYVcsQ0FBb0JsWSxFQXZIcEIsS0F3SGhCcEosUUFBUXNXLElBQUksMkRBQ1pnSyxFQUFjaUIsaUJBQ2pCLE1BQU96VixHQUNKOUwsUUFBUXNXLElBQUksNEJBQTRCeEssRUFBRU8sU0FDMUM2TyxRQUFRRSxPQUFPLElBQUkzUSxXQU8zQnFWLEVBQVdXLGlCQUFpQixTQUFTLFdBQ0wsYUFBekJILEVBQWN0VyxRQUFrRCxZQUF6QnNXLEVBQWN0VyxRQUNwRHNXLEVBQWNyUyxtQkFPdEJySyxPQUFPNmMsaUJBQWlCLFFBQVEsV0FDNUIsUUFBNkI1YSxJQUF6QnNELEVBQ0FuSixRQUFRaUcsTUFBTSxrQ0FDWCxDQUNnQixDQUNmLGFBQ0EsWUFDQSxZQUNBLHdCQUNBLGFBQ0EsMEJBRVM0SSxTQUFRLFNBQVVqTSxHQUMzQjVDLFFBQVFzVyxJQUFJMVQsRUFBTyxRQUFVNGQsY0FBY25XLGdCQUFnQnpILEdBQVEsWUFBYyx5QkFHMUYiLCJmaWxlIjoiT2dnT3B1c1JlY29yZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFByaXZhdGUgZGF0YSBmb3IgZXZlbnQgd3JhcHBlcnMuXHJcbiAqIEB0eXBlIHtXZWFrTWFwPEV2ZW50LCBQcml2YXRlRGF0YT59XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBwcml2YXRlRGF0YSA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4vKipcclxuICogQ2FjaGUgZm9yIHdyYXBwZXIgY2xhc3Nlcy5cclxuICogQHR5cGUge1dlYWtNYXA8T2JqZWN0LCBGdW5jdGlvbj59XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCB3cmFwcGVycyA9IG5ldyBXZWFrTWFwKCk7XHJcblxyXG4vKipcclxuICogR2V0IHByaXZhdGUgZGF0YS5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IG9iamVjdCB0byBnZXQgcHJpdmF0ZSBkYXRhLlxyXG4gKiBAcmV0dXJucyB7UHJpdmF0ZURhdGF9IFRoZSBwcml2YXRlIGRhdGEgb2YgdGhlIGV2ZW50LlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcGQoZXZlbnQpIHtcclxuICAgIGNvbnN0IHJldHYgPSBwcml2YXRlRGF0YS5nZXQoZXZlbnQpO1xyXG4gICAgY29uc29sZS5hc3NlcnQocmV0diAhPSBudWxsLCBcIid0aGlzJyBpcyBleHBlY3RlZCBhbiBFdmVudCBvYmplY3QsIGJ1dCBnb3RcIiwgZXZlbnQpO1xyXG4gICAgcmV0dXJuIHJldHZcclxufVxyXG5cclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNpbnRlcmZhY2UtZXZlbnRcclxuICogQHByaXZhdGVcclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZXZlbnQgd3JhcHBlci5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IGV2ZW50VGFyZ2V0IFRoZSBldmVudCB0YXJnZXQgb2YgdGhpcyBkaXNwYXRjaGluZy5cclxuICogQHBhcmFtIHtFdmVudFdyYXBwZXJ8e3R5cGU6c3RyaW5nfX0gZXZlbnQgVGhlIG9yaWdpbmFsIGV2ZW50IHRvIHdyYXAuXHJcbiAqL1xyXG5mdW5jdGlvbiBFdmVudFdyYXBwZXIoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XHJcbiAgICBwcml2YXRlRGF0YS5zZXQodGhpcywge1xyXG4gICAgICAgIGV2ZW50VGFyZ2V0LFxyXG4gICAgICAgIGV2ZW50LFxyXG4gICAgICAgIGV2ZW50UGhhc2U6IDIsXHJcbiAgICAgICAgY3VycmVudFRhcmdldDogZXZlbnRUYXJnZXQsXHJcbiAgICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxyXG4gICAgICAgIHN0b3BwZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBhc3NpdmVMaXN0ZW5lcjogbnVsbCxcclxuICAgICAgICB0aW1lU3RhbXA6IGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gaHR0cHM6Ly9oZXljYW0uZ2l0aHViLmlvL3dlYmlkbC8jVW5mb3JnZWFibGVcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzVHJ1c3RlZFwiLCB7IHZhbHVlOiBmYWxzZSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgYWNjZXNzb3JzXHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICBpZiAoIShrZXkgaW4gdGhpcykpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gU2hvdWxkIGJlIGVudW1lcmFibGUsIGJ1dCBjbGFzcyBtZXRob2RzIGFyZSBub3QgZW51bWVyYWJsZS5cclxuRXZlbnRXcmFwcGVyLnByb3RvdHlwZSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHR5cGUgb2YgdGhpcyBldmVudC5cclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiBwZCh0aGlzKS5ldmVudC50eXBlXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxyXG4gICAgICogQHR5cGUge0V2ZW50VGFyZ2V0fVxyXG4gICAgICovXHJcbiAgICBnZXQgdGFyZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFRhcmdldFxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YXJnZXQgb2YgdGhpcyBldmVudC5cclxuICAgICAqIEB0eXBlIHtFdmVudFRhcmdldH1cclxuICAgICAqL1xyXG4gICAgZ2V0IGN1cnJlbnRUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBkKHRoaXMpLmN1cnJlbnRUYXJnZXRcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRUYXJnZXRbXX0gVGhlIGNvbXBvc2VkIHBhdGggb2YgdGhpcyBldmVudC5cclxuICAgICAqL1xyXG4gICAgY29tcG9zZWRQYXRoKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYXJnZXQgPSBwZCh0aGlzKS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgIGlmIChjdXJyZW50VGFyZ2V0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbY3VycmVudFRhcmdldF1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdGFudCBvZiBOT05FLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IE5PTkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDBcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdGFudCBvZiBDQVBUVVJJTkdfUEhBU0UuXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXQgQ0FQVFVSSU5HX1BIQVNFKCkge1xyXG4gICAgICAgIHJldHVybiAxXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RhbnQgb2YgQVRfVEFSR0VULlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IEFUX1RBUkdFVCgpIHtcclxuICAgICAgICByZXR1cm4gMlxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0YW50IG9mIEJVQkJMSU5HX1BIQVNFLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IEJVQkJMSU5HX1BIQVNFKCkge1xyXG4gICAgICAgIHJldHVybiAzXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRhcmdldCBvZiB0aGlzIGV2ZW50LlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGV2ZW50UGhhc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBkKHRoaXMpLmV2ZW50UGhhc2VcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIGV2ZW50IGJ1YmJsaW5nLlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIHN0b3BQcm9wYWdhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gcGQodGhpcyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3AgZXZlbnQgYnViYmxpbmcuXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBwZCh0aGlzKTtcclxuXHJcbiAgICAgICAgZGF0YS5zdG9wcGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodHlwZW9mIGRhdGEuZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgZGF0YS5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsYWcgdG8gYmUgYnViYmxpbmcuXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGJ1YmJsZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4ocGQodGhpcykuZXZlbnQuYnViYmxlcylcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxhZyB0byBiZSBjYW5jZWxhYmxlLlxyXG4gICAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGdldCBjYW5jZWxhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmNhbmNlbGFibGUpXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VsIHRoaXMgZXZlbnQuXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgcHJldmVudERlZmF1bHQoKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHBkKHRoaXMpO1xyXG4gICAgICAgIGlmIChkYXRhLnBhc3NpdmVMaXN0ZW5lciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkV2ZW50V3JhcHBlciNwcmV2ZW50RGVmYXVsdCgpIHdhcyBjYWxsZWQgZnJvbSBhIHBhc3NpdmUgbGlzdGVuZXI6XCIsIGRhdGEucGFzc2l2ZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZGF0YS5ldmVudC5jYW5jZWxhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YS5jYW5jZWxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmV2ZW50LnByZXZlbnREZWZhdWx0ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgZGF0YS5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxhZyB0byBpbmRpY2F0ZSBjYW5jZWxsYXRpb24gc3RhdGUuXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGRlZmF1bHRQcmV2ZW50ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBkKHRoaXMpLmNhbmNlbGVkXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsYWcgdG8gYmUgY29tcG9zZWQuXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGNvbXBvc2VkKCkge1xyXG4gICAgICAgIHJldHVybiBCb29sZWFuKHBkKHRoaXMpLmV2ZW50LmNvbXBvc2VkKVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB1bml4IHRpbWUgb2YgdGhpcyBldmVudC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldCB0aW1lU3RhbXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBkKHRoaXMpLnRpbWVTdGFtcFxyXG4gICAgfSxcclxufTtcclxuXHJcbi8vIGBjb25zdHJ1Y3RvcmAgaXMgbm90IGVudW1lcmFibGUuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudFdyYXBwZXIucHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIHsgdmFsdWU6IEV2ZW50V3JhcHBlciwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcclxuXHJcbi8vIEVuc3VyZSBgZXZlbnQgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnRXcmFwcGVyYCBpcyBgdHJ1ZWAuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cuRXZlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihFdmVudFdyYXBwZXIucHJvdG90eXBlLCB3aW5kb3cuRXZlbnQucHJvdG90eXBlKTtcclxuXHJcbiAgICAvLyBNYWtlIGFzc29jaWF0aW9uIGZvciB3cmFwcGVycy5cclxuICAgIHdyYXBwZXJzLnNldCh3aW5kb3cuRXZlbnQucHJvdG90eXBlLCBFdmVudFdyYXBwZXIpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIHJlZGlyZWN0IGEgZ2l2ZW4gcHJvcGVydHkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgUHJvcGVydHkgbmFtZSB0byBkZWZpbmUgcHJvcGVydHkgZGVzY3JpcHRvci5cclxuICogQHJldHVybnMge1Byb3BlcnR5RGVzY3JpcHRvcn0gVGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gcmVkaXJlY3QgdGhlIHByb3BlcnR5LlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwZCh0aGlzKS5ldmVudFtrZXldXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQodmFsdWUpIHtcclxuICAgICAgICAgICAgcGQodGhpcykuZXZlbnRba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHByb3BlcnR5IGRlc2NyaXB0b3IgdG8gY2FsbCBhIGdpdmVuIG1ldGhvZCBwcm9wZXJ0eS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBQcm9wZXJ0eSBuYW1lIHRvIGRlZmluZSBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxyXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciB0byBjYWxsIHRoZSBtZXRob2QgcHJvcGVydHkuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVDYWxsRGVzY3JpcHRvcihrZXkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsdWUoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gcGQodGhpcykuZXZlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBldmVudFtrZXldLmFwcGx5KGV2ZW50LCBhcmd1bWVudHMpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmluZSBuZXcgd3JhcHBlciBjbGFzcy5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gQmFzZUV2ZW50IFRoZSBiYXNlIHdyYXBwZXIgY2xhc3MuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90byBUaGUgcHJvdG90eXBlIG9mIHRoZSBvcmlnaW5hbCBldmVudC5cclxuICogQHJldHVybnMge0Z1bmN0aW9ufSBUaGUgZGVmaW5lZCB3cmFwcGVyIGNsYXNzLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gZGVmaW5lV3JhcHBlcihCYXNlRXZlbnQsIHByb3RvKSB7XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvdG8pO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VFdmVudFxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDdXN0b21FdmVudCAqL1xyXG4gICAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnRUYXJnZXQsIGV2ZW50KSB7XHJcbiAgICAgICAgQmFzZUV2ZW50LmNhbGwodGhpcywgZXZlbnRUYXJnZXQsIGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBDdXN0b21FdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VFdmVudC5wcm90b3R5cGUsIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogQ3VzdG9tRXZlbnQsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERlZmluZSBhY2Nlc3NvcnMuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICAgIGlmICghKGtleSBpbiBCYXNlRXZlbnQucHJvdG90eXBlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90bywga2V5KTtcclxuICAgICAgICAgICAgY29uc3QgaXNGdW5jID0gKHR5cGVvZiBkZXNjcmlwdG9yLnZhbHVlID09PSBcImZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXHJcbiAgICAgICAgICAgICAgICBDdXN0b21FdmVudC5wcm90b3R5cGUsXHJcbiAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICBpc0Z1bmMgPyBkZWZpbmVDYWxsRGVzY3JpcHRvcihrZXkpIDogZGVmaW5lUmVkaXJlY3REZXNjcmlwdG9yKGtleSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIEN1c3RvbUV2ZW50XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHdyYXBwZXIgY2xhc3Mgb2YgYSBnaXZlbiBwcm90b3R5cGUuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90byBUaGUgcHJvdG90eXBlIG9mIHRoZSBvcmlnaW5hbCBldmVudCB0byBnZXQgaXRzIHdyYXBwZXIuXHJcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gVGhlIHdyYXBwZXIgY2xhc3MuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRXcmFwcGVyKHByb3RvKSB7XHJcbiAgICBpZiAocHJvdG8gPT0gbnVsbCB8fCBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSkge1xyXG4gICAgICAgIHJldHVybiBFdmVudFdyYXBwZXJcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd3JhcHBlciA9IHdyYXBwZXJzLmdldChwcm90byk7XHJcbiAgICBpZiAod3JhcHBlciA9PSBudWxsKSB7XHJcbiAgICAgICAgd3JhcHBlciA9IGRlZmluZVdyYXBwZXIoZ2V0V3JhcHBlcihPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pKSwgcHJvdG8pO1xyXG4gICAgICAgIHdyYXBwZXJzLnNldChwcm90bywgd3JhcHBlcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd3JhcHBlclxyXG59XHJcblxyXG4vKipcclxuICogV3JhcCBhIGdpdmVuIGV2ZW50IHRvIG1hbmFnZW1lbnQgYSBkaXNwYXRjaGluZy5cclxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gZXZlbnRUYXJnZXQgVGhlIGV2ZW50IHRhcmdldCBvZiB0aGlzIGRpc3BhdGNoaW5nLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIGV2ZW50IHRvIHdyYXAuXHJcbiAqIEByZXR1cm5zIHtFdmVudFdyYXBwZXJ9IFRoZSB3cmFwcGVyIGluc3RhbmNlLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEV2ZW50KGV2ZW50VGFyZ2V0LCBldmVudCkge1xyXG4gICAgY29uc3QgV3JhcHBlciA9IGdldFdyYXBwZXIoT2JqZWN0LmdldFByb3RvdHlwZU9mKGV2ZW50KSk7XHJcbiAgICByZXR1cm4gbmV3IFdyYXBwZXIoZXZlbnRUYXJnZXQsIGV2ZW50KVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBzdG9wcGVkIGZsYWcgb2YgYSBnaXZlbiBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGdldC5cclxuICogQHJldHVybnMge2Jvb2xlYW59IFRoZSBmbGFnIHRvIHN0b3AgcHJvcGFnYXRpb24gaW1tZWRpYXRlbHkuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1N0b3BwZWQoZXZlbnQpIHtcclxuICAgIHJldHVybiBwZChldmVudCkuc3RvcHBlZFxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBjdXJyZW50IGV2ZW50IHBoYXNlIG9mIGEgZ2l2ZW4gZXZlbnQuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBzZXQgY3VycmVudCB0YXJnZXQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBldmVudFBoYXNlIE5ldyBldmVudCBwaGFzZS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRFdmVudFBoYXNlKGV2ZW50LCBldmVudFBoYXNlKSB7XHJcbiAgICBwZChldmVudCkuZXZlbnRQaGFzZSA9IGV2ZW50UGhhc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGN1cnJlbnQgdGFyZ2V0IG9mIGEgZ2l2ZW4gZXZlbnQuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBzZXQgY3VycmVudCB0YXJnZXQuXHJcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR8bnVsbH0gY3VycmVudFRhcmdldCBOZXcgY3VycmVudCB0YXJnZXQuXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q3VycmVudFRhcmdldChldmVudCwgY3VycmVudFRhcmdldCkge1xyXG4gICAgcGQoZXZlbnQpLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGEgcGFzc2l2ZSBsaXN0ZW5lciBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gc2V0IGN1cnJlbnQgdGFyZ2V0LlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufG51bGx9IHBhc3NpdmVMaXN0ZW5lciBOZXcgcGFzc2l2ZSBsaXN0ZW5lci5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRQYXNzaXZlTGlzdGVuZXIoZXZlbnQsIHBhc3NpdmVMaXN0ZW5lcikge1xyXG4gICAgcGQoZXZlbnQpLnBhc3NpdmVMaXN0ZW5lciA9IHBhc3NpdmVMaXN0ZW5lcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtvYmplY3R9IExpc3RlbmVyTm9kZVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBsaXN0ZW5lclxyXG4gKiBAcHJvcGVydHkgezF8MnwzfSBsaXN0ZW5lclR5cGVcclxuICogQHByb3BlcnR5IHtib29sZWFufSBwYXNzaXZlXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gb25jZVxyXG4gKiBAcHJvcGVydHkge0xpc3RlbmVyTm9kZXxudWxsfSBuZXh0XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEB0eXBlIHtXZWFrTWFwPG9iamVjdCwgTWFwPHN0cmluZywgTGlzdGVuZXJOb2RlPj59XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBsaXN0ZW5lcnNNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5cclxuLy8gTGlzdGVuZXIgdHlwZXNcclxuY29uc3QgQ0FQVFVSRSA9IDE7XHJcbmNvbnN0IEJVQkJMRSA9IDI7XHJcbmNvbnN0IEFUVFJJQlVURSA9IDM7XHJcblxyXG4vKipcclxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIHZhbHVlIGlzIGFuIG9iamVjdCBvciBub3QuXHJcbiAqIEBwYXJhbSB7YW55fSB4IFRoZSB2YWx1ZSB0byBjaGVjay5cclxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gaXNPYmplY3QoeCkge1xyXG4gICAgcmV0dXJuIHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09IFwib2JqZWN0XCIgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgbGlzdGVuZXJzLlxyXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBldmVudFRhcmdldCBUaGUgZXZlbnQgdGFyZ2V0IHRvIGdldC5cclxuICogQHJldHVybnMge01hcDxzdHJpbmcsIExpc3RlbmVyTm9kZT59IFRoZSBsaXN0ZW5lcnMuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRMaXN0ZW5lcnMoZXZlbnRUYXJnZXQpIHtcclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IGxpc3RlbmVyc01hcC5nZXQoZXZlbnRUYXJnZXQpO1xyXG4gICAgaWYgKGxpc3RlbmVycyA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIid0aGlzJyBpcyBleHBlY3RlZCBhbiBFdmVudFRhcmdldCBvYmplY3QsIGJ1dCBnb3QgYW5vdGhlciB2YWx1ZS5cIilcclxuICAgIH1cclxuICAgIHJldHVybiBsaXN0ZW5lcnNcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIGV2ZW50IGF0dHJpYnV0ZSBvZiBhIGdpdmVuIGV2ZW50LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGdldCBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxyXG4gKiBAcmV0dXJucyB7UHJvcGVydHlEZXNjcmlwdG9yfSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvci5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGRlZmluZUV2ZW50QXR0cmlidXRlRGVzY3JpcHRvcihldmVudE5hbWUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gbGlzdGVuZXJzLmdldChldmVudE5hbWUpO1xyXG4gICAgICAgICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5saXN0ZW5lclR5cGUgPT09IEFUVFJJQlVURSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmxpc3RlbmVyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc2V0KGxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09IFwiZnVuY3Rpb25cIiAmJiAhaXNPYmplY3QobGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lciA9IG51bGw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBnZXRMaXN0ZW5lcnModGhpcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBUcmF2ZXJzZSB0byB0aGUgdGFpbCB3aGlsZSByZW1vdmluZyBvbGQgdmFsdWUuXHJcbiAgICAgICAgICAgIGxldCBwcmV2ID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IG5vZGUgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmxpc3RlbmVyVHlwZSA9PT0gQVRUUklCVVRFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG9sZCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Lm5leHQgPSBub2RlLm5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubmV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbm9kZS5uZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoZXZlbnROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2ID0gbm9kZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgbmV3IHZhbHVlLlxyXG4gICAgICAgICAgICBpZiAobGlzdGVuZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld05vZGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJUeXBlOiBBVFRSSUJVVEUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc2l2ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb25jZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogbnVsbCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBuZXdOb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXYubmV4dCA9IG5ld05vZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRGVmaW5lIGFuIGV2ZW50IGF0dHJpYnV0ZSAoZS5nLiBgZXZlbnRUYXJnZXQub25jbGlja2ApLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnRUYXJnZXRQcm90b3R5cGUgVGhlIGV2ZW50IHRhcmdldCBwcm90b3R5cGUgdG8gZGVmaW5lIGFuIGV2ZW50IGF0dHJiaXRlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGRlZmluZS5cclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVFdmVudEF0dHJpYnV0ZShldmVudFRhcmdldFByb3RvdHlwZSwgZXZlbnROYW1lKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnRUYXJnZXRQcm90b3R5cGUsIGBvbiR7ZXZlbnROYW1lfWAsIGRlZmluZUV2ZW50QXR0cmlidXRlRGVzY3JpcHRvcihldmVudE5hbWUpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmluZSBhIGN1c3RvbSBFdmVudFRhcmdldCB3aXRoIGV2ZW50IGF0dHJpYnV0ZXMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGV2ZW50TmFtZXMgRXZlbnQgbmFtZXMgZm9yIGV2ZW50IGF0dHJpYnV0ZXMuXHJcbiAqIEByZXR1cm5zIHtFdmVudFRhcmdldH0gVGhlIGN1c3RvbSBFdmVudFRhcmdldC5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUV2ZW50VGFyZ2V0KGV2ZW50TmFtZXMpIHtcclxuICAgIC8qKiBDdXN0b21FdmVudFRhcmdldCAqL1xyXG4gICAgZnVuY3Rpb24gQ3VzdG9tRXZlbnRUYXJnZXQoKSB7XHJcbiAgICAgICAgRXZlbnRUYXJnZXRXcmFwcGVyLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgQ3VzdG9tRXZlbnRUYXJnZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudFRhcmdldFdyYXBwZXIucHJvdG90eXBlLCB7XHJcbiAgICAgICAgY29uc3RydWN0b3I6IHsgdmFsdWU6IEN1c3RvbUV2ZW50VGFyZ2V0LCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50TmFtZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBkZWZpbmVFdmVudEF0dHJpYnV0ZShDdXN0b21FdmVudFRhcmdldC5wcm90b3R5cGUsIGV2ZW50TmFtZXNbaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBDdXN0b21FdmVudFRhcmdldFxyXG59XHJcblxyXG4vKipcclxuICogRXZlbnRUYXJnZXRXcmFwcGVyLlxyXG4gKlxyXG4gKiAtIFRoaXMgaXMgY29uc3RydWN0b3IgaWYgbm8gYXJndW1lbnRzLlxyXG4gKiAtIFRoaXMgaXMgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgQ3VzdG9tRXZlbnRUYXJnZXQgY29uc3RydWN0b3IgaWYgdGhlcmUgYXJlIGFyZ3VtZW50cy5cclxuICpcclxuICogRm9yIGNzczpcclxuICpcclxuICogICAgIGNsYXNzIEEgZXh0ZW5kcyBFdmVudFRhcmdldFdyYXBwZXIge31cclxuICogICAgIGNsYXNzIEIgZXh0ZW5kcyBFdmVudFRhcmdldFdyYXBwZXIoXCJtZXNzYWdlXCIpIHt9XHJcbiAqICAgICBjbGFzcyBDIGV4dGVuZHMgRXZlbnRUYXJnZXRXcmFwcGVyKFwibWVzc2FnZVwiLCBcImVycm9yXCIpIHt9XHJcbiAqICAgICBjbGFzcyBEIGV4dGVuZHMgRXZlbnRUYXJnZXRXcmFwcGVyKFtcIm1lc3NhZ2VcIiwgXCJlcnJvclwiXSkge31cclxuICovXHJcbmZ1bmN0aW9uIEV2ZW50VGFyZ2V0V3JhcHBlcigpIHtcclxuICAgIC8qZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cclxuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgRXZlbnRUYXJnZXRXcmFwcGVyKSB7XHJcbiAgICAgICAgbGlzdGVuZXJzTWFwLnNldCh0aGlzLCBuZXcgTWFwKCkpO1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlZmluZUN1c3RvbUV2ZW50VGFyZ2V0KGFyZ3VtZW50c1swXSlcclxuICAgIH1cclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHR5cGVzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHR5cGVzW2ldID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGVmaW5lQ3VzdG9tRXZlbnRUYXJnZXQodHlwZXMpXHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpXHJcbiAgICAvKmVzbGludC1lbmFibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cclxufVxyXG5cclxuLy8gU2hvdWxkIGJlIGVudW1lcmFibGUsIGJ1dCBjbGFzcyBtZXRob2RzIGFyZSBub3QgZW51bWVyYWJsZS5cclxuRXZlbnRUYXJnZXRXcmFwcGVyLnByb3RvdHlwZSA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgZ2l2ZW4gbGlzdGVuZXIgdG8gdGhpcyBldmVudCB0YXJnZXQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGFkZC5cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBhZGQuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58e2NhcHR1cmU/OmJvb2xlYW4scGFzc2l2ZT86Ym9vbGVhbixvbmNlPzpib29sZWFufX0gW29wdGlvbnNdIFRoZSBvcHRpb25zIGZvciB0aGlzIGxpc3RlbmVyLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgbGlzdGVuZXIgd2FzIGFkZGVkIGFjdHVhbGx5LlxyXG4gICAgICovXHJcbiAgICBhZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiICYmICFpc09iamVjdChsaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIidsaXN0ZW5lcicgc2hvdWxkIGJlIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0LlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnNJc09iaiA9IGlzT2JqZWN0KG9wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0IGNhcHR1cmUgPSBvcHRpb25zSXNPYmogPyBCb29sZWFuKG9wdGlvbnMuY2FwdHVyZSkgOiBCb29sZWFuKG9wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVyVHlwZSA9IChjYXB0dXJlID8gQ0FQVFVSRSA6IEJVQkJMRSk7XHJcbiAgICAgICAgY29uc3QgbmV3Tm9kZSA9IHtcclxuICAgICAgICAgICAgbGlzdGVuZXIsXHJcbiAgICAgICAgICAgIGxpc3RlbmVyVHlwZSxcclxuICAgICAgICAgICAgcGFzc2l2ZTogb3B0aW9uc0lzT2JqICYmIEJvb2xlYW4ob3B0aW9ucy5wYXNzaXZlKSxcclxuICAgICAgICAgICAgb25jZTogb3B0aW9uc0lzT2JqICYmIEJvb2xlYW4ob3B0aW9ucy5vbmNlKSxcclxuICAgICAgICAgICAgbmV4dDogbnVsbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTZXQgaXQgYXMgdGhlIGZpcnN0IG5vZGUgaWYgdGhlIGZpcnN0IG5vZGUgaXMgbnVsbC5cclxuICAgICAgICBsZXQgbm9kZSA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcclxuICAgICAgICBpZiAobm9kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBuZXdOb2RlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyYXZlcnNlIHRvIHRoZSB0YWlsIHdoaWxlIGNoZWNraW5nIGR1cGxpY2F0aW9uLi5cclxuICAgICAgICBsZXQgcHJldiA9IG51bGw7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZS5saXN0ZW5lciA9PT0gbGlzdGVuZXIgJiYgbm9kZS5saXN0ZW5lclR5cGUgPT09IGxpc3RlbmVyVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2hvdWxkIGlnbm9yZSBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZXYgPSBub2RlO1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIGl0LlxyXG4gICAgICAgIHByZXYubmV4dCA9IG5ld05vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYSBnaXZlbiBsaXN0ZW5lciBmcm9tIHRoaXMgZXZlbnQgdGFyZ2V0LlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSB0byByZW1vdmUuXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gcmVtb3ZlLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufHtjYXB0dXJlPzpib29sZWFuLHBhc3NpdmU/OmJvb2xlYW4sb25jZT86Ym9vbGVhbn19IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBmb3IgdGhpcyBsaXN0ZW5lci5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkIGFjdHVhbGx5LlxyXG4gICAgICovXHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlzKTtcclxuICAgICAgICBjb25zdCBjYXB0dXJlID0gaXNPYmplY3Qob3B0aW9ucykgPyBCb29sZWFuKG9wdGlvbnMuY2FwdHVyZSkgOiBCb29sZWFuKG9wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVyVHlwZSA9IChjYXB0dXJlID8gQ0FQVFVSRSA6IEJVQkJMRSk7XHJcblxyXG4gICAgICAgIGxldCBwcmV2ID0gbnVsbDtcclxuICAgICAgICBsZXQgbm9kZSA9IGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKTtcclxuICAgICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmxpc3RlbmVyID09PSBsaXN0ZW5lciAmJiBub2RlLmxpc3RlbmVyVHlwZSA9PT0gbGlzdGVuZXJUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXYubmV4dCA9IG5vZGUubmV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubmV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zZXQoZXZlbnROYW1lLCBub2RlLm5leHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShldmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJldiA9IG5vZGU7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLm5leHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwYXRjaCBhIGdpdmVuIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIHtFdmVudHx7dHlwZTpzdHJpbmd9fSBldmVudCBUaGUgZXZlbnQgdG8gZGlzcGF0Y2guXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYGZhbHNlYCBpZiBjYW5jZWxlZC5cclxuICAgICAqL1xyXG4gICAgZGlzcGF0Y2hFdmVudChldmVudCkgeyAvL2VzbGludC1kaXNhYmxlLWxpbmUgY29tcGxleGl0eVxyXG4gICAgICAgIGlmIChldmVudCA9PSBudWxsIHx8IHR5cGVvZiBldmVudC50eXBlICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiZXZlbnQudHlwZVxcXCIgc2hvdWxkIGJlIGEgc3RyaW5nLlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgbGlzdGVuZXJzIGFyZW4ndCByZWdpc3RlcmVkLCB0ZXJtaW5hdGUuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGV2ZW50LnR5cGU7XHJcbiAgICAgICAgbGV0IG5vZGUgPSBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSk7XHJcbiAgICAgICAgaWYgKG5vZGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2luY2Ugd2UgY2Fubm90IHJld3JpdGUgc2V2ZXJhbCBwcm9wZXJ0aWVzLCBzbyB3cmFwIG9iamVjdC5cclxuICAgICAgICBjb25zdCB3cmFwcGVkRXZlbnQgPSB3cmFwRXZlbnQodGhpcywgZXZlbnQpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGRvZXNuJ3QgcHJvY2VzcyBjYXB0dXJpbmcgcGhhc2UgYW5kIGJ1YmJsaW5nIHBoYXNlLlxyXG4gICAgICAgIC8vIFRoaXMgaXNuJ3QgcGFydGljaXBhdGluZyBpbiBhIHRyZWUuXHJcbiAgICAgICAgbGV0IHByZXYgPSBudWxsO1xyXG4gICAgICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoaXMgbGlzdGVuZXIgaWYgaXQncyBvbmNlXHJcbiAgICAgICAgICAgIGlmIChub2RlLm9uY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldi5uZXh0ID0gbm9kZS5uZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5uZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNldChldmVudE5hbWUsIG5vZGUubmV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2ID0gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2FsbCB0aGlzIGxpc3RlbmVyXHJcbiAgICAgICAgICAgIHNldFBhc3NpdmVMaXN0ZW5lcih3cmFwcGVkRXZlbnQsIChub2RlLnBhc3NpdmUgPyBub2RlLmxpc3RlbmVyIDogbnVsbCkpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vZGUubGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmxpc3RlbmVyLmNhbGwodGhpcywgd3JhcHBlZEV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKmVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8qZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5saXN0ZW5lclR5cGUgIT09IEFUVFJJQlVURSAmJiB0eXBlb2Ygbm9kZS5saXN0ZW5lci5oYW5kbGVFdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmxpc3RlbmVyLmhhbmRsZUV2ZW50KHdyYXBwZWRFdmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEJyZWFrIGlmIGBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25gIHdhcyBjYWxsZWQuXHJcbiAgICAgICAgICAgIGlmIChpc1N0b3BwZWQod3JhcHBlZEV2ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUubmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0UGFzc2l2ZUxpc3RlbmVyKHdyYXBwZWRFdmVudCwgbnVsbCk7XHJcbiAgICAgICAgc2V0RXZlbnRQaGFzZSh3cmFwcGVkRXZlbnQsIDApO1xyXG4gICAgICAgIHNldEN1cnJlbnRUYXJnZXQod3JhcHBlZEV2ZW50LCBudWxsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICF3cmFwcGVkRXZlbnQuZGVmYXVsdFByZXZlbnRlZFxyXG4gICAgfSxcclxufTtcclxuXHJcbi8vIGBjb25zdHJ1Y3RvcmAgaXMgbm90IGVudW1lcmFibGUuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudFRhcmdldFdyYXBwZXIucHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIHsgdmFsdWU6IEV2ZW50VGFyZ2V0V3JhcHBlciwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcclxuXHJcbi8vIEVuc3VyZSBgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnRUYXJnZXRgIGlzIGB0cnVlYC5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5FdmVudFRhcmdldCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEV2ZW50VGFyZ2V0V3JhcHBlci5wcm90b3R5cGUsIHdpbmRvdy5FdmVudFRhcmdldC5wcm90b3R5cGUpO1xyXG59XHJcblxuXHJcbnZhciBfX3NwcmVhZEFycmF5cyA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheXMpIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG4vLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBCcm93c2VySW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJyb3dzZXJJbmZvKG5hbWUsIHZlcnNpb24sIG9zKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgICAgIHRoaXMub3MgPSBvcztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gQnJvd3NlckluZm87XHJcbn0oKSk7XHJcblxyXG52YXIgTm9kZUluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBOb2RlSW5mbyh2ZXJzaW9uKSB7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnbm9kZSc7XHJcbiAgICAgICAgdGhpcy5vcyA9IHByb2Nlc3MucGxhdGZvcm07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5vZGVJbmZvO1xyXG59KCkpO1xyXG5cclxudmFyIEJvdEluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCb3RJbmZvKCkge1xyXG4gICAgICAgIHRoaXMuYm90ID0gdHJ1ZTsgLy8gTk9URTogZGVwcmVjYXRlZCB0ZXN0IG5hbWUgaW5zdGVhZFxyXG4gICAgICAgIHRoaXMubmFtZSA9ICdib3QnO1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIEJvdEluZm87XHJcbn0oKSk7XHJcblxyXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXHJcbnZhciBTRUFSQ0hCT1hfVUFfUkVHRVggPSAvYWxleGF8Ym90fGNyYXdsKGVyfGluZyl8ZmFjZWJvb2tleHRlcm5hbGhpdHxmZWVkYnVybmVyfGdvb2dsZSB3ZWIgcHJldmlld3xuYWdpb3N8cG9zdHJhbmt8cGluZ2RvbXxzbHVycHxzcGlkZXJ8eWFob28hfHlhbmRleC87XHJcbnZhciBTRUFSQ0hCT1RfT1NfUkVHRVggPSAvKG51aGspfChHb29nbGVib3QpfChZYW1teWJvdCl8KE9wZW5ib3QpfChTbHVycCl8KE1TTkJvdCl8KEFzayBKZWV2ZXNcXC9UZW9tYSl8KGlhX2FyY2hpdmVyKS87XHJcbnZhciBSRVFVSVJFRF9WRVJTSU9OX1BBUlRTID0gMztcclxudmFyIHVzZXJBZ2VudFJ1bGVzID0gW1xyXG4gICAgWydhb2wnLCAvQU9MU2hpZWxkXFwvKFswLTlcXC5fXSspL10sXHJcbiAgICBbJ2VkZ2UnLCAvRWRnZVxcLyhbMC05XFwuX10rKS9dLFxyXG4gICAgWydlZGdlLWlvcycsIC9FZGdpT1NcXC8oWzAtOVxcLl9dKykvXSxcclxuICAgIFsneWFuZGV4YnJvd3NlcicsIC9ZYUJyb3dzZXJcXC8oWzAtOVxcLl9dKykvXSxcclxuICAgIFsndml2YWxkaScsIC9WaXZhbGRpXFwvKFswLTlcXC5dKykvXSxcclxuICAgIFsna2FrYW90YWxrJywgL0tBS0FPVEFMS1xccyhbMC05XFwuXSspL10sXHJcbiAgICBbJ3NhbXN1bmcnLCAvU2Ftc3VuZ0Jyb3dzZXJcXC8oWzAtOVxcLl0rKS9dLFxyXG4gICAgWydzaWxrJywgL1xcYlNpbGtcXC8oWzAtOS5fLV0rKVxcYi9dLFxyXG4gICAgWydtaXVpJywgL01pdWlCcm93c2VyXFwvKFswLTlcXC5dKykkL10sXHJcbiAgICBbJ2JlYWtlcicsIC9CZWFrZXJCcm93c2VyXFwvKFswLTlcXC5dKykvXSxcclxuICAgIFsnZWRnZS1jaHJvbWl1bScsIC9FZGdcXC8oWzAtOVxcLl0rKS9dLFxyXG4gICAgW1xyXG4gICAgICAgICdjaHJvbWl1bS13ZWJ2aWV3JyxcclxuICAgICAgICAvKD8hQ2hyb20uKk9QUil3dlxcKS4qQ2hyb20oPzplfGl1bSlcXC8oWzAtOVxcLl0rKSg6P1xcc3wkKS8sXHJcbiAgICBdLFxyXG4gICAgWydjaHJvbWUnLCAvKD8hQ2hyb20uKk9QUilDaHJvbSg/OmV8aXVtKVxcLyhbMC05XFwuXSspKDo/XFxzfCQpL10sXHJcbiAgICBbJ3BoYW50b21qcycsIC9QaGFudG9tSlNcXC8oWzAtOVxcLl0rKSg6P1xcc3wkKS9dLFxyXG4gICAgWydjcmlvcycsIC9DcmlPU1xcLyhbMC05XFwuXSspKDo/XFxzfCQpL10sXHJcbiAgICBbJ2ZpcmVmb3gnLCAvRmlyZWZveFxcLyhbMC05XFwuXSspKD86XFxzfCQpL10sXHJcbiAgICBbJ2Z4aW9zJywgL0Z4aU9TXFwvKFswLTlcXC5dKykvXSxcclxuICAgIFsnb3BlcmEtbWluaScsIC9PcGVyYSBNaW5pLipWZXJzaW9uXFwvKFswLTlcXC5dKykvXSxcclxuICAgIFsnb3BlcmEnLCAvT3BlcmFcXC8oWzAtOVxcLl0rKSg/Olxcc3wkKS9dLFxyXG4gICAgWydvcGVyYScsIC9PUFJcXC8oWzAtOVxcLl0rKSg6P1xcc3wkKS9dLFxyXG4gICAgWydpZScsIC9UcmlkZW50XFwvN1xcLjAuKnJ2XFw6KFswLTlcXC5dKykuKlxcKS4qR2Vja28kL10sXHJcbiAgICBbJ2llJywgL01TSUVcXHMoWzAtOVxcLl0rKTsuKlRyaWRlbnRcXC9bNC03XS4wL10sXHJcbiAgICBbJ2llJywgL01TSUVcXHMoN1xcLjApL10sXHJcbiAgICBbJ2JiMTAnLCAvQkIxMDtcXHNUb3VjaC4qVmVyc2lvblxcLyhbMC05XFwuXSspL10sXHJcbiAgICBbJ2FuZHJvaWQnLCAvQW5kcm9pZFxccyhbMC05XFwuXSspL10sXHJcbiAgICBbJ2lvcycsIC9WZXJzaW9uXFwvKFswLTlcXC5fXSspLipNb2JpbGUuKlNhZmFyaS4qL10sXHJcbiAgICBbJ3NhZmFyaScsIC9WZXJzaW9uXFwvKFswLTlcXC5fXSspLipTYWZhcmkvXSxcclxuICAgIFsnZmFjZWJvb2snLCAvRkJBVlxcLyhbMC05XFwuXSspL10sXHJcbiAgICBbJ2luc3RhZ3JhbScsIC9JbnN0YWdyYW1cXHMoWzAtOVxcLl0rKS9dLFxyXG4gICAgWydpb3Mtd2VidmlldycsIC9BcHBsZVdlYktpdFxcLyhbMC05XFwuXSspLipNb2JpbGUvXSxcclxuICAgIFsnaW9zLXdlYnZpZXcnLCAvQXBwbGVXZWJLaXRcXC8oWzAtOVxcLl0rKS4qR2Vja29cXCkkL10sXHJcbiAgICBbJ3NlYXJjaGJvdCcsIFNFQVJDSEJPWF9VQV9SRUdFWF0sXHJcbl07XHJcbnZhciBvcGVyYXRpbmdTeXN0ZW1SdWxlcyA9IFtcclxuICAgIFsnaU9TJywgL2lQKGhvbmV8b2R8YWQpL10sXHJcbiAgICBbJ0FuZHJvaWQgT1MnLCAvQW5kcm9pZC9dLFxyXG4gICAgWydCbGFja0JlcnJ5IE9TJywgL0JsYWNrQmVycnl8QkIxMC9dLFxyXG4gICAgWydXaW5kb3dzIE1vYmlsZScsIC9JRU1vYmlsZS9dLFxyXG4gICAgWydBbWF6b24gT1MnLCAvS2luZGxlL10sXHJcbiAgICBbJ1dpbmRvd3MgMy4xMScsIC9XaW4xNi9dLFxyXG4gICAgWydXaW5kb3dzIDk1JywgLyhXaW5kb3dzIDk1KXwoV2luOTUpfChXaW5kb3dzXzk1KS9dLFxyXG4gICAgWydXaW5kb3dzIDk4JywgLyhXaW5kb3dzIDk4KXwoV2luOTgpL10sXHJcbiAgICBbJ1dpbmRvd3MgMjAwMCcsIC8oV2luZG93cyBOVCA1LjApfChXaW5kb3dzIDIwMDApL10sXHJcbiAgICBbJ1dpbmRvd3MgWFAnLCAvKFdpbmRvd3MgTlQgNS4xKXwoV2luZG93cyBYUCkvXSxcclxuICAgIFsnV2luZG93cyBTZXJ2ZXIgMjAwMycsIC8oV2luZG93cyBOVCA1LjIpL10sXHJcbiAgICBbJ1dpbmRvd3MgVmlzdGEnLCAvKFdpbmRvd3MgTlQgNi4wKS9dLFxyXG4gICAgWydXaW5kb3dzIDcnLCAvKFdpbmRvd3MgTlQgNi4xKS9dLFxyXG4gICAgWydXaW5kb3dzIDgnLCAvKFdpbmRvd3MgTlQgNi4yKS9dLFxyXG4gICAgWydXaW5kb3dzIDguMScsIC8oV2luZG93cyBOVCA2LjMpL10sXHJcbiAgICBbJ1dpbmRvd3MgMTAnLCAvKFdpbmRvd3MgTlQgMTAuMCkvXSxcclxuICAgIFsnV2luZG93cyBNRScsIC9XaW5kb3dzIE1FL10sXHJcbiAgICBbJ09wZW4gQlNEJywgL09wZW5CU0QvXSxcclxuICAgIFsnU3VuIE9TJywgL1N1bk9TL10sXHJcbiAgICBbJ0Nocm9tZSBPUycsIC9Dck9TL10sXHJcbiAgICBbJ0xpbnV4JywgLyhMaW51eCl8KFgxMSkvXSxcclxuICAgIFsnTWFjIE9TJywgLyhNYWNfUG93ZXJQQyl8KE1hY2ludG9zaCkvXSxcclxuICAgIFsnUU5YJywgL1FOWC9dLFxyXG4gICAgWydCZU9TJywgL0JlT1MvXSxcclxuICAgIFsnT1MvMicsIC9PU1xcLzIvXSxcclxuICAgIFsnU2VhcmNoIEJvdCcsIFNFQVJDSEJPVF9PU19SRUdFWF0sXHJcbl07XHJcblxyXG5mdW5jdGlvbiBkZXRlY3QodXNlckFnZW50KSB7XHJcbiAgICBpZiAoISF1c2VyQWdlbnQpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VVc2VyQWdlbnQodXNlckFnZW50KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBwYXJzZVVzZXJBZ2VudChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiBnZXROb2RlVmVyc2lvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVVzZXJBZ2VudCh1YSkge1xyXG4gICAgLy8gb3B0ZWQgZm9yIHVzaW5nIHJlZHVjZSBoZXJlIHJhdGhlciB0aGFuIEFycmF5I2ZpcnN0IHdpdGggYSByZWdleC50ZXN0IGNhbGxcclxuICAgIC8vIHRoaXMgaXMgcHJpbWFyaWx5IGJlY2F1c2UgdXNpbmcgdGhlIHJlZHVjZSB3ZSBvbmx5IHBlcmZvcm0gdGhlIHJlZ2V4XHJcbiAgICAvLyBleGVjdXRpb24gb25jZSByYXRoZXIgdGhhbiBvbmNlIGZvciB0aGUgdGVzdCBhbmQgZm9yIHRoZSBleGVjIGFnYWluIGJlbG93XHJcbiAgICAvLyBwcm9iYWJseSBzb21ldGhpbmcgdGhhdCBuZWVkcyB0byBiZSBiZW5jaG1hcmtlZCB0aG91Z2hcclxuICAgIHZhciBtYXRjaGVkUnVsZSA9IHVhICE9PSAnJyAmJlxyXG4gICAgICAgIHVzZXJBZ2VudFJ1bGVzLnJlZHVjZShmdW5jdGlvbiAobWF0Y2hlZCwgX2EpIHtcclxuICAgICAgICAgICAgdmFyIGJyb3dzZXIgPSBfYVswXSwgcmVnZXggPSBfYVsxXTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB1YU1hdGNoID0gcmVnZXguZXhlYyh1YSk7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXVhTWF0Y2ggJiYgW2Jyb3dzZXIsIHVhTWF0Y2hdO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgIGlmICghbWF0Y2hlZFJ1bGUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHZhciBuYW1lID0gbWF0Y2hlZFJ1bGVbMF0sIG1hdGNoID0gbWF0Y2hlZFJ1bGVbMV07XHJcbiAgICBpZiAobmFtZSA9PT0gJ3NlYXJjaGJvdCcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJvdEluZm8oKTtcclxuICAgIH1cclxuICAgIHZhciB2ZXJzaW9uUGFydHMgPSBtYXRjaFsxXSAmJiBtYXRjaFsxXS5zcGxpdCgvWy5fXS8pLnNsaWNlKDAsIDMpO1xyXG4gICAgaWYgKHZlcnNpb25QYXJ0cykge1xyXG4gICAgICAgIGlmICh2ZXJzaW9uUGFydHMubGVuZ3RoIDwgUkVRVUlSRURfVkVSU0lPTl9QQVJUUykge1xyXG4gICAgICAgICAgICB2ZXJzaW9uUGFydHMgPSBfX3NwcmVhZEFycmF5cyh2ZXJzaW9uUGFydHMsIGNyZWF0ZVZlcnNpb25QYXJ0cyhSRVFVSVJFRF9WRVJTSU9OX1BBUlRTIC0gdmVyc2lvblBhcnRzLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmVyc2lvblBhcnRzID0gW107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEJyb3dzZXJJbmZvKG5hbWUsIHZlcnNpb25QYXJ0cy5qb2luKCcuJyksIGRldGVjdE9TKHVhKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRldGVjdE9TKHVhKSB7XHJcbiAgICBmb3IgKHZhciBpaSA9IDAsIGNvdW50ID0gb3BlcmF0aW5nU3lzdGVtUnVsZXMubGVuZ3RoOyBpaSA8IGNvdW50OyBpaSsrKSB7XHJcbiAgICAgICAgdmFyIF9hID0gb3BlcmF0aW5nU3lzdGVtUnVsZXNbaWldLCBvcyA9IF9hWzBdLCByZWdleCA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHJlZ2V4LnRlc3QodWEpO1xyXG4gICAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5vZGVWZXJzaW9uKCkge1xyXG4gICAgdmFyIGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLnZlcnNpb247XHJcbiAgICByZXR1cm4gaXNOb2RlID8gbmV3IE5vZGVJbmZvKHByb2Nlc3MudmVyc2lvbi5zbGljZSgxKSkgOiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVWZXJzaW9uUGFydHMoY291bnQpIHtcclxuICAgIHZhciBvdXRwdXQgPSBbXTtcclxuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBjb3VudDsgaWkrKykge1xyXG4gICAgICAgIG91dHB1dC5wdXNoKCcwJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxuXHJcbmNvbnN0IGJyb3dzZXIgPSBkZXRlY3QoKTtcclxuY29uc3QgQXVkaW9Db250ZXh0ID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IHx8IGZhbHNlO1xyXG5jb25zdCBCVUZGRVJfU0laRSA9IDQwOTY7XHJcblxyXG4vKipcclxuICogT3B1c01lZGlhUmVjb3JkZXIuanMgc3RhcnRcclxuICogUmVmZXJlbmNlOiBodHRwczovL3czYy5naXRodWIuaW8vbWVkaWFjYXB0dXJlLXJlY29yZC8jbWVkaWFyZWNvcmRlci1hcGlcclxuICogQGV4dGVuZHMgRXZlbnRUYXJnZXRcclxuICovXHJcbmNsYXNzIE9nZ09wdXNNZWRpYVJlY29yZGVyIGV4dGVuZHMgRXZlbnRUYXJnZXRXcmFwcGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGVuY29kZXIgd2ViIHdvcmtlclxyXG4gICAgICogQG5hbWUgd29ya2VyRmFjdG9yeVxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcmV0dXJucyB7d29ya2VyfSBBbiBpbnN0YW5jZSBvZiAuL2VuY29kZXJXb3JrZXIuanMgd2ViIHdvcmtlci5cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7TWVkaWFTdHJlYW19IHN0cmVhbSAtIFRoZSBNZWRpYVN0cmVhbSB0byBiZSByZWNvcmRlZC4gVGhpcyB3aWxsXHJcbiAgICAgKiAgICAgICAgICBiZSB0aGUgdmFsdWUgb2YgdGhlIHN0cmVhbSBhdHRyaWJ1dGUuXHJcbiAgICAgKiBAcGFyYW0ge29wdGlvbnN9IFtvcHRpb25zXSAtIEEgZGljdGlvbmFyeSBvZiBvcHRpb25zIHRvIGZvclxyXG4gICAgICogICAgICAgICAgdGhlIFVBIGluc3RydWN0aW5nIGhvdyB0aGUgcmVjb3JkaW5nIHdpbGwgdGFrZSBwYXJ0LlxyXG4gICAgICogICAgICAgICAgb3B0aW9ucy5taW1lVHlwZSwgaWYgcHJlc2VudCwgd2lsbCBiZWNvbWUgdGhlIHZhbHVlIG9mIG1pbWVUeXBlXHJcbiAgICAgKiAgICAgICAgICBhdHRyaWJ1dGUuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3dvcmtlck9wdGlvbnNdIFRoaXMgaXMgYSBOT04tU1RBTkRBUkQgb3B0aW9ucyB0b1xyXG4gICAgICogICAgICAgICAgY29uZmlndXJlIGhvdyB0byBpbXBvcnQgdGhlIHdlYiB3b3JrZXIgLndhc20gY29tcGlsZWQgYmluYXJpZXNcclxuICAgICAqICAgICAgICAgIHVzZWQgZm9yIGVuY29kaW5nLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtkdXJhdGlvbl0gc2V0IGZpbGUgcmVjb3JkZXIgdGltZVxyXG4gICAgICogQHBhcmFtIHt3b3JrZXJGYWN0b3J5fSBbd29ya2VyT3B0aW9ucy5lbmNvZGVyV29ya2VyRmFjdG9yeV0gQSBmYWN0b3J5XHJcbiAgICAgKiAgICAgICAgICBmdW5jdGlvbiB0aGF0IGNyZWF0ZSBhIHdlYiB3b3JrZXIgaW5zdGFuY2Ugb2YgLi9lbmNvZGVyV29ya2VyLmpzXHJcbiAgICAgKiAgICAgICAgICBhbmQgcmV0dXJucyBpdC4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFdvcmtlcignLi9lbmNvZGVyV29ya2VyLnVtZC5qcycpfVxyXG4gICAgICogICAgICAgICAgaXMgdXNlZCBieSBkZWZhdWx0LiBUaGlzIGlzIE5PTi1TVEFOREFSRC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbd29ya2VyT3B0aW9ucy5PZ2dPcHVzRW5jb2Rlcldhc21QYXRoXVxyXG4gICAgICogICAgICAgICAgUGF0aCBvZiAuL09nZ09wdXNFbmNvZGVyLndhc20gd2hpY2ggaXMgdXNlZCBmb3IgT0dHIE9wdXMgZW5jb2RpbmdcclxuICAgICAqICAgICAgICAgIGJ5IHRoZSBlbmNvZGVyIHdvcmtlci4gVGhpcyBpcyBOT04tU1RBTkRBUkQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3dvcmtlck9wdGlvbnMuV2ViTU9wdXNFbmNvZGVyV2FzbVBhdGhdXHJcbiAgICAgKiAgICAgICAgICBQYXRoIG9mIC4vV2ViTU9wdXNFbmNvZGVyLndhc20gd2hpY2ggaXMgdXNlZCBmb3IgV2ViTSBPcHVzIGVuY29kaW5nXHJcbiAgICAgKiAgICAgICAgICBieSB0aGUgZW5jb2RlciB3b3JrZXIuIFRoaXMgaXMgTk9OLVNUQU5EQVJELlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdHJlYW0sIG9wdGlvbnMgPSB7fSwgd29ya2VyT3B0aW9ucyA9IHt9LCBkdXJhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHttaW1lVHlwZSwgYXVkaW9CaXRzUGVyU2Vjb25kLCB2aWRlb0JpdHNQZXJTZWNvbmQsIGJpdHNQZXJTZWNvbmR9ID0gb3B0aW9uczsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgICAgIC8vIE5PTi1TVEFOREFSRCBvcHRpb25zXHJcbiAgICAgICAgY29uc3Qge2VuY29kZXJXb3JrZXJGYWN0b3J5LCBPZ2dPcHVzRW5jb2Rlcldhc21QYXRoLCBXZWJNT3B1c0VuY29kZXJXYXNtUGF0aH0gPSB3b3JrZXJPcHRpb25zO1xyXG5cclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8vIEF0dHJpYnV0ZXMgZm9yIHRoZSBzcGVjaWZpY2F0aW9uIGNvbmZvcm1hbmNlLiBUaGVzZSBoYXZlIHRoZWlyIG93biBnZXR0ZXJzLlxyXG4gICAgICAgIHRoaXMuX3N0cmVhbSA9IHN0cmVhbTtcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9ICdpbmFjdGl2ZSc7XHJcbiAgICAgICAgdGhpcy5fbWltZVR5cGUgPSBtaW1lVHlwZSB8fCAnYXVkaW8vb2dnJztcclxuICAgICAgICB0aGlzLl9hdWRpb0JpdHNQZXJTZWNvbmQgPSBhdWRpb0JpdHNQZXJTZWNvbmQgfHwgYml0c1BlclNlY29uZDtcclxuICAgICAgICAvKiogQHR5cGUgeydpbmFjdGl2ZSd8J3JlYWR5VG9Jbml0J3wnZW5jb2RpbmcnfCdjbG9zZWQnfSAqL1xyXG4gICAgICAgIHRoaXMud29ya2VyU3RhdGUgPSAnaW5hY3RpdmUnO1xyXG4gICAgICAgIHRoaXMucmVjb3JkaW5nRHVyYXRpb24gPSBkdXJhdGlvbiB8fCAzMDAwMDsgICAvLyBBdXRvLXN0b3AgcmVjb3JkaW5nIGFmdGVyIHNwZWNpZmljIGludGVydmFsIHVzaW5nIHNldFJlY29yZGluZ0R1cmF0aW9uXHJcblxyXG4gICAgICAgIC8vIFBhcnNlIE1JTUUgVHlwZVxyXG4gICAgICAgIGlmICghT2dnT3B1c01lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKHRoaXMuX21pbWVUeXBlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGFyZ3VtZW50cywgYSBNSU1FIFR5cGUgaXMgbm90IHN1cHBvcnRlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKE9nZ09wdXNNZWRpYVJlY29yZGVyLl9wYXJzZVR5cGUodGhpcy5fbWltZVR5cGUpLnN1YnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnd2F2ZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3dhdic6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW1lVHlwZSA9ICdhdWRpby93YXZlJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnd2VibSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW1lVHlwZSA9ICdhdWRpby93ZWJtJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnb2dnJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX21pbWVUeXBlID0gJ2F1ZGlvL29nZyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYSB0eXBlIGRlcGVuZGluZyBvbiBPUy5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYnJvd3NlciAmJiBicm93c2VyLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjaHJvbWUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW1lVHlwZSA9ICdhdWRpby93ZWJtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcmVmb3gnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW1lVHlwZSA9ICdhdWRpby9vZ2cnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZWRnZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21pbWVUeXBlID0gJ2F1ZGlvL3dlYm0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW9zJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzYWZhcmknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW1lVHlwZSA9ICdhdWRpby93YXZlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21pbWVUeXBlID0gJ2F1ZGlvL3dlYm0nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuX21pbWVUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2F1ZGlvL3dhdmUnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2FzbVBhdGggPSAnJzsgLy8gd2FzbSBpcyBub3QgdXNlZFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdhdWRpby93ZWJtJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dhc21QYXRoID0gV2ViTU9wdXNFbmNvZGVyV2FzbVBhdGggfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2F1ZGlvL29nZyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93YXNtUGF0aCA9IE9nZ09wdXNFbmNvZGVyV2FzbVBhdGggfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVybmFsIEVycm9yOiBVbmV4cGVjdGVkIE1JTUUgVHlwZTogJHt0aGlzLl9taW1lVHlwZX1gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBjdXJyZW50IGRpcmVjdG9yeSBmb3Igd29ya2VyXHJcbiAgICAgICAgbGV0IHdvcmtlckRpciA9ICcnO1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KSB7XHJcbiAgICAgICAgICAgIHdvcmtlckRpciA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5sb2NhdGlvbikge1xyXG4gICAgICAgICAgICB3b3JrZXJEaXIgPSBzZWxmLmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdvcmtlckRpciA9IHdvcmtlckRpci5zdWJzdHIoMCwgd29ya2VyRGlyLmxhc3RJbmRleE9mKCcvJykpICsgJy9zcmMvZW5jb2Rlcldvcmtlci5qcyc7XHJcbiAgICAgICAgLy8gSWYgd29ya2VyIGZ1bmN0aW9uIGlzIGltcG9ydGVkIHZpYSA8c2NyaXB0PiB0YWcsIG1ha2UgaXQgYmxvYiB0byBnZXQgVVJMLlxyXG4gICAgICAgIGlmICh0eXBlb2YgT2dnT3B1c01lZGlhUmVjb3JkZXIuZW5jb2RlcldvcmtlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB3b3JrZXJEaXIgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtgKCR7T2dnT3B1c01lZGlhUmVjb3JkZXIuZW5jb2Rlcldvcmtlcn0pKClgXSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3Bhd24gYSBlbmNvZGVyIHdvcmtlclxyXG4gICAgICAgIHRoaXMuX3dvcmtlckZhY3RvcnkgPSB0eXBlb2YgZW5jb2RlcldvcmtlckZhY3RvcnkgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgPyBlbmNvZGVyV29ya2VyRmFjdG9yeVxyXG4gICAgICAgICAgICA6IF8gPT4gbmV3IFdvcmtlcih3b3JrZXJEaXIpO1xyXG4gICAgICAgIHRoaXMuX3NwYXduV29ya2VyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgTWVkaWFTdHJlYW0gW0dFVFVTRVJNRURJQV0gdG8gYmUgcmVjb3JkZWQuXHJcbiAgICAgKiBAcmV0dXJuIHtNZWRpYVN0cmVhbX1cclxuICAgICAqL1xyXG4gICAgZ2V0IHN0cmVhbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RyZWFtO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIE1JTUUgdHlwZSBbUkZDMjA0Nl0gdGhhdCBoYXMgYmVlbiBzZWxlY3RlZCBhcyB0aGUgY29udGFpbmVyIGZvclxyXG4gICAgICogcmVjb3JkaW5nLiBUaGlzIGVudHJ5IGluY2x1ZGVzIGFsbCB0aGUgcGFyYW1ldGVycyB0byB0aGUgYmFzZVxyXG4gICAgICogbWltZVR5cGUuIFRoZSBVQSBzaG91bGQgYmUgYWJsZSB0byBwbGF5IGJhY2sgYW55IG9mIHRoZSBNSU1FIHR5cGVzXHJcbiAgICAgKiBpdCBzdXBwb3J0cyBmb3IgcmVjb3JkaW5nLiBGb3IgY3NzLCBpdCBzaG91bGQgYmUgYWJsZSB0byBkaXNwbGF5XHJcbiAgICAgKiBhIHZpZGVvIHJlY29yZGluZyBpbiB0aGUgSFRNTCA8dmlkZW8+IHRhZy4gVGhlIGRlZmF1bHQgdmFsdWUgZm9yXHJcbiAgICAgKiB0aGlzIHByb3BlcnR5IGlzIHBsYXRmb3JtLXNwZWNpZmljLlxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBnZXQgbWltZVR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21pbWVUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIE9wdXNNZWRpYVJlY29yZGVyIG9iamVjdC4gV2hlbiB0aGUgT3B1c01lZGlhUmVjb3JkZXJcclxuICAgICAqIGlzIGNyZWF0ZWQsIHRoZSBVQSBNVVNUIHNldCB0aGlzIGF0dHJpYnV0ZSB0byBpbmFjdGl2ZS5cclxuICAgICAqIEByZXR1cm4ge1wiaW5hY3RpdmVcInxcInJlY29yZGluZ1wifFwicGF1c2VkXCJ9XHJcbiAgICAgKi9cclxuICAgIGdldCBzdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdmFsdWUgb2YgdGhlIFZpZGVvIGVuY29kaW5nLiBVbnN1cHBvcnRlZC5cclxuICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAqL1xyXG4gICAgZ2V0IHZpZGVvQml0c1BlclNlY29uZCgpIHtcclxuICAgICAgICAvLyBWaWRlbyBlbmNvZGluZyBpcyBub3Qgc3VwcG9ydGVkXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB2YWx1ZSBvZiB0aGUgQXVkaW8gZW5jb2RpbmcgdGFyZ2V0IGJpdCByYXRlIHRoYXQgd2FzIHBhc3NlZCB0b1xyXG4gICAgICogdGhlIFBsYXRmb3JtIChwb3RlbnRpYWxseSB0cnVuY2F0ZWQsIHJvdW5kZWQsIGV0YyksIG9yIHRoZSBjYWxjdWxhdGVkIG9uZVxyXG4gICAgICogaWYgdGhlIHVzZXIgaGFzIHNwZWNpZmllZCBiaXRzUGVyU2Vjb25kLlxyXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH1cclxuICAgICAqL1xyXG4gICAgZ2V0IGF1ZGlvQml0c1BlclNlY29uZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXVkaW9CaXRzUGVyU2Vjb25kO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSB3b3JrZXJcclxuICAgICAqL1xyXG4gICAgX3NwYXduV29ya2VyKCkge1xyXG4gICAgICAgIHRoaXMud29ya2VyID0gdGhpcy5fd29ya2VyRmFjdG9yeSgpO1xyXG4gICAgICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IChlKSA9PiB0aGlzLl9vbm1lc3NhZ2VGcm9tV29ya2VyKGUpO1xyXG4gICAgICAgIHRoaXMud29ya2VyLm9uZXJyb3IgPSAoZSkgPT4gdGhpcy5fb25lcnJvckZyb21Xb3JrZXIoZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3Bvc3RNZXNzYWdlVG9Xb3JrZXIoJ2xvYWRFbmNvZGVyJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWltZVR5cGU6IHRoaXMuX21pbWVUeXBlLFxyXG4gICAgICAgICAgICAgICAgd2FzbVBhdGg6IHRoaXMuX3dhc21QYXRoXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUG9zdCBtZXNzYWdlIHRvIHRoZSBlbmNvZGVyIHdlYiB3b3JrZXIuXHJcbiAgICAgKiBAcGFyYW0ge1wiaW5pdFwifFwicHVzaElucHV0RGF0YVwifFwiZ2V0RW5jb2RlZERhdGFcInxcImRvbmVcIn0gY29tbWFuZCAtIFR5cGUgb2YgbWVzc2FnZSB0byBzZW5kIHRvIHRoZSB3b3JrZXJcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZXNzYWdlIC0gUGF5bG9hZCB0byB0aGUgd29ya2VyXHJcbiAgICAgKi9cclxuICAgIF9wb3N0TWVzc2FnZVRvV29ya2VyKGNvbW1hbmQsIG1lc3NhZ2UgPSB7fSkge1xyXG4gICAgICAgIHN3aXRjaCAoY29tbWFuZCkge1xyXG4gICAgICAgICAgICBjYXNlICdsb2FkRW5jb2Rlcic6XHJcbiAgICAgICAgICAgICAgICBsZXQge21pbWVUeXBlLCB3YXNtUGF0aH0gPSBtZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe2NvbW1hbmQsIG1pbWVUeXBlLCB3YXNtUGF0aH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdpbml0JzpcclxuICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHdvcmtlclxyXG4gICAgICAgICAgICAgICAgbGV0IHtzYW1wbGVSYXRlLCBjaGFubmVsQ291bnQsIGJpdHNQZXJTZWNvbmR9ID0gbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtjb21tYW5kLCBzYW1wbGVSYXRlLCBjaGFubmVsQ291bnQsIGJpdHNQZXJTZWNvbmR9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ya2VyU3RhdGUgPSAnZW5jb2RpbmcnO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHN0cmVhbWluZ1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLnByb2Nlc3Nvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3Nvci5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRUb1B1c2ggPSBuZXcgd2luZG93LkV2ZW50KCdzdGFydCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50VG9QdXNoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAncHVzaElucHV0RGF0YSc6XHJcbiAgICAgICAgICAgICAgICAvLyBQYXNzIGlucHV0IGF1ZGlvIGJ1ZmZlciB0byB0aGUgZW5jb2RlciB0byBlbmNvZGUuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgd29ya2VyIE1BWSB0cmlnZ2VyICdlbmNvZGVkRGF0YScuXHJcbiAgICAgICAgICAgICAgICBsZXQge2NoYW5uZWxCdWZmZXJzLCBsZW5ndGgsIGR1cmF0aW9ufSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCwgY2hhbm5lbEJ1ZmZlcnMsIGxlbmd0aCwgZHVyYXRpb25cclxuICAgICAgICAgICAgICAgIH0sIGNoYW5uZWxCdWZmZXJzLm1hcChhID0+IGEuYnVmZmVyKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2dldEVuY29kZWREYXRhJzpcclxuICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZW5jb2RlZCByZXN1bHQuXHJcbiAgICAgICAgICAgICAgICAvLyBFeHBlY3RlZCAnZW5jb2RlZERhdGEnIGV2ZW50IGZyb20gdGhlIHdvcmtlclxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe2NvbW1hbmR9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnZG9uZSc6XHJcbiAgICAgICAgICAgICAgICAvLyBUZWxsIGVuY29kZXIgZmluYWxsaXplIHRoZSBqb2IgYW5kIGRlc3RvcnkgaXRzZWxmLlxyXG4gICAgICAgICAgICAgICAgLy8gRXhwZWN0ZWQgJ2xhc3RFbmNvZGVkRGF0YScgZXZlbnQgZnJvbSB0aGUgd29ya2VyLlxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe2NvbW1hbmR9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYW4gZXJyb3IgY2FzZVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBFcnJvcjogSW5jb3JyZWN0IHBvc3RNZXNzYWdlIHJlcXVlc3RlZC4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBvbm1lc3NhZ2UoKSBjYWxsYmFjayBmcm9tIHRoZSB3b3JrZXIuXHJcbiAgICAgKiBAcGFyYW0ge21lc3NhZ2V9IGV2ZW50IC0gbWVzc2FnZSBmcm9tIHRoZSB3b3JrZXJcclxuICAgICAqL1xyXG4gICAgX29ubWVzc2FnZUZyb21Xb3JrZXIoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7Y29tbWFuZCwgYnVmZmVyc30gPSBldmVudC5kYXRhO1xyXG4gICAgICAgIGxldCBldmVudFRvUHVzaDtcclxuICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcclxuICAgICAgICAgICAgY2FzZSAncmVhZHlUb0luaXQnOlxyXG4gICAgICAgICAgICAgICAgY29uc3Qge3NhbXBsZVJhdGUsIGNoYW5uZWxDb3VudH0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJTdGF0ZSA9ICdyZWFkeVRvSW5pdCc7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgc3RhcnQoKSBpcyBhbHJlYWR5IGNhbGxlZCBpbml0aWFsaXplIHdvcmtlclxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdyZWNvcmRpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2VUb1dvcmtlcignaW5pdCcsIHtzYW1wbGVSYXRlLCBjaGFubmVsQ291bnQsIGJpdHNQZXJTZWNvbmQ6IHRoaXMuYXVkaW9CaXRzUGVyU2Vjb25kfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2VuY29kZWREYXRhJzpcclxuICAgICAgICAgICAgY2FzZSAnbGFzdEVuY29kZWREYXRhJzpcclxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gbmV3IEJsb2IoYnVmZmVycywgeyd0eXBlJzogdGhpcy5fbWltZVR5cGV9KTtcclxuICAgICAgICAgICAgICAgIGV2ZW50VG9QdXNoID0gbmV3IHdpbmRvdy5FdmVudCgnZGF0YWF2YWlsYWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnRUb1B1c2guZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnRUb1B1c2gpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIERldGVjdCBvZiBzdG9wKCkgY2FsbGVkIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09ICdsYXN0RW5jb2RlZERhdGEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRUb1B1c2ggPSBuZXcgd2luZG93LkV2ZW50KCdzdG9wJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50VG9QdXNoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtlclN0YXRlID0gJ2Nsb3NlZCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gSWdub3JlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogb25lcnJvcigpIGNhbGxiYWNrIGZyb20gdGhlIHdvcmtlci5cclxuICAgICAqIEBwYXJhbSB7RXJyb3JFdmVudH0gZXJyb3IgLSBlcnJvciBvYmplY3QgZnJvbSB0aGUgd29ya2VyXHJcbiAgICAgKi9cclxuICAgIF9vbmVycm9yRnJvbVdvcmtlcihlcnJvcikge1xyXG4gICAgICAgIC8vIFN0b3Agc3RyZWFtIGZpcnN0XHJcbiAgICAgICAgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc29yLmRpc2Nvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XHJcbiAgICAgICAgdGhpcy53b3JrZXJTdGF0ZSA9ICdjbG9zZWQnO1xyXG5cclxuICAgICAgICAvLyBTZW5kIG1lc3NhZ2UgdG8gaG9zdFxyXG4gICAgICAgIGxldCBtZXNzYWdlID0gW1xyXG4gICAgICAgICAgICAnRmlsZU5hbWU6ICcgKyBlcnJvci5maWxlbmFtZSxcclxuICAgICAgICAgICAgJ0xpbmVOdW1iZXI6ICcgKyBlcnJvci5saW5lbm8sXHJcbiAgICAgICAgICAgICdNZXNzYWdlOiAnICsgZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIF0uam9pbignIC0gJyk7XHJcbiAgICAgICAgbGV0IGVycm9yVG9QdXNoID0gbmV3IHdpbmRvdy5FdmVudCgnZXJyb3InKTtcclxuICAgICAgICBlcnJvclRvUHVzaC5uYW1lID0gJ1Vua25vd25FcnJvcic7XHJcbiAgICAgICAgZXJyb3JUb1B1c2gubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVycm9yVG9QdXNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZSBvbmF1ZGlvcHJvY2VzcygpIGNhbGxiYWNrLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVzbGljZSAtIEluIHNlY29uZHMuIE9wdXNNZWRpYVJlY29yZGVyIHNob3VsZCByZXF1ZXN0IGRhdGFcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSB0aGUgd29ya2VyIGV2ZXJ5IHRpbWVzbGljZSBzZWNvbmRzLlxyXG4gICAgICovXHJcbiAgICBfZW5hYmxlQXVkaW9Qcm9jZXNzQ2FsbGJhY2sodGltZXNsaWNlKSB7XHJcbiAgICAgICAgLy8gcGFzcyBmcmFtZSBidWZmZXJzIHRvIHRoZSB3b3JrZXJcclxuICAgICAgICBsZXQgZWxhcHNlZFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc29yLm9uYXVkaW9wcm9jZXNzID0gKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qge2lucHV0QnVmZmVyLCBwbGF5YmFja1RpbWV9ID0gZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG4gICAgICAgICAgICBjb25zdCB7c2FtcGxlUmF0ZSwgbGVuZ3RoLCBkdXJhdGlvbiwgbnVtYmVyT2ZDaGFubmVsc30gPSBpbnB1dEJ1ZmZlcjsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNoYW5uZWwgYnVmZmVycyB0byBwYXNzIHRvIHRoZSB3b3JrZXJcclxuICAgICAgICAgICAgY29uc3QgY2hhbm5lbEJ1ZmZlcnMgPSBuZXcgQXJyYXkobnVtYmVyT2ZDaGFubmVscyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZDaGFubmVsczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFubmVsQnVmZmVyc1tpXSA9IGlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQYXNzIGRhdGEgdG8gdGhlIHdvcmtlclxyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0ge2NoYW5uZWxCdWZmZXJzLCBsZW5ndGgsIGR1cmF0aW9ufTtcclxuICAgICAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2VUb1dvcmtlcigncHVzaElucHV0RGF0YScsIG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRpbWVcclxuICAgICAgICAgICAgZWxhcHNlZFRpbWUgKz0gZHVyYXRpb247XHJcbiAgICAgICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSB0aW1lc2xpY2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Bvc3RNZXNzYWdlVG9Xb3JrZXIoJ2dldEVuY29kZWREYXRhJyk7XHJcbiAgICAgICAgICAgICAgICBlbGFwc2VkVGltZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogYXV0by1zdG9wIHRoZSByZWNvcmRpbmcgYWZ0ZXIgY2VydGFpbiBtaW51dGVzLlxyXG4gICAgICogQG1ldGhvZFxyXG4gICAgICogQG1lbWJlcm9mIFJlY29yZFJUQ1xyXG4gICAgICogQGluc3RhbmNlXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogQHBhcmFtIGNvdW50ZXJcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUmVjb3JkaW5nRHVyYXRpb24oY291bnRlcikge1xyXG4gICAgICAgIGNvdW50ZXIgPSBjb3VudGVyIHx8IDA7XHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzXHJcblxyXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gJ3BhdXNlZCcpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlUmVjb3JkaW5nRHVyYXRpb24oY291bnRlcik7XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgPT09ICdzdG9wcGVkJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY291bnRlciA+PSBzZWxmLnJlY29yZGluZ0R1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc3RvcFJlY29yZGluZygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb3VudGVyICs9IDEwMDA7IC8vIDEtc2Vjb25kXHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlUmVjb3JkaW5nRHVyYXRpb24oY291bnRlcik7XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCZWdpbnMgcmVjb3JkaW5nIG1lZGlhOyB0aGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSBiZSBwYXNzZWQgYSB0aW1lc2xpY2VcclxuICAgICAqIGFyZ3VtZW50IHdpdGggYSB2YWx1ZSBpbiBtaWxsaXNlY29uZHMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXNsaWNlIC0gSWYgdGhpcyBpcyBzcGVjaWZpZWQsIHRoZSBtZWRpYSB3aWxsIGJlIGNhcHR1cmVkXHJcbiAgICAgKiAgICAgICAgaW4gc2VwYXJhdGUgY2h1bmtzIG9mIHRoYXQgZHVyYXRpb24sIHJhdGhlciB0aGFuIHRoZSBkZWZhdWx0IGJlaGF2aW9yXHJcbiAgICAgKiAgICAgICAgb2YgcmVjb3JkaW5nIHRoZSBtZWRpYSBpbiBhIHNpbmdsZSBsYXJnZSBjaHVuay4gSW4gb3RoZXIgd29yZHMsIGFuXHJcbiAgICAgKiAgICAgICAgdW5kZWZpbmVkIHZhbHVlIG9mIHRpbWVzbGljZSB3aWxsIGJlIHVuZGVyc3Rvb2QgYXMgdGhlIGxhcmdlc3QgbG9uZyB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgc3RhcnRSZWNvcmRpbmcodGltZXNsaWNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gJ2luYWN0aXZlJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RPTUV4Y2VwdGlvbjogSU5WQUxJRF9TVEFURV9FUlIsIHN0YXRlIG11c3QgYmUgaW5hY3RpdmUuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aW1lc2xpY2UgPCAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzLCB0aW1lc2xpY2Ugc2hvdWxkIGJlIDAgb3IgaGlnaGVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aW1lc2xpY2UgLz0gMTAwMDsgLy8gQ29udmVydCBtaWxsaXNlY29uZHMgdG8gc2Vjb25kc1xyXG5cclxuICAgICAgICAvLyBDaGVjayB3b3JrZXIgaXMgY2xvc2VkICh1c3VhbGx5IGJ5IHN0b3AoKSkgYW5kIGluaXQuXHJcbiAgICAgICAgaWYgKHRoaXMud29ya2VyU3RhdGUgPT09ICdjbG9zZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NwYXduV29ya2VyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgY2hhbm5lbCBjb3VudCBhbmQgc2FtcGxpbmcgcmF0ZVxyXG4gICAgICAgIC8vIGNoYW5uZWxDb3VudDogaHR0cHM6Ly93d3cudzMub3JnL1RSL21lZGlhY2FwdHVyZS1zdHJlYW1zLyNtZWRpYS10cmFjay1zZXR0aW5nc1xyXG4gICAgICAgIC8vIHNhbXBsZVJhdGU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9CYXNlQXVkaW9Db250ZXh0L3NhbXBsZVJhdGVcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XHJcbiAgICAgICAgbGV0IHRyYWNrcyA9IHRoaXMuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7XHJcbiAgICAgICAgaWYgKCF0cmFja3NbMF0pIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdET01FeGNlcHRpb246IFVua293bkVycm9yLCBtZWRpYSB0cmFjayBub3QgZm91bmQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhbm5lbENvdW50ID0gMjtcclxuICAgICAgICB0aGlzLnNhbXBsZVJhdGUgPSB0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtNZWRpYVN0cmVhbUF1ZGlvU291cmNlTm9kZX0gKi9cclxuICAgICAgICB0aGlzLnNvdXJjZSA9IHRoaXMuY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSh0aGlzLnN0cmVhbSk7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtTY3JpcHRQcm9jZXNzb3JOb2RlfSAqL1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gdGhpcy5jb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihCVUZGRVJfU0laRSwgdGhpcy5jaGFubmVsQ291bnQsIHRoaXMuY2hhbm5lbENvdW50KTtcclxuXHJcbiAgICAgICAgLy8gU3RhcnQgcmVjb3JkaW5nXHJcbiAgICAgICAgdGhpcy5fc3RhdGUgPSAncmVjb3JkaW5nJztcclxuICAgICAgICB0aGlzLl9lbmFibGVBdWRpb1Byb2Nlc3NDYWxsYmFjayh0aW1lc2xpY2UpO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgd29ya2VyIGlzIGFscmVhZHkgbG9hZGVkIHRoZW4gc3RhcnRcclxuICAgICAgICBpZiAodGhpcy53b3JrZXJTdGF0ZSA9PT0gJ3JlYWR5VG9Jbml0Jykge1xyXG4gICAgICAgICAgICBjb25zdCB7c2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50fSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc3RNZXNzYWdlVG9Xb3JrZXIoJ2luaXQnLCB7c2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBiaXRzUGVyU2Vjb25kOiB0aGlzLmF1ZGlvQml0c1BlclNlY29uZH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucmVjb3JkaW5nRHVyYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVSZWNvcmRpbmdEdXJhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3BzIHJlY29yZGluZywgYXQgd2hpY2ggcG9pbnQgYSBkYXRhYXZhaWxhYmxlIGV2ZW50IGNvbnRhaW5pbmdcclxuICAgICAqIHRoZSBmaW5hbCBCbG9iIG9mIHNhdmVkIGRhdGEgaXMgZmlyZWQuIE5vIG1vcmUgcmVjb3JkaW5nIG9jY3Vycy5cclxuICAgICAqL1xyXG4gICAgc3RvcFJlY29yZGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2luYWN0aXZlJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RPTUV4Y2VwdGlvbjogSU5WQUxJRF9TVEFURV9FUlIsIHN0YXRlIG11c3QgTk9UIGJlIGluYWN0aXZlLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcCBzdHJlYW0gZmlyc3RcclxuICAgICAgICB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzb3IuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbG9zZSgpO1xyXG5cclxuICAgICAgICAvLyBTdG9wIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIGF0IF9vbm1lc3NhZ2VGcm9tV29ya2VyKCksXHJcbiAgICAgICAgdGhpcy5fcG9zdE1lc3NhZ2VUb1dvcmtlcignZG9uZScpO1xyXG5cclxuICAgICAgICB0aGlzLl9zdGF0ZSA9ICdpbmFjdGl2ZSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXVzZXMgdGhlIHJlY29yZGluZyBvZiBtZWRpYS5cclxuICAgICAqL1xyXG4gICAgcGF1c2VSZWNvcmRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09ICdpbmFjdGl2ZScpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdET01FeGNlcHRpb246IElOVkFMSURfU1RBVEVfRVJSLCBzdGF0ZSBtdXN0IE5PVCBiZSBpbmFjdGl2ZS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0b3Agc3RyZWFtIGZpcnN0XHJcbiAgICAgICAgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc29yLmRpc2Nvbm5lY3QoKTtcclxuXHJcbiAgICAgICAgbGV0IGV2ZW50ID0gbmV3IHdpbmRvdy5FdmVudCgncGF1c2UnKTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHRoaXMuX3N0YXRlID0gJ3BhdXNlZCc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXN1bWVzIHJlY29yZGluZyBvZiBtZWRpYSBhZnRlciBoYXZpbmcgYmVlbiBwYXVzZWQuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVJlY29yZGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2luYWN0aXZlJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RPTUV4Y2VwdGlvbjogSU5WQUxJRF9TVEFURV9FUlIsIHN0YXRlIG11c3QgTk9UIGJlIGluYWN0aXZlLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzdGFydCBzdHJlYW1pbmcgZGF0YVxyXG4gICAgICAgIHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5wcm9jZXNzb3IpO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc29yLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGV2ZW50ID0gbmV3IHdpbmRvdy5FdmVudCgncmVzdW1lJyk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9ICdyZWNvcmRpbmcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdHMgYSBCbG9iIGNvbnRhaW5pbmcgdGhlIHNhdmVkIGRhdGEgcmVjZWl2ZWQgdGh1cyBmYXIgKG9yIHNpbmNlXHJcbiAgICAgKiB0aGUgbGFzdCB0aW1lIHJlcXVlc3REYXRhKCkgd2FzIGNhbGxlZC4gQWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCxcclxuICAgICAqIHJlY29yZGluZyBjb250aW51ZXMsIGJ1dCBpbiBhIG5ldyBCbG9iLlxyXG4gICAgICovXHJcbiAgICByZXF1ZXN0RGF0YSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2luYWN0aXZlJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RPTUV4Y2VwdGlvbjogSU5WQUxJRF9TVEFURV9FUlIsIHN0YXRlIG11c3QgTk9UIGJlIGluYWN0aXZlLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGF0YWF2YWlsYWJsZSBldmVudCB3aWxsIGJlIHRyaWdnZXJkIGF0IF9vbm1lc3NhZ2VGcm9tV29ya2VyKClcclxuICAgICAgICB0aGlzLl9wb3N0TWVzc2FnZVRvV29ya2VyKCdnZXRFbmNvZGVkRGF0YScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEJvb2xlYW4gdmFsdWUgaW5kaWNhdGluZyBpZiB0aGUgZ2l2ZW4gTUlNRSB0eXBlIGlzIHN1cHBvcnRlZFxyXG4gICAgICogYnkgdGhlIGN1cnJlbnQgdXNlciBhZ2VudCAuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVR5cGUgLSBBIE1JTUUgVHlwZSwgaW5jbHVkaW5nIHBhcmFtZXRlcnMgd2hlbiBuZWVkZWQsXHJcbiAgICAgKiAgICAgICAgICBzcGVjaWZ5aW5nIGEgY29udGFpbmVyIGFuZC9vciBjb2RlYyBmb3JtYXRzIGZvciByZWNvcmRpbmcuXHJcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaXNUeXBlU3VwcG9ydGVkKG1pbWVUeXBlKSB7XHJcbiAgICAgICAgLy8gU2VlOiBodHRwczovL3czYy5naXRodWIuaW8vbWVkaWFjYXB0dXJlLXJlY29yZC8jZG9tLW1lZGlhcmVjb3JkZXItaXN0eXBlc3VwcG9ydGVkXHJcblxyXG4gICAgICAgIC8vIDEuIElmIGVtcHR5IHN0cmluZywgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBtaW1lVHlwZSA9PT0gJ3N0cmluZycgJiYgIW1pbWVUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIge3R5cGUsIHN1YnR5cGUsIGNvZGVjfSA9IE9nZ09wdXNNZWRpYVJlY29yZGVyLl9wYXJzZVR5cGUobWltZVR5cGUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIDIuIElmIG5vdCBhIHZhbGlkIHN0cmluZywgcmV0dXJuIGZhbHNlLlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlICE9PSAnYXVkaW8nIHx8XHJcbiAgICAgICAgICAgICEoc3VidHlwZSA9PT0gJ29nZycgfHwgc3VidHlwZSA9PT0gJ3dlYm0nIHx8XHJcbiAgICAgICAgICAgICAgICBzdWJ0eXBlID09PSAnd2F2ZScgfHwgc3VidHlwZSA9PT0gJ3dhdicpKSB7XHJcbiAgICAgICAgICAgIC8vIDMsNC4gSWYgdHlwZSBhbmQgc3VidHlwZSBhcmUgdW5zdXBwb3J0ZWQgdGhlIHJldHVybiBmYWxzZS5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyA1LiBJZiBjb2RlYyBpcyB1bnN1cHBvcnRlZCB0aGVuIHJldHVybiBmYWxzZS5cclxuICAgICAgICAvLyA2LiBJZiB0aGUgc3BlY2lmaWVkIGNvbWJpbmF0aW9uIG9mIGFsbCBpcyBub3Qgc3VwcG9ydGVkIHRoYW4gcmV0dXJuIGZhbHNlLlxyXG4gICAgICAgIHN3aXRjaCAoc3VidHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdvZ2cnOlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvZGVjICE9PSAnb3B1cycgJiYgY29kZWMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnd2VibSc6XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZWMgIT09ICdvcHVzJyAmJiBjb2RlYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd3YXZlJzpcclxuICAgICAgICAgICAgY2FzZSAnd2F2JzpcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gQ3VycmVudGx5IG9ubHkgc3VwcG9ydHMgc2lnbmVkIDE2IGJpdHNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyA3LiByZXR1cm4gdHJ1ZS5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlIE1JTUUuIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBpc1R5cGVTdXBwb3J0ZWQoKSBhbmQgZXRjLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1pbWVUeXBlIC0gdHlwZVR5cGUgLSBBIE1JTUUgVHlwZSwgaW5jbHVkaW5nIHBhcmFtZXRlcnMgd2hlbiBuZWVkZWQsXHJcbiAgICAgKiAgICAgICAgICBzcGVjaWZ5aW5nIGEgY29udGFpbmVyIGFuZC9vciBjb2RlYyBmb3JtYXRzIGZvciByZWNvcmRpbmcuXHJcbiAgICAgKiBAcmV0dXJuIHs/b2JqZWN0fSAtIEFuIG9iamVjdCB3aXRoIHR5cGUsIHN1YnR5cGUsIGNvZGVjIGF0dHJpYnV0ZXNcclxuICAgICAqICAgICAgICAgIGlmIHBhcnNlZCBjb3JyZWN0bHkuIG51bGwgaXMgcmV0dXJuZWQgaWYgcGFyc2luZyBmYWlsZWQuXHJcbiAgICAgKiAgICAgICAgICBJZiBtaW1lVHlwZSBpcyBhbiBlbXB0eSBzdHJpbmcgdGhlbiByZXR1cm4gYW4gb2JqZWN0IHdpdGggYXR0cmlidXRlc1xyXG4gICAgICogICAgICAgICAgYXJlIGVtcHR5IHN0cmluZ3NcclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9wYXJzZVR5cGUobWltZVR5cGUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZWdleCA9IC9eKFxcdyspXFwvKFxcdyspKDtcXHMqY29kZWNzPShcXHcrKSk/JC87XHJcbiAgICAgICAgICAgIHZhciBbLCB0eXBlLCBzdWJ0eXBlLCAsIGNvZGVjXSA9IG1pbWVUeXBlLm1hdGNoKHJlZ2V4KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1pbWVUeXBlID09PSAnc3RyaW5nJyAmJiAhbWltZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7dHlwZTogJycsIHN1YnR5cGU6ICcnLCBjb2RlYzogJyd9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge3R5cGUsIHN1YnR5cGUsIGNvZGVjfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gRXZlbnRIYW5kbGVyIGF0dHJpYnV0ZXMuXHJcbi8vIFRoaXMgY29kZSBpcyBhIG5vbi1zdGFuZGFyZCBFdmVudFRhcmdldCBidXQgcmVxdWlyZWQgYnkgZXZlbnQtdGFyZ2V0LXNoaW0uXHJcbltcclxuICAgICdzdGFydCcsIC8vIENhbGxlZCB0byBoYW5kbGUgdGhlIHtAbGluayBNZWRpYVJlY29yZGVyI3N0YXJ0fSBldmVudC5cclxuICAgICdzdG9wJywgLy8gQ2FsbGVkIHRvIGhhbmRsZSB0aGUgc3RvcCBldmVudC5cclxuICAgICdkYXRhYXZhaWxhYmxlJywgLyogQ2FsbGVkIHRvIGhhbmRsZSB0aGUgZGF0YWF2YWlsYWJsZSBldmVudC4gVGhlIEJsb2Igb2ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkZWQgZGF0YSBpcyBjb250YWluZWQgaW4gdGhpcyBldmVudCBhbmQgY2FuIGJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2VkIHZpYSBpdHMgZGF0YSBhdHRyaWJ1dGUuICovXHJcbiAgICAncGF1c2UnLCAvLyBDYWxsZWQgdG8gaGFuZGxlIHRoZSBwYXVzZSBldmVudC5cclxuICAgICdyZXN1bWUnLCAvLyBDYWxsZWQgdG8gaGFuZGxlIHRoZSByZXN1bWUgZXZlbnQuXHJcbiAgICAnZXJyb3InIC8vIENhbGxlZCB0byBoYW5kbGUgYSBNZWRpYVJlY29yZGVyRXJyb3JFdmVudC5cclxuXS5mb3JFYWNoKG5hbWUgPT4gZGVmaW5lRXZlbnRBdHRyaWJ1dGUoT2dnT3B1c01lZGlhUmVjb3JkZXIucHJvdG90eXBlLCBuYW1lKSk7XHJcblxyXG4vLyBNUyBFZGdlIHNwZWNpZmljIG1vbmtleSBwYXRjaGluZzpcclxuLy8gb25hdWRpb3Byb2Nlc3MgY2FsbGJhY2sgY2Fubm90IGJlIHRyaWdnZXJlZCBtb3JlIHRoYW4gdHdpY2Ugd2hlbiBwb3N0TWVzc2FnZVxyXG4vLyB1c2VzIHRoZSBzZWNvbmRlIHRyYW5zZmVyIGFyZ3VtZW50LiBTbyBkaXNhYmxlIHRoZSB0cmFuc2ZlciBhcmd1bWVudCBvbmx5IGluIEVkZ2UuXHJcbmlmIChicm93c2VyICYmIGJyb3dzZXIubmFtZSA9PT0gJ2VkZ2UnKSB7XHJcbiAgICAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvcmlnaW5hbCA9IFdvcmtlci5wcm90b3R5cGUucG9zdE1lc3NhZ2U7XHJcbiAgICAgICAgV29ya2VyLnByb3RvdHlwZS5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0cmFuc2ZlciA9IG51bGwpIHtcclxuICAgICAgICAgICAgb3JpZ2luYWwuYXBwbHkodGhpcywgW21lc3NhZ2VdKTtcclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxufVxuLyoqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIGNvbW1vbkZ1bmN0aW9ucy5qcyBiZWdpbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBXcml0ZSBhIHN0cmluZyB0byBhIERhdGFWaWV3LlxyXG4gKiBAcGFyYW0ge0RhdGFWaWV3fSBkYXRhVmlldyAtIGRhdGFWaWV3IG9iamVjdCB0byB3cml0ZSBhIHN0cmluZy5cclxuICogQHBhcmFtIHsqfSBvZmZzZXQgLSBvZmZzZXQgaW4gYnl0ZXNcclxuICogQHBhcmFtIHsqfSBzdHJpbmcgLSBzdHJpbmcgdG8gd3JpdGVcclxuICovXHJcbmZ1bmN0aW9uIHdyaXRlU3RyaW5nKGRhdGFWaWV3LCBvZmZzZXQsIHN0cmluZykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBkYXRhVmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDIG1vbGxvYyBjbGFzcyBpbnRlcmZhY2VcclxuICovXHJcbmNsYXNzIF9BbGxvY2F0ZWRQb2ludGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQWxsb2NhdGUgbWVtb3J5XHJcbiAgICAgKiBAcGFyYW0ge2VtTW9kdWxlfSBNb2R1bGUgLSBFbXNjcmlwdGVuIG1vZHVsZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIC0gc2l6ZSBvZiBhbGxvY2F0ZWQgbWVtb3J5IGluIGJ5dGVzLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1NpZ25lZFxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc0Zsb2F0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGVtTW9kdWxlLCBzaXplLCBpc1NpZ25lZCwgaXNGbG9hdCkge1xyXG4gICAgICAgIHRoaXMuX3NpemUgPSBzaXplO1xyXG4gICAgICAgIHRoaXMuX21vZHVsZSA9IGVtTW9kdWxlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuX3NpemUpIHtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcEFycmF5ID0gaXNTaWduZWQgPyB0aGlzLl9tb2R1bGUuSEVBUDggOiB0aGlzLl9tb2R1bGUuSEVBUFU4O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXBBcnJheSA9IGlzU2lnbmVkID8gdGhpcy5fbW9kdWxlLkhFQVAxNiA6IHRoaXMuX21vZHVsZS5IRUFQVTE2O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXBBcnJheSA9IGlzU2lnbmVkID8gdGhpcy5fbW9kdWxlLkhFQVAzMiA6IHRoaXMuX21vZHVsZS5IRUFQVTMyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAvLyBQb2ludGVyIGlzIHRyZWF0ZWQgYXMgYnVmZmVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFwQXJyYXkgPSB0aGlzLl9tb2R1bGUuSEVBUFU4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzRmxvYXQpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiBmbG9hdGluZyBudWJlciBzZXQsIG92ZXJyaWRlIHNldHRpbmcuXHJcbiAgICAgICAgICAgIHRoaXMuX3NpemUgPSA0O1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFwQXJyYXkgPSB0aGlzLl9tb2R1bGUuSEVBUEYzMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5vdGUgdGhhdCBpcyB1c2VzIHRoZSBvcmlnaW5hbCBzaXplIHBhcmFtZXRlci5cclxuICAgICAgICB0aGlzLl9wb2ludGVyID0gdGhpcy5fbW9kdWxlLl9tYWxsb2Moc2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGcmVlIG1lbW9yeVxyXG4gICAgICovXHJcbiAgICBmcmVlKCkge1xyXG4gICAgICAgIHRoaXMuX21vZHVsZS5fZnJlZSh0aGlzLnBvaW50ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHBvaW50ZXIgKHJlZmVyZW5jZSkuIFRoZSBwb2ludGVyIGlzIG1lYW5pbmdsZXNzIGluIHRoZSBKUyBjb250ZXh0XHJcbiAgICAgKiBzbyBpdCBpcyBvbmx5IHVzZWZ1bCB3aGVuIGNhbGxpbmcgV0FTTSBmdW5jdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIGdldCBwb2ludGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wb2ludGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVyZWZlcmVuY2UgdGhlIHBvaW50ZXIgdG8gZ2V0IGEgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICBsZXQgYml0c1RvU2hpZnQgPSAwO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5fc2l6ZSkge1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICBiaXRzVG9TaGlmdCA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgYml0c1RvU2hpZnQgPSAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BvaW50ZXIgY2FuIGJlIG9ubHkgZGVmZXJlbmNlZCBhcyBpbnRlZ2VyLXNpemVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9oZWFwQXJyYXlbdGhpcy5wb2ludGVyID4+IGJpdHNUb1NoaWZ0XTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlcmVmZXJlbmNlIHRoZSBwb2ludGVyIHRvIHNldCBhIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBzZXQgdmFsdWUodmFsdWVUb1NldCkge1xyXG4gICAgICAgIGxldCBiaXRzVG9TaGlmdCA9IDA7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLl9zaXplKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIGJpdHNUb1NoaWZ0ID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBiaXRzVG9TaGlmdCA9IDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUG9pbnRlciBjYW4gYmUgb25seSBkZWZlcmVuY2VkIGFzIGludGVnZXItc2l6ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faGVhcEFycmF5W3RoaXMucG9pbnRlciA+PiBiaXRzVG9TaGlmdF0gPSB2YWx1ZVRvU2V0O1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQyBtYWxsb2MgYWxsb2NhdGVkIHNpZ25lZCBpbnQzMiBvYmplY3RcclxuICovXHJcbmNsYXNzIF9JbnQzMlBvaW50ZXIgZXh0ZW5kcyBfQWxsb2NhdGVkUG9pbnRlciB7XHJcbiAgICAvKipcclxuICAgICAqIEFsbG9jYXRlIGFuZCBhc3NpZ24gbnVtYmVyXHJcbiAgICAgKiBAcGFyYW0ge2VtTW9kdWxlfSBNb2R1bGUgLSBFbXNjcmlwdGVuIG1vZHVsZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdmFsdWUgLSBJZiB1bmRlZmluZWQgdGhlIHZhbHVlIGlzIG5vdCBhc3NpZ25lZCB0byB0aGUgbWVtb3J5LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihlbU1vZHVsZSwgdmFsdWUpIHtcclxuICAgICAgICBzdXBlcihlbU1vZHVsZSwgNCwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDIG1hbGxvYyBhbGxvY2F0ZWQgdW5zaWduZWQgaW50MzIgb2JqZWN0XHJcbiAqL1xyXG5jbGFzcyBfVWludDMyUG9pbnRlciBleHRlbmRzIF9BbGxvY2F0ZWRQb2ludGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQWxsb2NhdGUgYW5kIGFzc2lnbiBudW1iZXJcclxuICAgICAqIEBwYXJhbSB7ZW1Nb2R1bGV9IE1vZHVsZSAtIEVtc2NyaXB0ZW4gbW9kdWxlIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB2YWx1ZSAtIElmIHVuZGVmaW5lZCB0aGUgdmFsdWUgaXMgbm90IGFzc2lnbmVkIHRvIHRoZSBtZW1vcnkuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGVtTW9kdWxlLCB2YWx1ZSkge1xyXG4gICAgICAgIHN1cGVyKGVtTW9kdWxlLCA0LCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDIG1hbGxvYyBhbGxvY2F0ZWQgZmxvYXQgYnVmZmVyIG9iamVjdFxyXG4gKi9cclxuY2xhc3MgX0FsbG9jYXRlZEJ1ZmZlciBleHRlbmRzIF9BbGxvY2F0ZWRQb2ludGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQWxsb2NhdGUgYnVmZmVyXHJcbiAgICAgKiBAcGFyYW0ge2VtTW9kdWxlfSBNb2R1bGUgLSBFbXNjcmlwdGVuIG1vZHVsZSBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggLSBTaXplIG9mIGJ1ZmZlciBpbiB0aGUgbnVtYmVyIG9mIHVuaXRzLCBOT1QgaW4gYnl0ZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1bml0U2l6ZSAtIFNpemUgb2YgYSB1bml0IGluIGJ5dGVzXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2x9IGlzU2lnbmVkXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2x9IGlzRmxvYXRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZW1Nb2R1bGUsIGxlbmd0aCwgdW5pdFNpemUsIGlzU2lnbmVkLCBpc0Zsb2F0KSB7XHJcbiAgICAgICAgc3VwZXIoZW1Nb2R1bGUsIGxlbmd0aCAqIHVuaXRTaXplLCBpc1NpZ25lZCwgaXNGbG9hdCk7XHJcbiAgICAgICAgbGV0IGJpdHNUb1NoaWZ0ID0gMDtcclxuICAgICAgICBzd2l0Y2ggKHVuaXRTaXplKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXBBcnJheSA9IGlzU2lnbmVkID8gdGhpcy5fbW9kdWxlLkhFQVA4IDogdGhpcy5fbW9kdWxlLkhFQVBVODtcclxuICAgICAgICAgICAgICAgIGJpdHNUb1NoaWZ0ID0gMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFwQXJyYXkgPSBpc1NpZ25lZCA/IHRoaXMuX21vZHVsZS5IRUFQMTYgOiB0aGlzLl9tb2R1bGUuSEVBUFUxNjtcclxuICAgICAgICAgICAgICAgIGJpdHNUb1NoaWZ0ID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFwQXJyYXkgPSBpc1NpZ25lZCA/IHRoaXMuX21vZHVsZS5IRUFQMzIgOiB0aGlzLl9tb2R1bGUuSEVBUFUzMjtcclxuICAgICAgICAgICAgICAgIGJpdHNUb1NoaWZ0ID0gMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbml0IHNpemUgbXVzdCBiZSBhbiBpbnRlZ2VyLXNpemUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzRmxvYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcEFycmF5ID0gdGhpcy5fbW9kdWxlLkhFQVBGMzI7XHJcbiAgICAgICAgICAgIGJpdHNUb1NoaWZ0ID0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuX3BvaW50ZXIgPj4gYml0c1RvU2hpZnQ7XHJcbiAgICAgICAgdGhpcy5fYnVmZmVyID0gdGhpcy5faGVhcEFycmF5LnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgbGVuZ3RoKTtcclxuICAgICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KGFycmF5LCBvZmZzZXQpIHtcclxuICAgICAgICB0aGlzLl9idWZmZXIuc2V0KGFycmF5LCBvZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YmFycmF5KGJlZ2luLCBlbmQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYnVmZmVyLnN1YmFycmF5KGJlZ2luLCBlbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsZW5ndGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEMgbWFsbG9jIGFsbG9jYXRlZCBmbG9hdCBidWZmZXIgb2JqZWN0XHJcbiAqL1xyXG5jbGFzcyBfRmxvYXQzMkJ1ZmZlciBleHRlbmRzIF9BbGxvY2F0ZWRCdWZmZXIge1xyXG4gICAgY29uc3RydWN0b3IoZW1Nb2R1bGUsIGxlbmd0aCkge1xyXG4gICAgICAgIHN1cGVyKGVtTW9kdWxlLCBsZW5ndGgsIDQsIHRydWUsIHRydWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQyBtYWxsb2MgYWxsb2NhdGVkIHVuc2lnbmVkIHVpbnQ4IGJ1ZmZlciBvYmplY3RcclxuICovXHJcbmNsYXNzIF9VaW50OEJ1ZmZlciBleHRlbmRzIF9BbGxvY2F0ZWRCdWZmZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbGxvY2F0ZSBhbmQgYXNzaWduIG51bWJlclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB2YWx1ZSAtIElmIHVuZGVmaW5lZCB0aGUgdmFsdWUgaXMgbm90IGFzc2lnbmVkIHRvIHRoZSBtZW1vcnkuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGVtTW9kdWxlLCBsZW5ndGgpIHtcclxuICAgICAgICBzdXBlcihlbU1vZHVsZSwgbGVuZ3RoLCAxLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQWJzdHJhY3RzIEMgcG9pbnRlcnMgYW5kIG1hbGxvYyBmb3IgRW1zY3JpcHRlbiBtb2R1bGVzLlxyXG4gKi9cclxuY2xhc3MgRW1zY3JpcHRlbk1lbW9yeUFsbG9jYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbU1vZHVsZSkge1xyXG4gICAgICAgIHRoaXMuX21vZHVsZSA9IGVtTW9kdWxlO1xyXG4gICAgfVxyXG5cclxuICAgIG1hbGxvY0ludDMyKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBfSW50MzJQb2ludGVyKHRoaXMuX21vZHVsZSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG1hbGxvY1VpbnQzMih2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgX1VpbnQzMlBvaW50ZXIodGhpcy5fbW9kdWxlLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFsbG9jVWludDhCdWZmZXIobGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBfVWludDhCdWZmZXIodGhpcy5fbW9kdWxlLCBsZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1hbGxvY0Zsb2F0MzJCdWZmZXIobGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBfRmxvYXQzMkJ1ZmZlcih0aGlzLl9tb2R1bGUsIGxlbmd0aCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIGNvbW1vbkZ1bmN0aW9ucy5qcyBlbmQgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogT2dnT3B1c0VuY29kZXIuanMgYmVnaW4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKi9cclxudmFyIE1vZHVsZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX3NjcmlwdERpciA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY3VycmVudFNjcmlwdCA/IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICBmdW5jdGlvbiAoTW9kdWxlKSB7XHJcbiAgICAgICAgICAgIE1vZHVsZSA9IE1vZHVsZSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIHZhciBNb2R1bGUgPSB0eXBlb2YgTW9kdWxlICE9PSBcInVuZGVmaW5lZFwiID8gTW9kdWxlIDoge307XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIE9wdXNFbmNvZGVyLmpzIHN0YXJ0ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qKiogQ29uZmlndXJhdGlvbiovXHJcbiAgICAgICAgICAgIGNvbnN0IE9QVVNfQVBQTElDQVRJT04gPSAyMDQ5O1xyXG4gICAgICAgICAgICAvKiogRGVmaW5lZCBpbiBvcHVzX2RlZmluZXMuaFxyXG4gICAgICAgICAgICAgKiAgMjA0ODogT1BVU19BUFBMSUNBVElPTl9WT0lQID0gVm9pY2UgKExvd2VyIGZpZGVsaXR5KVxyXG4gICAgICAgICAgICAgKiAgMjA0OTogT1BVU19BUFBMSUNBVElPTl9BVURJTyA9IEZ1bGwgQmFuZCBBdWRpbyAoSGlnaGVzdCBmaWRlbGl0eSlcclxuICAgICAgICAgICAgICogIDIwNTE6IE9QVVNfQVBQTElDQVRJT05fUkVTVFJJQ1RFRF9MT1dERUxBWSA9IFJlc3RyaWN0ZWQgTG93IERlbGF5IChMb3dlc3QgbGF0ZW5jeSkgKi9cclxuICAgICAgICAgICAgY29uc3QgT1BVU19PVVRQVVRfU0FNUExFX1JBVEUgPSA0ODAwMDsgLy8gRGVzaXJlZCBlbmNvZGluZyBzYW1wbGUgcmF0ZS4gQXVkaW8gd2lsbCBiZSByZXNhbXBsZWRcclxuICAgICAgICAgICAgY29uc3QgT1BVU19PVVRQVVRfTUFYX0xFTkdUSCA9IDQwMDA7XHJcbiAgICAgICAgICAgIGNvbnN0IE9QVVNfRlJBTUVfU0laRSA9IDIwOyAvLyBTcGVjaWZpZWQgaW4gbXMuXHJcbiAgICAgICAgICAgIGNvbnN0IFNQRUVYX1JFU0FNUExFX1FVQUxJVFkgPSA2OyAvLyBWYWx1ZSBiZXR3ZWVuIDAgYW5kIDEwIGluY2x1c2l2ZS4gMTAgYmVpbmcgaGlnaGVzdCBxdWFsaXR5LlxyXG4gICAgICAgICAgICBjb25zdCBCVUZGRVJfTEVOR1RIID0gNDA5NjtcclxuXHJcbiAgICAgICAgICAgIC8qKiogQ29uc3RhbnRzIHVzZWQgZm9yIGxpYnJhcmllcyovXHJcbiAgICAgICAgICAgIC8vIGluIG9wdXNfZGVmaW5lcy5oXHJcbiAgICAgICAgICAgIGNvbnN0IE9QVVNfT0sgPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBPUFVTX1NFVF9CSVRSQVRFX1JFUVVFU1QgPSA0MDAyO1xyXG4gICAgICAgICAgICAvLyBpbiBzcGVleF9yZXNhbXBsZXIuaFxyXG4gICAgICAgICAgICBjb25zdCBSRVNBTVBMRVJfRVJSX1NVQ0NFU1MgPSAwO1xyXG5cclxuICAgICAgICAgICAgY2xhc3MgX09wdXNFbmNvZGVyIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGlucHV0U2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBiaXRzUGVyU2Vjb25kID0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0U2FtcGxlUmF0ZSwgLy8gVXN1YWxseSA0NDEwMEh6IG9yIDQ4MDAwSHpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbENvdW50XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRW1zY3JpcHRlbiBtZW1vcnkgYWxsb2NhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vcnkgPSBuZXcgRW1zY3JpcHRlbk1lbW9yeUFsbG9jYXRvcihNb2R1bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpYm9wdXMgZnVuY3Rpb25zIGltcG9ydGVkIGZyb20gV0FTTVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdXNfZW5jb2Rlcl9jcmVhdGUgPSBNb2R1bGUuX29wdXNfZW5jb2Rlcl9jcmVhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B1c19lbmNvZGVyX2N0bCA9IE1vZHVsZS5fb3B1c19lbmNvZGVyX2N0bDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcHVzX2VuY29kZV9mbG9hdCA9IE1vZHVsZS5fb3B1c19lbmNvZGVfZmxvYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B1c19lbmNvZGVyX2Rlc3Ryb3kgPSBNb2R1bGUuX29wdXNfZW5jb2Rlcl9kZXN0cm95O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNwZWV4RFNQIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NwZWV4X3Jlc2FtcGxlcl9pbml0ID0gTW9kdWxlLl9zcGVleF9yZXNhbXBsZXJfaW5pdDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zcGVleF9yZXNhbXBsZXJfcHJvY2Vzc19pbnRlcmxlYXZlZF9mbG9hdCA9IE1vZHVsZS5fc3BlZXhfcmVzYW1wbGVyX3Byb2Nlc3NfaW50ZXJsZWF2ZWRfZmxvYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3BlZXhfcmVzYW1wbGVyX2Rlc3Ryb3kgPSBNb2R1bGUuX3NwZWV4X3Jlc2FtcGxlcl9kZXN0cm95O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9nZyBjb250YWluZXIgaW1wb3J0ZWQgdXNpbmcgV2ViSURMIGJpbmRpbmdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBuZXcgTW9kdWxlLkNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5pbml0KE9QVVNfT1VUUFVUX1NBTVBMRV9SQVRFLCBjaGFubmVsQ291bnQsIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4RkZGRkZGRkYpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5PcHVzSW5pdENvZGVjKE9QVVNfT1VUUFVUX1NBTVBMRV9SQVRFLCBjaGFubmVsQ291bnQsIGJpdHNQZXJTZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU3BlZXhJbml0UmVzYW1wbGVyKGlucHV0U2FtcGxlUmF0ZSwgT1BVU19PVVRQVVRfU0FNUExFX1JBVEUsIGNoYW5uZWxDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRTYW1wbGVzUGVyQ2hhbm5lbCA9IGlucHV0U2FtcGxlUmF0ZSAqIE9QVVNfRlJBTUVfU0laRSAvIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRTYW1wbGVQZXJDaGFubmVsID0gT1BVU19PVVRQVVRfU0FNUExFX1JBVEUgKiBPUFVTX0ZSQU1FX1NJWkUgLyAxMDAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIGFsbCBidWZmZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIHxpbnB1dCBidWZmZXJ8ID09e3JlYW1wbGVyfT0+IHxyZXNhbXBsZWQgYnVmZmVyfCA9PXtlbmNvZGVyfT0+IHxvdXRwdXQgYnVmZmVyfFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tSW5wdXRCdWZmZXIgPSB0aGlzLm1lbW9yeS5tYWxsb2NGbG9hdDMyQnVmZmVyKHRoaXMuaW5wdXRTYW1wbGVzUGVyQ2hhbm5lbCAqIGNoYW5uZWxDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tUmVzYW1wbGVkQnVmZmVyID0gdGhpcy5tZW1vcnkubWFsbG9jRmxvYXQzMkJ1ZmZlcih0aGlzLm91dHB1dFNhbXBsZVBlckNoYW5uZWwgKiBjaGFubmVsQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubU91dHB1dEJ1ZmZlciA9IHRoaXMubWVtb3J5Lm1hbGxvY1VpbnQ4QnVmZmVyKE9QVVNfT1VUUFVUX01BWF9MRU5HVEgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGhvdyB0byBkZWxldGUgdGhpcyB0aGluZy5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVybGVhdmVkQnVmZmVycyA9IChjaGFubmVsQ291bnQgIT09IDEpID8gbmV3IEZsb2F0MzJBcnJheShCVUZGRVJfTEVOR1RIICogY2hhbm5lbENvdW50KSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbmNvZGUoYnVmZmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzYW1wbGVzID0gdGhpcy5pbnRlcmxlYXZlKGJ1ZmZlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzYW1wbGVJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChzYW1wbGVJbmRleCA8IHNhbXBsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgc2FtcGxlcyB0byBpbnB1dCBidWZmZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aFRvQ29weSA9IE1hdGgubWluKHRoaXMubUlucHV0QnVmZmVyLmxlbmd0aCAtIHRoaXMuaW5wdXRCdWZmZXJJbmRleCwgc2FtcGxlcy5sZW5ndGggLSBzYW1wbGVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubUlucHV0QnVmZmVyLnNldChzYW1wbGVzLnN1YmFycmF5KHNhbXBsZUluZGV4LCBzYW1wbGVJbmRleCArIGxlbmd0aFRvQ29weSksIHRoaXMuaW5wdXRCdWZmZXJJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJJbmRleCArPSBsZW5ndGhUb0NvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG1JbnB1dEJ1ZmZlciBpcyBmaWxsLCB0aGVuIGVuY29kZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRCdWZmZXJJbmRleCA+PSB0aGlzLm1JbnB1dEJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2FtcGxpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtSW5wdXRMZW5ndGggPSB0aGlzLm1lbW9yeS5tYWxsb2NVaW50MzIodGhpcy5pbnB1dFNhbXBsZXNQZXJDaGFubmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtT3V0cHV0TGVuZ3RoID0gdGhpcy5tZW1vcnkubWFsbG9jVWludDMyKHRoaXMub3V0cHV0U2FtcGxlUGVyQ2hhbm5lbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyID0gdGhpcy5fc3BlZXhfcmVzYW1wbGVyX3Byb2Nlc3NfaW50ZXJsZWF2ZWRfZmxvYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNhbXBsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tSW5wdXRCdWZmZXIucG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtSW5wdXRMZW5ndGgucG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1SZXNhbXBsZWRCdWZmZXIucG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtT3V0cHV0TGVuZ3RoLnBvaW50ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtSW5wdXRMZW5ndGguZnJlZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbU91dHB1dExlbmd0aC5mcmVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyICE9PSBSRVNBTVBMRVJfRVJSX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc2FtcGxpbmcgZXJyb3IuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhY2tldExlbmd0aCA9IHRoaXMuX29wdXNfZW5jb2RlX2Zsb2F0KHRoaXMuZW5jb2RlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1SZXNhbXBsZWRCdWZmZXIucG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dFNhbXBsZVBlckNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tT3V0cHV0QnVmZmVyLnBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tT3V0cHV0QnVmZmVyLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFja2V0TGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT3B1cyBlbmNvZGluZyBlcnJvci4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElucHV0IHBhY2tnZXQgdG8gT2dnIG9yIFdlYk0gcGFnZSBnZW5lcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci53cml0ZUZyYW1lKHRoaXMubU91dHB1dEJ1ZmZlci5wb2ludGVyLCBwYWNrZXRMZW5ndGgsIHRoaXMub3V0cHV0U2FtcGxlUGVyQ2hhbm5lbCk7IC8vIDk2MCBzYW1wbGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVySW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUluZGV4ICs9IGxlbmd0aFRvQ29weTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBGcmVlIHVwIG1lbW9yeSBiZWZvcmUgY2xvc2UgdGhlIHdlYiB3b3JrZXIuXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGNsb3NlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSB0aGUgcmVtYWluaW5nIGJ1ZmZlcnMgZmlyc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2NoYW5uZWxDb3VudH0gPSB0aGlzLmNvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaWxsIHplcm8gdG8gYnVmZmVycywgc2l6ZSBpcyB0aGUgc2FtZSBhcyByZSByZXN0IG9mIGlucHV0QnVmZmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbEZyYW1lQnVmZmVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbm5lbENvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxGcmFtZUJ1ZmZlcnMucHVzaChuZXcgRmxvYXQzMkFycmF5KEJVRkZFUl9MRU5HVEggLSAodGhpcy5pbnB1dEJ1ZmZlckluZGV4IC8gY2hhbm5lbENvdW50KSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuY29kZShmaW5hbEZyYW1lQnVmZmVycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEJ5IGRlc3Ryb3lpbmcgdGhlIGNvbnRhaW5lciBpdCBtYXkgZW1pdCB0aGUgcmVtYWluaW5nIGJ1ZmZlci5cclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGUuZGVzdHJveSh0aGlzLl9jb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubUlucHV0QnVmZmVyLmZyZWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1SZXNhbXBsZWRCdWZmZXIuZnJlZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubU91dHB1dEJ1ZmZlci5mcmVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B1c19lbmNvZGVyX2Rlc3Ryb3kodGhpcy5lbmNvZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zcGVleF9yZXNhbXBsZXJfZGVzdHJveSh0aGlzLnJlc2FtcGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBJbnRlcmxlYXZlIHRoZSBjaGFubmVsIGJ1ZmZlci5cclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5W119IGNoYW5uZWxCdWZmZXJzIC0gQW4gYXJyYXkgb2YgYnVmZmVycyB0byBpbnRlcmxlYXZlLlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBpbnRlcmxlYXZlKGNoYW5uZWxCdWZmZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hDb3VudCA9IGNoYW5uZWxCdWZmZXJzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQgb25seSBoYXMgb25lIGNoYW5uZWwsIG5vIGludGVybGVhdmUgbmVlZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaENvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGFubmVsQnVmZmVyc1swXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0OiB8IGNoMCB8IGNoMSB8IGNoMCB8IGNoMSB8IGNoMCB8IGNoMSB8IGNoMCB8IGNoMSB8IC4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNoID0gMDsgY2ggPCBjaENvdW50OyBjaCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBidWZmZXIgPSBjaGFubmVsQnVmZmVyc1tjaF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVybGVhdmVkQnVmZmVyc1tpICogY2hDb3VudCArIGNoXSA9IGJ1ZmZlcltpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmxlYXZlZEJ1ZmZlcnM7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgT3B1c0luaXRDb2RlYyhvdXRSYXRlLCBjaENvdW50LCBiaXRSYXRlID0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1FcnIgPSB0aGlzLm1lbW9yeS5tYWxsb2NVaW50MzIodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuY29kZXIgPSB0aGlzLl9vcHVzX2VuY29kZXJfY3JlYXRlKG91dFJhdGUsIGNoQ291bnQsIE9QVVNfQVBQTElDQVRJT04sIG1FcnIucG9pbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVyciA9IG1FcnIudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbUVyci5mcmVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyciAhPT0gT1BVU19PSykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09wdXMgZW5jb2RvciBpbml0aWFsaXphdGlvbiBmYWlsZWQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8qKiBDb25maWd1cmVzIHRoZSBiaXRyYXRlIGluIHRoZSBlbmNvZGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAqIFJhdGVzIGZyb20gNTAwIHRvIDUxMjAwMCBiaXRzIHBlciBzZWNvbmQgYXJlIG1lYW5pbmdmdWwsIGFzIHdlbGwgYXMgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICogc3BlY2lhbCB2YWx1ZXMgI09QVVNfQVVUTyAoLTEwMDApIGFuZCAjT1BVU19CSVRSQVRFX01BWCAoLTEpLlxyXG4gICAgICAgICAgICAgICAgICAgICAqIFRoZSB2YWx1ZSAjT1BVU19CSVRSQVRFX01BWCBjYW4gYmUgdXNlZCB0byBjYXVzZSB0aGUgY29kZWMgdG8gdXNlIGFzIG11Y2hcclxuICAgICAgICAgICAgICAgICAgICAgKiByYXRlIGFzIGl0IGNhbiwgd2hpY2ggaXMgdXNlZnVsIGZvciBjb250cm9sbGluZyB0aGUgcmF0ZSBieSBhZGp1c3RpbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICogb3V0cHV0IGJ1ZmZlciBzaXplLiBUaGUgZGVmYXVsdCBpcyBkZXRlcm1pbmVkIGJhc2VkIG9uIHRoZSBudW1iZXIgb2ZcclxuICAgICAgICAgICAgICAgICAgICAgKiBjaGFubmVscyBhbmQgdGhlIGlucHV0IHNhbXBsaW5nIHJhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpdFJhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5PcHVzU2V0T3B1c0NvbnRyb2woT1BVU19TRVRfQklUUkFURV9SRVFVRVNULCBiaXRSYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgT3B1c1NldE9wdXNDb250cm9sKHJlcXVlc3QsIHZhQXJnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5tZW1vcnkubWFsbG9jSW50MzIodmFBcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdXNfZW5jb2Rlcl9jdGwodGhpcy5lbmNvZGVyLCByZXF1ZXN0LCB2YWx1ZS5wb2ludGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5mcmVlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgU3BlZXhJbml0UmVzYW1wbGVyKGlucHV0UmF0ZSwgb3V0cHV0UmF0ZSwgY2hDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtRXJyID0gdGhpcy5tZW1vcnkubWFsbG9jVWludDMyKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNhbXBsZXIgPSB0aGlzLl9zcGVleF9yZXNhbXBsZXJfaW5pdChjaENvdW50LCBpbnB1dFJhdGUsIG91dHB1dFJhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNQRUVYX1JFU0FNUExFX1FVQUxJVFksIG1FcnIucG9pbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVyciA9IG1FcnIudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbUVyci5mcmVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyciAhPT0gUkVTQU1QTEVSX0VSUl9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5pdGlhbGl6aW5nIHJlc2FtcGxlciBmYWlsZWQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVmaW5lIHRoZSBlbmNvZGVyIG1vZHVsZSBpbnRlcmZhY2UuIFRoZSB3b3JrZXIgd2lsbCBpbnRlcmFjdCB3aXRoXHJcbiAgICAgICAgICAgICAqIHRoZSBlbmNvZGVyIHZpYSB0aG9zZSBmdW5jdGlvbnMgb25seS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIE1vZHVsZS5pbml0ID0gZnVuY3Rpb24gKGlucHV0U2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBiaXRzUGVyU2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICBNb2R1bGUuZW5jb2RlZEJ1ZmZlcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIE1vZHVsZS5lbmNvZGVyID0gbmV3IF9PcHVzRW5jb2RlcihpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCwgYml0c1BlclNlY29uZCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBNb2R1bGUuZW5jb2RlID0gZnVuY3Rpb24gKGJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgICAgIE1vZHVsZS5lbmNvZGVyLmVuY29kZShidWZmZXJzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIE1vZHVsZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNb2R1bGUuZW5jb2RlZEJ1ZmZlcnMuc3BsaWNlKDAsIE1vZHVsZS5lbmNvZGVkQnVmZmVycy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgTW9kdWxlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgTW9kdWxlLmVuY29kZXIuY2xvc2UoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIE9wdXNFbmNvZGVyLmpzIGVuZCAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAgICAgICAgICogQHR5cGUge3t9fVxyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIHZhciBtb2R1bGVPdmVycmlkZXMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIGtleTtcclxuICAgICAgICAgICAgZm9yIChrZXkgaW4gTW9kdWxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVPdmVycmlkZXNba2V5XSA9IE1vZHVsZVtrZXldXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTW9kdWxlW1wiYXJndW1lbnRzXCJdID0gW107XHJcbiAgICAgICAgICAgIE1vZHVsZVtcInRoaXNQcm9ncmFtXCJdID0gXCIuL3RoaXMucHJvZ3JhbVwiO1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJxdWl0XCJdID0gZnVuY3Rpb24gKHN0YXR1cywgdG9UaHJvdykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdG9UaHJvd1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJwcmVSdW5cIl0gPSBbXTtcclxuICAgICAgICAgICAgTW9kdWxlW1wicG9zdFJ1blwiXSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgRU5WSVJPTk1FTlRfSVNfV0VCID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIEVOVklST05NRU5UX0lTX1dPUktFUiA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgRU5WSVJPTk1FTlRfSVNfTk9ERSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgRU5WSVJPTk1FTlRfSEFTX05PREUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIEVOVklST05NRU5UX0lTX1NIRUxMID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEVOVklST05NRU5UX0lTX1dFQiA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCI7XHJcbiAgICAgICAgICAgIEVOVklST05NRU5UX0lTX1dPUktFUiA9IHR5cGVvZiBpbXBvcnRTY3JpcHRzID09PSBcImZ1bmN0aW9uXCI7XHJcbiAgICAgICAgICAgIEVOVklST05NRU5UX0hBU19OT0RFID0gdHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlcXVpcmUgPT09IFwiZnVuY3Rpb25cIjtcclxuICAgICAgICAgICAgRU5WSVJPTk1FTlRfSVNfTk9ERSA9IEVOVklST05NRU5UX0hBU19OT0RFICYmICFFTlZJUk9OTUVOVF9JU19XRUIgJiYgIUVOVklST05NRU5UX0lTX1dPUktFUjtcclxuICAgICAgICAgICAgdmFyIHNjcmlwdERpcmVjdG9yeSA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBsb2NhdGVGaWxlKHBhdGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNb2R1bGVbXCJsb2NhdGVGaWxlXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImxvY2F0ZUZpbGVcIl0ocGF0aCwgc2NyaXB0RGlyZWN0b3J5KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NyaXB0RGlyZWN0b3J5ICsgcGF0aFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoRU5WSVJPTk1FTlRfSVNfV0VCIHx8IEVOVklST05NRU5UX0lTX1dPUktFUikge1xyXG4gICAgICAgICAgICAgICAgaWYgKEVOVklST05NRU5UX0lTX1dPUktFUikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdERpcmVjdG9yeSA9IHNlbGYubG9jYXRpb24uaHJlZlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0RGlyZWN0b3J5ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChfc2NyaXB0RGlyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0RGlyZWN0b3J5ID0gX3NjcmlwdERpclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNjcmlwdERpcmVjdG9yeS5pbmRleE9mKFwiYmxvYjpcIikgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JpcHREaXJlY3RvcnkgPSBzY3JpcHREaXJlY3Rvcnkuc3Vic3RyKDAsIHNjcmlwdERpcmVjdG9yeS5sYXN0SW5kZXhPZihcIi9cIikgKyAxKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JpcHREaXJlY3RvcnkgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBNb2R1bGVbXCJyZWFkXCJdID0gZnVuY3Rpb24gc2hlbGxfcmVhZCh1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHVybCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VUZXh0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKEVOVklST05NRU5UX0lTX1dPUktFUikge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZHVsZVtcInJlYWRCaW5hcnlcIl0gPSBmdW5jdGlvbiByZWFkQmluYXJ5KHVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCB1cmwsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh4aHIucmVzcG9uc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgTW9kdWxlW1wicmVhZEFzeW5jXCJdID0gZnVuY3Rpb24gcmVhZEFzeW5jKHVybCwgb25sb2FkLCBvbmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdDtcclxuICAgICAgICAgICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcImFycmF5YnVmZmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIHhocl9vbmxvYWQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09IDIwMCB8fCB4aHIuc3RhdHVzID09IDAgJiYgeGhyLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3IoKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBvbmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKG51bGwpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgTW9kdWxlW1wic2V0V2luZG93VGl0bGVcIl0gPSBmdW5jdGlvbiAodGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG91dCA9IE1vZHVsZVtcInByaW50XCJdIHx8ICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgOiB0eXBlb2YgcHJpbnQgIT09IFwidW5kZWZpbmVkXCIgPyBwcmludCA6IG51bGwpO1xyXG4gICAgICAgICAgICB2YXIgZXJyID0gTW9kdWxlW1wicHJpbnRFcnJcIl0gfHwgKHR5cGVvZiBwcmludEVyciAhPT0gXCJ1bmRlZmluZWRcIiA/IHByaW50RXJyIDogdHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZS53YXJuLmJpbmQoY29uc29sZSkgfHwgb3V0KTtcclxuICAgICAgICAgICAgZm9yIChrZXkgaW4gbW9kdWxlT3ZlcnJpZGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlT3ZlcnJpZGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGVba2V5XSA9IG1vZHVsZU92ZXJyaWRlc1trZXldXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbW9kdWxlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIFdlYkFzc2VtYmx5ICE9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBlcnIoXCJubyBuYXRpdmUgd2FzbSBzdXBwb3J0IGRldGVjdGVkXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHdhc21NZW1vcnk7XHJcbiAgICAgICAgICAgIHZhciB3YXNtVGFibGU7XHJcbiAgICAgICAgICAgIHZhciBBQk9SVCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgRVhJVFNUQVRVUyA9IDA7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCB0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KFwiQXNzZXJ0aW9uIGZhaWxlZDogXCIgKyB0ZXh0KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgVVRGOERlY29kZXIgPSB0eXBlb2YgVGV4dERlY29kZXIgIT09IFwidW5kZWZpbmVkXCIgPyBuZXcgVGV4dERlY29kZXIoXCJ1dGY4XCIpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gVVRGOEFycmF5VG9TdHJpbmcodThBcnJheSwgaWR4LCBtYXhCeXRlc1RvUmVhZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZElkeCA9IGlkeCArIG1heEJ5dGVzVG9SZWFkO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZFB0ciA9IGlkeDtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh1OEFycmF5W2VuZFB0cl0gJiYgIShlbmRQdHIgPj0gZW5kSWR4KSkgKytlbmRQdHI7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kUHRyIC0gaWR4ID4gMTYgJiYgdThBcnJheS5zdWJhcnJheSAmJiBVVEY4RGVjb2Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBVVEY4RGVjb2Rlci5kZWNvZGUodThBcnJheS5zdWJhcnJheShpZHgsIGVuZFB0cikpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpZHggPCBlbmRQdHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUwID0gdThBcnJheVtpZHgrK107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHUwICYgMTI4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdTEgPSB1OEFycmF5W2lkeCsrXSAmIDYzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHUwICYgMjI0KSA9PSAxOTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCh1MCAmIDMxKSA8PCA2IHwgdTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdTIgPSB1OEFycmF5W2lkeCsrXSAmIDYzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHUwICYgMjQwKSA9PSAyMjQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUwID0gKHUwICYgMTUpIDw8IDEyIHwgdTEgPDwgNiB8IHUyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MCA9ICh1MCAmIDcpIDw8IDE4IHwgdTEgPDwgMTIgfCB1MiA8PCA2IHwgdThBcnJheVtpZHgrK10gJiA2M1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1MCA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh1MClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaCA9IHUwIC0gNjU1MzY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NiB8IGNoID4+IDEwLCA1NjMyMCB8IGNoICYgMTAyMylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gVVRGOFRvU3RyaW5nKHB0ciwgbWF4Qnl0ZXNUb1JlYWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwdHIgPyBVVEY4QXJyYXlUb1N0cmluZyhIRUFQVTgsIHB0ciwgbWF4Qnl0ZXNUb1JlYWQpIDogXCJcIlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgVVRGMTZEZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyICE9PSBcInVuZGVmaW5lZFwiID8gbmV3IFRleHREZWNvZGVyKFwidXRmLTE2bGVcIikgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHZhciBXQVNNX1BBR0VfU0laRSA9IDY1NTM2O1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyLCBIRUFQOCwgSEVBUFU4LCBIRUFQMTYsIEhFQVBVMTYsIEhFQVAzMiwgSEVBUFUzMiwgSEVBUEYzMiwgSEVBUEY2NDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUdsb2JhbEJ1ZmZlclZpZXdzKCkge1xyXG4gICAgICAgICAgICAgICAgTW9kdWxlW1wiSEVBUDhcIl0gPSBIRUFQOCA9IG5ldyBJbnQ4QXJyYXkoYnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIE1vZHVsZVtcIkhFQVAxNlwiXSA9IEhFQVAxNiA9IG5ldyBJbnQxNkFycmF5KGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBNb2R1bGVbXCJIRUFQMzJcIl0gPSBIRUFQMzIgPSBuZXcgSW50MzJBcnJheShidWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgTW9kdWxlW1wiSEVBUFU4XCJdID0gSEVBUFU4ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIE1vZHVsZVtcIkhFQVBVMTZcIl0gPSBIRUFQVTE2ID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBNb2R1bGVbXCJIRUFQVTMyXCJdID0gSEVBUFUzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgTW9kdWxlW1wiSEVBUEYzMlwiXSA9IEhFQVBGMzIgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBNb2R1bGVbXCJIRUFQRjY0XCJdID0gSEVBUEY2NCA9IG5ldyBGbG9hdDY0QXJyYXkoYnVmZmVyKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgRFlOQU1JQ19CQVNFID0gNTI4MzgyNCwgRFlOQU1JQ1RPUF9QVFIgPSA0MDkxMjtcclxuICAgICAgICAgICAgdmFyIFRPVEFMX1NUQUNLID0gNTI0Mjg4MDtcclxuICAgICAgICAgICAgdmFyIElOSVRJQUxfVE9UQUxfTUVNT1JZID0gTW9kdWxlW1wiVE9UQUxfTUVNT1JZXCJdIHx8IDE2Nzc3MjE2O1xyXG4gICAgICAgICAgICBpZiAoSU5JVElBTF9UT1RBTF9NRU1PUlkgPCBUT1RBTF9TVEFDSykgZXJyKFwiVE9UQUxfTUVNT1JZIHNob3VsZCBiZSBsYXJnZXIgdGhhbiBUT1RBTF9TVEFDSywgd2FzIFwiICsgSU5JVElBTF9UT1RBTF9NRU1PUlkgKyBcIiEgKFRPVEFMX1NUQUNLPVwiICsgVE9UQUxfU1RBQ0sgKyBcIilcIik7XHJcbiAgICAgICAgICAgIGlmIChNb2R1bGVbXCJidWZmZXJcIl0pIHtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IE1vZHVsZVtcImJ1ZmZlclwiXVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBXZWJBc3NlbWJseSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgV2ViQXNzZW1ibHkuTWVtb3J5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXNtTWVtb3J5ID0gbmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW5pdGlhbFwiOiBJTklUSUFMX1RPVEFMX01FTU9SWSAvIFdBU01fUEFHRV9TSVpFLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heGltdW1cIjogSU5JVElBTF9UT1RBTF9NRU1PUlkgLyBXQVNNX1BBR0VfU0laRVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHdhc21NZW1vcnkuYnVmZmVyXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihJTklUSUFMX1RPVEFMX01FTU9SWSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVHbG9iYWxCdWZmZXJWaWV3cygpO1xyXG4gICAgICAgICAgICBIRUFQMzJbRFlOQU1JQ1RPUF9QVFIgPj4gMl0gPSBEWU5BTUlDX0JBU0U7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxsUnVudGltZUNhbGxiYWNrcyhjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChjYWxsYmFja3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGNhbGxiYWNrcy5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmdW5jID0gY2FsbGJhY2suZnVuYztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZ1bmMgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmFyZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJkeW5DYWxsX3ZcIl0oZnVuYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZHVsZVtcImR5bkNhbGxfdmlcIl0oZnVuYywgY2FsbGJhY2suYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyhjYWxsYmFjay5hcmcgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjYWxsYmFjay5hcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgX19BVFBSRVJVTl9fID0gW107XHJcbiAgICAgICAgICAgIHZhciBfX0FUSU5JVF9fID0gW107XHJcbiAgICAgICAgICAgIHZhciBfX0FUTUFJTl9fID0gW107XHJcbiAgICAgICAgICAgIHZhciBfX0FUUE9TVFJVTl9fID0gW107XHJcbiAgICAgICAgICAgIHZhciBydW50aW1lSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByZVJ1bigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNb2R1bGVbXCJwcmVSdW5cIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIE1vZHVsZVtcInByZVJ1blwiXSA9PSBcImZ1bmN0aW9uXCIpIE1vZHVsZVtcInByZVJ1blwiXSA9IFtNb2R1bGVbXCJwcmVSdW5cIl1dO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChNb2R1bGVbXCJwcmVSdW5cIl0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE9uUHJlUnVuKE1vZHVsZVtcInByZVJ1blwiXS5zaGlmdCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRQUkVSVU5fXylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZW5zdXJlSW5pdFJ1bnRpbWUoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocnVudGltZUluaXRpYWxpemVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBydW50aW1lSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVElOSVRfXylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcHJlTWFpbigpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRNQUlOX18pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBvc3RSdW4oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlW1wicG9zdFJ1blwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgTW9kdWxlW1wicG9zdFJ1blwiXSA9PSBcImZ1bmN0aW9uXCIpIE1vZHVsZVtcInBvc3RSdW5cIl0gPSBbTW9kdWxlW1wicG9zdFJ1blwiXV07XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKE1vZHVsZVtcInBvc3RSdW5cIl0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE9uUG9zdFJ1bihNb2R1bGVbXCJwb3N0UnVuXCJdLnNoaWZ0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVFBPU1RSVU5fXylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkT25QcmVSdW4oY2IpIHtcclxuICAgICAgICAgICAgICAgIF9fQVRQUkVSVU5fXy51bnNoaWZ0KGNiKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGRPblByZU1haW4oY2IpIHtcclxuICAgICAgICAgICAgICAgIF9fQVRNQUlOX18udW5zaGlmdChjYilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkT25Qb3N0UnVuKGNiKSB7XHJcbiAgICAgICAgICAgICAgICBfX0FUUE9TVFJVTl9fLnVuc2hpZnQoY2IpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBNYXRoX2FicyA9IE1hdGguYWJzO1xyXG4gICAgICAgICAgICB2YXIgTWF0aF9zcXJ0ID0gTWF0aC5zcXJ0O1xyXG4gICAgICAgICAgICB2YXIgTWF0aF9jZWlsID0gTWF0aC5jZWlsO1xyXG4gICAgICAgICAgICB2YXIgTWF0aF9mbG9vciA9IE1hdGguZmxvb3I7XHJcbiAgICAgICAgICAgIHZhciBydW5EZXBlbmRlbmNpZXMgPSAwO1xyXG4gICAgICAgICAgICB2YXIgcnVuRGVwZW5kZW5jeVdhdGNoZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFJ1bkRlcGVuZGVuY3koaWQpIHtcclxuICAgICAgICAgICAgICAgIHJ1bkRlcGVuZGVuY2llcysrO1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vZHVsZVtcIm1vbml0b3JSdW5EZXBlbmRlbmNpZXNcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJtb25pdG9yUnVuRGVwZW5kZW5jaWVzXCJdKHJ1bkRlcGVuZGVuY2llcylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUnVuRGVwZW5kZW5jeShpZCkge1xyXG4gICAgICAgICAgICAgICAgcnVuRGVwZW5kZW5jaWVzLS07XHJcbiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlW1wibW9uaXRvclJ1bkRlcGVuZGVuY2llc1wiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZHVsZVtcIm1vbml0b3JSdW5EZXBlbmRlbmNpZXNcIl0ocnVuRGVwZW5kZW5jaWVzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJ1bkRlcGVuZGVuY2llcyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bkRlcGVuZGVuY3lXYXRjaGVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocnVuRGVwZW5kZW5jeVdhdGNoZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5EZXBlbmRlbmN5V2F0Y2hlciA9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlcGVuZGVuY2llc0Z1bGZpbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBkZXBlbmRlbmNpZXNGdWxmaWxsZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIE1vZHVsZVtcInByZWxvYWRlZEltYWdlc1wiXSA9IHt9O1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJwcmVsb2FkZWRBdWRpb3NcIl0gPSB7fTtcclxuICAgICAgICAgICAgdmFyIGRhdGFVUklQcmVmaXggPSBcImRhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCxcIjtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzRGF0YVVSSShmaWxlbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCA/IGZpbGVuYW1lLnN0YXJ0c1dpdGgoZGF0YVVSSVByZWZpeCkgOiBmaWxlbmFtZS5pbmRleE9mKGRhdGFVUklQcmVmaXgpID09PSAwXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB3YXNtQmluYXJ5RmlsZSA9IFwiT2dnT3B1c0VuY29kZXIud2FzbVwiO1xyXG4gICAgICAgICAgICBpZiAoIWlzRGF0YVVSSSh3YXNtQmluYXJ5RmlsZSkpIHtcclxuICAgICAgICAgICAgICAgIHdhc21CaW5hcnlGaWxlID0gbG9jYXRlRmlsZSh3YXNtQmluYXJ5RmlsZSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0QmluYXJ5KCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTW9kdWxlW1wid2FzbUJpbmFyeVwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoTW9kdWxlW1wid2FzbUJpbmFyeVwiXSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1vZHVsZVtcInJlYWRCaW5hcnlcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcInJlYWRCaW5hcnlcIl0od2FzbUJpbmFyeUZpbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dcImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydChlcnIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldEJpbmFyeVByb21pc2UoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIU1vZHVsZVtcIndhc21CaW5hcnlcIl0gJiYgKEVOVklST05NRU5UX0lTX1dFQiB8fCBFTlZJUk9OTUVOVF9JU19XT1JLRVIpICYmIHR5cGVvZiBmZXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHdhc21CaW5hcnlGaWxlLCB7Y3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIn0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2VbXCJva1wiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dcImZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJ1wiICsgd2FzbUJpbmFyeUZpbGUgKyBcIidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZVtcImFycmF5QnVmZmVyXCJdKClcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRCaW5hcnkoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2V0QmluYXJ5KCkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVXYXNtKGVudikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSB7XCJlbnZcIjogZW52fTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZWNlaXZlSW5zdGFuY2UoaW5zdGFuY2UsIG1vZHVsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBvcnRzID0gaW5zdGFuY2UuZXhwb3J0cztcclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJhc21cIl0gPSBleHBvcnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVJ1bkRlcGVuZGVuY3koXCJ3YXNtLWluc3RhbnRpYXRlXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYWRkUnVuRGVwZW5kZW5jeShcIndhc20taW5zdGFudGlhdGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVjZWl2ZUluc3RhbnRpYXRlZFNvdXJjZShvdXRwdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlSW5zdGFuY2Uob3V0cHV0W1wiaW5zdGFuY2VcIl0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5zdGFudGlhdGVBcnJheUJ1ZmZlcihyZWNlaXZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRCaW5hcnlQcm9taXNlKCkudGhlbihmdW5jdGlvbiAoYmluYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShiaW5hcnksIGluZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZWNlaXZlciwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoXCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiBcIiArIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KHJlYXNvbilcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlQXN5bmMoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFNb2R1bGVbXCJ3YXNtQmluYXJ5XCJdICYmIHR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyA9PT0gXCJmdW5jdGlvblwiICYmICFpc0RhdGFVUkkod2FzbUJpbmFyeUZpbGUpICYmIHR5cGVvZiBmZXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoKHdhc21CaW5hcnlGaWxlLCB7Y3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIn0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcocmVzcG9uc2UsIGluZm8pLnRoZW4ocmVjZWl2ZUluc3RhbnRpYXRlZFNvdXJjZSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycihcIndhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiBcIiArIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyKFwiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFudGlhdGVBcnJheUJ1ZmZlcihyZWNlaXZlSW5zdGFudGlhdGVkU291cmNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFudGlhdGVBcnJheUJ1ZmZlcihyZWNlaXZlSW5zdGFudGlhdGVkU291cmNlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlW1wiaW5zdGFudGlhdGVXYXNtXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImluc3RhbnRpYXRlV2FzbVwiXShpbmZvLCByZWNlaXZlSW5zdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIoXCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiBcIiArIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbnN0YW50aWF0ZUFzeW5jKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge31cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTW9kdWxlW1wiYXNtXCJdID0gZnVuY3Rpb24gKGdsb2JhbCwgZW52LCBwcm92aWRlZEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgZW52W1wibWVtb3J5XCJdID0gd2FzbU1lbW9yeTtcclxuICAgICAgICAgICAgICAgIGVudltcInRhYmxlXCJdID0gd2FzbVRhYmxlID0gbmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtcclxuICAgICAgICAgICAgICAgICAgICBcImluaXRpYWxcIjogMzEsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXhpbXVtXCI6IDMxICsgMCxcclxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRcIjogXCJhbnlmdW5jXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4cG9ydHMgPSBjcmVhdGVXYXNtKGVudik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwb3J0c1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZW1zY3JpcHRlblB1c2hCdWZmZXIoYnVmLCBsZW4pIHtcclxuICAgICAgICAgICAgICAgIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KE1vZHVsZS5IRUFQVTguYnVmZmVyLCBidWYsIGxlbik7XHJcbiAgICAgICAgICAgICAgICBNb2R1bGUuZW5jb2RlZEJ1ZmZlcnMucHVzaChuZXcgVWludDhBcnJheShhcnJheSkuYnVmZmVyKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBfX19hc3NlcnRfZmFpbChjb25kaXRpb24sIGZpbGVuYW1lLCBsaW5lLCBmdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBhYm9ydChcIkFzc2VydGlvbiBmYWlsZWQ6IFwiICsgVVRGOFRvU3RyaW5nKGNvbmRpdGlvbikgKyBcIiwgYXQ6IFwiICsgW2ZpbGVuYW1lID8gVVRGOFRvU3RyaW5nKGZpbGVuYW1lKSA6IFwidW5rbm93biBmaWxlbmFtZVwiLCBsaW5lLCBmdW5jID8gVVRGOFRvU3RyaW5nKGZ1bmMpIDogXCJ1bmtub3duIGZ1bmN0aW9uXCJdKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBfX19jeGFfcHVyZV92aXJ0dWFsKCkge1xyXG4gICAgICAgICAgICAgICAgQUJPUlQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhyb3dcIlB1cmUgdmlydHVhbCBmdW5jdGlvbiBjYWxsZWQhXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gX2Fib3J0KCkge1xyXG4gICAgICAgICAgICAgICAgTW9kdWxlW1wiYWJvcnRcIl0oKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgX2FicyA9IE1hdGhfYWJzO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fZ2V0X2hlYXBfc2l6ZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBIRUFQOC5sZW5ndGhcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyhkZXN0LCBzcmMsIG51bSkge1xyXG4gICAgICAgICAgICAgICAgSEVBUFU4LnNldChIRUFQVTguc3ViYXJyYXkoc3JjLCBzcmMgKyBudW0pLCBkZXN0KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgX2ZhYnMgPSBNYXRoX2FicztcclxuICAgICAgICAgICAgdmFyIF9mbG9vciA9IE1hdGhfZmxvb3I7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBfcm91bmQoZCkge1xyXG4gICAgICAgICAgICAgICAgZCA9ICtkO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQgPj0gKzAgPyArTWF0aF9mbG9vcihkICsgKy41KSA6ICtNYXRoX2NlaWwoZCAtICsuNSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gX3JpbnRmKGYpIHtcclxuICAgICAgICAgICAgICAgIGYgPSArZjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmIC0gK01hdGhfZmxvb3IoZikgIT0gLjUgPyArX3JvdW5kKGYpIDogK19yb3VuZChmIC8gKzIpICogKzJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gX19fc2V0RXJyTm8odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNb2R1bGVbXCJfX19lcnJub19sb2NhdGlvblwiXSkgSEVBUDMyW01vZHVsZVtcIl9fX2Vycm5vX2xvY2F0aW9uXCJdKCkgPj4gMl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeShyZXF1ZXN0ZWRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBhYm9ydChcIk9PTVwiKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBfZW1zY3JpcHRlbl9yZXNpemVfaGVhcChyZXF1ZXN0ZWRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeShyZXF1ZXN0ZWRTaXplKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBfc2JyayhpbmNyZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGluY3JlbWVudCA9IGluY3JlbWVudCB8IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkRHluYW1pY1RvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3RHluYW1pY1RvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG90YWxNZW1vcnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdG90YWxNZW1vcnkgPSBfZW1zY3JpcHRlbl9nZXRfaGVhcF9zaXplKCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgb2xkRHluYW1pY1RvcCA9IEhFQVAzMltEWU5BTUlDVE9QX1BUUiA+PiAyXSB8IDA7XHJcbiAgICAgICAgICAgICAgICBuZXdEeW5hbWljVG9wID0gb2xkRHluYW1pY1RvcCArIGluY3JlbWVudCB8IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGluY3JlbWVudCB8IDApID4gMCAmIChuZXdEeW5hbWljVG9wIHwgMCkgPCAob2xkRHluYW1pY1RvcCB8IDApIHwgKG5ld0R5bmFtaWNUb3AgfCAwKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeShuZXdEeW5hbWljVG9wIHwgMCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIF9fX3NldEVyck5vKDEyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgobmV3RHluYW1pY1RvcCB8IDApID4gKHRvdGFsTWVtb3J5IHwgMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXAobmV3RHluYW1pY1RvcCB8IDApIHwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fX3NldEVyck5vKDEyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgSEVBUDMyW0RZTkFNSUNUT1BfUFRSID4+IDJdID0gbmV3RHluYW1pY1RvcCB8IDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkRHluYW1pY1RvcCB8IDBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIF9zcXJ0ID0gTWF0aF9zcXJ0O1xyXG4gICAgICAgICAgICB2YXIgYXNtR2xvYmFsQXJnID0ge307XHJcbiAgICAgICAgICAgIHZhciBhc21MaWJyYXJ5QXJnID0ge1xyXG4gICAgICAgICAgICAgICAgXCJiXCI6IF9fX2Fzc2VydF9mYWlsLFxyXG4gICAgICAgICAgICAgICAgXCJqXCI6IF9fX2N4YV9wdXJlX3ZpcnR1YWwsXHJcbiAgICAgICAgICAgICAgICBcImlcIjogX2Fib3J0LFxyXG4gICAgICAgICAgICAgICAgXCJhXCI6IF9hYnMsXHJcbiAgICAgICAgICAgICAgICBcImRcIjogZW1zY3JpcHRlblB1c2hCdWZmZXIsXHJcbiAgICAgICAgICAgICAgICBcImdcIjogX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyxcclxuICAgICAgICAgICAgICAgIFwiaFwiOiBfZmFicyxcclxuICAgICAgICAgICAgICAgIFwia1wiOiBfZmxvb3IsXHJcbiAgICAgICAgICAgICAgICBcImZcIjogX3JpbnRmLFxyXG4gICAgICAgICAgICAgICAgXCJjXCI6IF9zYnJrLFxyXG4gICAgICAgICAgICAgICAgXCJlXCI6IF9zcXJ0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBhc20gPSBNb2R1bGVbXCJhc21cIl0oYXNtR2xvYmFsQXJnLCBhc21MaWJyYXJ5QXJnLCBidWZmZXIpO1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJhc21cIl0gPSBhc207XHJcbiAgICAgICAgICAgIHZhciBfX193YXNtX2NhbGxfY3RvcnMgPSBNb2R1bGVbXCJfX193YXNtX2NhbGxfY3RvcnNcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wiX193YXNtX2NhbGxfY3RvcnNcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgX2Vtc2NyaXB0ZW5fYmluZF9Wb2lkUHRyX19fZGVzdHJveV9fXzAgPSBNb2R1bGVbXCJfZW1zY3JpcHRlbl9iaW5kX1ZvaWRQdHJfX19kZXN0cm95X19fMFwiXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNb2R1bGVbXCJhc21cIl1bXCJsXCJdLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIF9lbXNjcmlwdGVuX2JpbmRfQ29udGFpbmVyX0NvbnRhaW5lcl8wID0gTW9kdWxlW1wiX2Vtc2NyaXB0ZW5fYmluZF9Db250YWluZXJfQ29udGFpbmVyXzBcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wibVwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfZW1zY3JpcHRlbl9iaW5kX0NvbnRhaW5lcl9pbml0XzMgPSBNb2R1bGVbXCJfZW1zY3JpcHRlbl9iaW5kX0NvbnRhaW5lcl9pbml0XzNcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wiblwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfZW1zY3JpcHRlbl9iaW5kX0NvbnRhaW5lcl93cml0ZUZyYW1lXzMgPSBNb2R1bGVbXCJfZW1zY3JpcHRlbl9iaW5kX0NvbnRhaW5lcl93cml0ZUZyYW1lXzNcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wib1wiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfZW1zY3JpcHRlbl9iaW5kX0NvbnRhaW5lcl9fX2Rlc3Ryb3lfX18wID0gTW9kdWxlW1wiX2Vtc2NyaXB0ZW5fYmluZF9Db250YWluZXJfX19kZXN0cm95X19fMFwiXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNb2R1bGVbXCJhc21cIl1bXCJwXCJdLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIF9vcHVzX2VuY29kZXJfY3JlYXRlID0gTW9kdWxlW1wiX29wdXNfZW5jb2Rlcl9jcmVhdGVcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wicVwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfb3B1c19lbmNvZGVfZmxvYXQgPSBNb2R1bGVbXCJfb3B1c19lbmNvZGVfZmxvYXRcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wiclwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfb3B1c19lbmNvZGVyX2N0bCA9IE1vZHVsZVtcIl9vcHVzX2VuY29kZXJfY3RsXCJdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImFzbVwiXVtcInNcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgX29wdXNfZW5jb2Rlcl9kZXN0cm95ID0gTW9kdWxlW1wiX29wdXNfZW5jb2Rlcl9kZXN0cm95XCJdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImFzbVwiXVtcInRcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgX21hbGxvYyA9IE1vZHVsZVtcIl9tYWxsb2NcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1widVwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBfZnJlZSA9IE1vZHVsZVtcIl9mcmVlXCJdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImFzbVwiXVtcInZcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgX3NwZWV4X3Jlc2FtcGxlcl9pbml0ID0gTW9kdWxlW1wiX3NwZWV4X3Jlc2FtcGxlcl9pbml0XCJdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImFzbVwiXVtcIndcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgX3NwZWV4X3Jlc2FtcGxlcl9kZXN0cm95ID0gTW9kdWxlW1wiX3NwZWV4X3Jlc2FtcGxlcl9kZXN0cm95XCJdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImFzbVwiXVtcInhcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgX3NwZWV4X3Jlc2FtcGxlcl9wcm9jZXNzX2ludGVybGVhdmVkX2Zsb2F0ID0gTW9kdWxlW1wiX3NwZWV4X3Jlc2FtcGxlcl9wcm9jZXNzX2ludGVybGVhdmVkX2Zsb2F0XCJdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1vZHVsZVtcImFzbVwiXVtcInlcIl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgZHluQ2FsbF92aSA9IE1vZHVsZVtcImR5bkNhbGxfdmlcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wielwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBkeW5DYWxsX3YgPSBNb2R1bGVbXCJkeW5DYWxsX3ZcIl0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTW9kdWxlW1wiYXNtXCJdW1wiQVwiXS5hcHBseShudWxsLCBhcmd1bWVudHMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE1vZHVsZVtcImFzbVwiXSA9IGFzbTtcclxuICAgICAgICAgICAgTW9kdWxlW1widGhlblwiXSA9IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlW1wiY2FsbGVkUnVuXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuYyhNb2R1bGUpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGQgPSBNb2R1bGVbXCJvblJ1bnRpbWVJbml0aWFsaXplZFwiXTtcclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJvblJ1bnRpbWVJbml0aWFsaXplZFwiXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZCkgb2xkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMoTW9kdWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBNb2R1bGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIEV4aXRTdGF0dXMoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBcIkV4aXRTdGF0dXNcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IFwiUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdChcIiArIHN0YXR1cyArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRXhpdFN0YXR1cy5wcm90b3R5cGUgPSBuZXcgRXJyb3I7XHJcbiAgICAgICAgICAgIEV4aXRTdGF0dXMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRXhpdFN0YXR1cztcclxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzRnVsZmlsbGVkID0gZnVuY3Rpb24gcnVuQ2FsbGVyKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFNb2R1bGVbXCJjYWxsZWRSdW5cIl0pIHJ1bigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFNb2R1bGVbXCJjYWxsZWRSdW5cIl0pIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bkNhbGxlclxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcnVuKGFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmdzIHx8IE1vZHVsZVtcImFyZ3VtZW50c1wiXTtcclxuICAgICAgICAgICAgICAgIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcmVSdW4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlW1wiY2FsbGVkUnVuXCJdKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZG9SdW4oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1vZHVsZVtcImNhbGxlZFJ1blwiXSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vZHVsZVtcImNhbGxlZFJ1blwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFCT1JUKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgZW5zdXJlSW5pdFJ1bnRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmVNYWluKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1vZHVsZVtcIm9uUnVudGltZUluaXRpYWxpemVkXCJdKSBNb2R1bGVbXCJvblJ1bnRpbWVJbml0aWFsaXplZFwiXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RSdW4oKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChNb2R1bGVbXCJzZXRTdGF0dXNcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJzZXRTdGF0dXNcIl0oXCJSdW5uaW5nLi4uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZHVsZVtcInNldFN0YXR1c1wiXShcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9SdW4oKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvUnVuKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTW9kdWxlW1wicnVuXCJdID0gcnVuO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWJvcnQod2hhdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vZHVsZVtcIm9uQWJvcnRcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJvbkFib3J0XCJdKHdoYXQpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAod2hhdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0KHdoYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycih3aGF0KTtcclxuICAgICAgICAgICAgICAgICAgICB3aGF0ID0gJ1wiJyArIHdoYXQgKyAnXCInXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoYXQgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBBQk9SVCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBFWElUU1RBVFVTID0gMTtcclxuICAgICAgICAgICAgICAgIHRocm93XCJhYm9ydChcIiArIHdoYXQgKyBcIikuIEJ1aWxkIHdpdGggLXMgQVNTRVJUSU9OUz0xIGZvciBtb3JlIGluZm8uXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTW9kdWxlW1wiYWJvcnRcIl0gPSBhYm9ydDtcclxuICAgICAgICAgICAgaWYgKE1vZHVsZVtcInByZUluaXRcIl0pIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgTW9kdWxlW1wicHJlSW5pdFwiXSA9PSBcImZ1bmN0aW9uXCIpIE1vZHVsZVtcInByZUluaXRcIl0gPSBbTW9kdWxlW1wicHJlSW5pdFwiXV07XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoTW9kdWxlW1wicHJlSW5pdFwiXS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW9kdWxlW1wicHJlSW5pdFwiXS5wb3AoKSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTW9kdWxlW1wibm9FeGl0UnVudGltZVwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJ1bigpO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gV3JhcHBlck9iamVjdCgpIHtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgV3JhcHBlck9iamVjdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFdyYXBwZXJPYmplY3QucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgV3JhcHBlck9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBXcmFwcGVyT2JqZWN0O1xyXG4gICAgICAgICAgICBXcmFwcGVyT2JqZWN0LnByb3RvdHlwZS5fX2NsYXNzX18gPSBXcmFwcGVyT2JqZWN0O1xyXG4gICAgICAgICAgICBXcmFwcGVyT2JqZWN0Ll9fY2FjaGVfXyA9IHt9O1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJXcmFwcGVyT2JqZWN0XCJdID0gV3JhcHBlck9iamVjdDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENhY2hlKF9fY2xhc3NfXykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChfX2NsYXNzX18gfHwgV3JhcHBlck9iamVjdCkuX19jYWNoZV9fXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIE1vZHVsZVtcImdldENhY2hlXCJdID0gZ2V0Q2FjaGU7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB3cmFwUG9pbnRlcihwdHIsIF9fY2xhc3NfXykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlID0gZ2V0Q2FjaGUoX19jbGFzc19fKTtcclxuICAgICAgICAgICAgICAgIHZhciByZXQgPSBjYWNoZVtwdHJdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJldCkgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgIHJldCA9IE9iamVjdC5jcmVhdGUoKF9fY2xhc3NfXyB8fCBXcmFwcGVyT2JqZWN0KS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0LnB0ciA9IHB0cjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZVtwdHJdID0gcmV0XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIE1vZHVsZVtcIndyYXBQb2ludGVyXCJdID0gd3JhcFBvaW50ZXI7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYXN0T2JqZWN0KG9iaiwgX19jbGFzc19fKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcFBvaW50ZXIob2JqLnB0ciwgX19jbGFzc19fKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBNb2R1bGVbXCJjYXN0T2JqZWN0XCJdID0gY2FzdE9iamVjdDtcclxuICAgICAgICAgICAgTW9kdWxlW1wiTlVMTFwiXSA9IHdyYXBQb2ludGVyKDApO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZGVzdHJveShvYmopIHtcclxuICAgICAgICAgICAgICAgIGlmICghb2JqW1wiX19kZXN0cm95X19cIl0pIHRocm93XCJFcnJvcjogQ2Fubm90IGRlc3Ryb3kgb2JqZWN0LiAoRGlkIHlvdSBjcmVhdGUgaXQgeW91cnNlbGY/KVwiO1xyXG4gICAgICAgICAgICAgICAgb2JqW1wiX19kZXN0cm95X19cIl0oKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBnZXRDYWNoZShvYmouX19jbGFzc19fKVtvYmoucHRyXVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBNb2R1bGVbXCJkZXN0cm95XCJdID0gZGVzdHJveTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBhcmUob2JqMSwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajEucHRyID09PSBvYmoyLnB0clxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBNb2R1bGVbXCJjb21wYXJlXCJdID0gY29tcGFyZTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFBvaW50ZXIob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnB0clxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBNb2R1bGVbXCJnZXRQb2ludGVyXCJdID0gZ2V0UG9pbnRlcjtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENsYXNzKG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iai5fX2NsYXNzX19cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTW9kdWxlW1wiZ2V0Q2xhc3NcIl0gPSBnZXRDbGFzcztcclxuICAgICAgICAgICAgdmFyIGVuc3VyZUNhY2hlID0ge1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyOiAwLCBzaXplOiAwLCBwb3M6IDAsIHRlbXBzOiBbXSwgbmVlZGVkOiAwLCBwcmVwYXJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuc3VyZUNhY2hlLm5lZWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuc3VyZUNhY2hlLnRlbXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJfZnJlZVwiXShlbnN1cmVDYWNoZS50ZW1wc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVDYWNoZS50ZW1wcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2R1bGVbXCJfZnJlZVwiXShlbnN1cmVDYWNoZS5idWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVDYWNoZS5idWZmZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVDYWNoZS5zaXplICs9IGVuc3VyZUNhY2hlLm5lZWRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlQ2FjaGUubmVlZGVkID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVuc3VyZUNhY2hlLmJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVDYWNoZS5zaXplICs9IDEyODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlQ2FjaGUuYnVmZmVyID0gTW9kdWxlW1wiX21hbGxvY1wiXShlbnN1cmVDYWNoZS5zaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGVuc3VyZUNhY2hlLmJ1ZmZlcilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZW5zdXJlQ2FjaGUucG9zID0gMFxyXG4gICAgICAgICAgICAgICAgfSwgYWxsb2M6IGZ1bmN0aW9uIChhcnJheSwgdmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChlbnN1cmVDYWNoZS5idWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBieXRlcyA9IHZpZXcuQllURVNfUEVSX0VMRU1FTlQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aCAqIGJ5dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IGxlbiArIDcgJiAtODtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnN1cmVDYWNoZS5wb3MgKyBsZW4gPj0gZW5zdXJlQ2FjaGUuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQobGVuID4gMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuc3VyZUNhY2hlLm5lZWRlZCArPSBsZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IE1vZHVsZVtcIl9tYWxsb2NcIl0obGVuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5zdXJlQ2FjaGUudGVtcHMucHVzaChyZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gZW5zdXJlQ2FjaGUuYnVmZmVyICsgZW5zdXJlQ2FjaGUucG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVDYWNoZS5wb3MgKz0gbGVuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRcclxuICAgICAgICAgICAgICAgIH0sIGNvcHk6IGZ1bmN0aW9uIChhcnJheSwgdmlldywgb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldFNoaWZ0ZWQgPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ5dGVzID0gdmlldy5CWVRFU19QRVJfRUxFTUVOVDtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGJ5dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFNoaWZ0ZWQgPj49IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0U2hpZnRlZCA+Pj0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTaGlmdGVkID4+PSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3W29mZnNldFNoaWZ0ZWQgKyBpXSA9IGFycmF5W2ldXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gVm9pZFB0cigpIHtcclxuICAgICAgICAgICAgICAgIHRocm93XCJjYW5ub3QgY29uc3RydWN0IGEgVm9pZFB0ciwgbm8gY29uc3RydWN0b3IgaW4gSURMXCJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVm9pZFB0ci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFdyYXBwZXJPYmplY3QucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgVm9pZFB0ci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBWb2lkUHRyO1xyXG4gICAgICAgICAgICBWb2lkUHRyLnByb3RvdHlwZS5fX2NsYXNzX18gPSBWb2lkUHRyO1xyXG4gICAgICAgICAgICBWb2lkUHRyLl9fY2FjaGVfXyA9IHt9O1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJWb2lkUHRyXCJdID0gVm9pZFB0cjtcclxuICAgICAgICAgICAgVm9pZFB0ci5wcm90b3R5cGVbXCJfX2Rlc3Ryb3lfX1wiXSA9IFZvaWRQdHIucHJvdG90eXBlLl9fZGVzdHJveV9fID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLnB0cjtcclxuICAgICAgICAgICAgICAgIF9lbXNjcmlwdGVuX2JpbmRfVm9pZFB0cl9fX2Rlc3Ryb3lfX18wKHNlbGYpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBDb250YWluZXIoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnB0ciA9IF9lbXNjcmlwdGVuX2JpbmRfQ29udGFpbmVyX0NvbnRhaW5lcl8wKCk7XHJcbiAgICAgICAgICAgICAgICBnZXRDYWNoZShDb250YWluZXIpW3RoaXMucHRyXSA9IHRoaXNcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ29udGFpbmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoV3JhcHBlck9iamVjdC5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29udGFpbmVyO1xyXG4gICAgICAgICAgICBDb250YWluZXIucHJvdG90eXBlLl9fY2xhc3NfXyA9IENvbnRhaW5lcjtcclxuICAgICAgICAgICAgQ29udGFpbmVyLl9fY2FjaGVfXyA9IHt9O1xyXG4gICAgICAgICAgICBNb2R1bGVbXCJDb250YWluZXJcIl0gPSBDb250YWluZXI7XHJcbiAgICAgICAgICAgIENvbnRhaW5lci5wcm90b3R5cGVbXCJpbml0XCJdID0gQ29udGFpbmVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGFyZzAsIGFyZzEsIGFyZzIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcy5wdHI7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJnMCAmJiB0eXBlb2YgYXJnMCA9PT0gXCJvYmplY3RcIikgYXJnMCA9IGFyZzAucHRyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZzEgJiYgdHlwZW9mIGFyZzEgPT09IFwib2JqZWN0XCIpIGFyZzEgPSBhcmcxLnB0cjtcclxuICAgICAgICAgICAgICAgIGlmIChhcmcyICYmIHR5cGVvZiBhcmcyID09PSBcIm9iamVjdFwiKSBhcmcyID0gYXJnMi5wdHI7XHJcbiAgICAgICAgICAgICAgICBfZW1zY3JpcHRlbl9iaW5kX0NvbnRhaW5lcl9pbml0XzMoc2VsZiwgYXJnMCwgYXJnMSwgYXJnMilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQ29udGFpbmVyLnByb3RvdHlwZVtcIndyaXRlRnJhbWVcIl0gPSBDb250YWluZXIucHJvdG90eXBlLndyaXRlRnJhbWUgPSBmdW5jdGlvbiAoYXJnMCwgYXJnMSwgYXJnMikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLnB0cjtcclxuICAgICAgICAgICAgICAgIGlmIChhcmcwICYmIHR5cGVvZiBhcmcwID09PSBcIm9iamVjdFwiKSBhcmcwID0gYXJnMC5wdHI7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJnMSAmJiB0eXBlb2YgYXJnMSA9PT0gXCJvYmplY3RcIikgYXJnMSA9IGFyZzEucHRyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZzIgJiYgdHlwZW9mIGFyZzIgPT09IFwib2JqZWN0XCIpIGFyZzIgPSBhcmcyLnB0cjtcclxuICAgICAgICAgICAgICAgIF9lbXNjcmlwdGVuX2JpbmRfQ29udGFpbmVyX3dyaXRlRnJhbWVfMyhzZWxmLCBhcmcwLCBhcmcxLCBhcmcyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBDb250YWluZXIucHJvdG90eXBlW1wiX19kZXN0cm95X19cIl0gPSBDb250YWluZXIucHJvdG90eXBlLl9fZGVzdHJveV9fID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLnB0cjtcclxuICAgICAgICAgICAgICAgIF9lbXNjcmlwdGVuX2JpbmRfQ29udGFpbmVyX19fZGVzdHJveV9fXzAoc2VsZilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwRW51bXMoKSB7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJ1bnRpbWVJbml0aWFsaXplZCkgc2V0dXBFbnVtcygpOyBlbHNlIGFkZE9uUHJlTWFpbihzZXR1cEVudW1zKVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBNb2R1bGVcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59KSgpO1xyXG5cclxuaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBNb2R1bGU7XHJcbn0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XHJcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTW9kdWxlO1xyXG4gICAgfSk7XHJcbn0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICBleHBvcnRzW1wiTW9kdWxlXCJdID0gTW9kdWxlO1xyXG59XHJcblxyXG4vKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBPZ2dPcHVzRW5jb2Rlci5qcyBlbmQgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiDliJ3lp4vljJYgV29ya2VyXHJcbiAqIEBwYXJhbSB3b3JrZXJHbG9iYWxTY29wZVxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdFdvcmtlcih3b3JrZXJHbG9iYWxTY29wZSkge1xyXG4gICAgLy8g5byV5YWlIE9nZ09wdXNFbmNvZGVyIOaooeWdl1xyXG4gICAgY29uc3QgT2dnT3B1c0VuY29kZXIgPSBNb2R1bGU7XHJcbiAgICBsZXQgZW5jb2RlcjtcclxuXHJcbiAgICB3b3JrZXJHbG9iYWxTY29wZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGNvbnN0IHtjb21tYW5kfSA9IGUuZGF0YTtcclxuICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcclxuICAgICAgICAgICAgY2FzZSAnbG9hZEVuY29kZXInOlxyXG4gICAgICAgICAgICAgICAgY29uc3Qge21pbWVUeXBlLCB3YXNtUGF0aH0gPSBlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIGVuY29kZXIgbW9kdWxlXHJcbiAgICAgICAgICAgICAgICBsZXQgZW5jb2Rlck1vZHVsZTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWltZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdhdWRpby9vZ2cnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVyTW9kdWxlID0gT2dnT3B1c0VuY29kZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgRW1zY3JpcHRlbiBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kdWxlT3ZlcnJpZGVzID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAod2FzbVBhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVPdmVycmlkZXNbJ2xvY2F0ZUZpbGUnXSA9IGZ1bmN0aW9uIChwYXRoLCBzY3JpcHREaXJlY3RvcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGgubWF0Y2goLy53YXNtLykgPyB3YXNtUGF0aCA6IChzY3JpcHREaXJlY3RvcnkgKyBwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgbW9kdWxlXHJcbiAgICAgICAgICAgICAgICBlbmNvZGVyTW9kdWxlKG1vZHVsZU92ZXJyaWRlcykudGhlbihNb2R1bGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZXIgPSBNb2R1bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBob3N0IHJlYWR5IHRvIGFjY2VwdCAnaW5pdCcgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtjb21tYW5kOiAncmVhZHlUb0luaXQnfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnaW5pdCc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7c2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBiaXRzUGVyU2Vjb25kfSA9IGUuZGF0YTtcclxuICAgICAgICAgICAgICAgIGVuY29kZXIuaW5pdChzYW1wbGVSYXRlLCBjaGFubmVsQ291bnQsIGJpdHNQZXJTZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdwdXNoSW5wdXREYXRhJzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IHtjaGFubmVsQnVmZmVycywgbGVuZ3RoLCBkdXJhdGlvbn0gPSBlLmRhdGE7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcclxuICAgICAgICAgICAgICAgIC8vIE9uIENocm9tZSwgRmxvYXQzMkFycmF5IGRvZXNuJ3QgcmVjb2duaXplIGl0cyBidWZmZXIgYWZ0ZXJcclxuICAgICAgICAgICAgICAgIC8vIGJlaW5nIHRyYW5zZmVycmVkLCBtYWtpbmcgdGhlIHNpemUgb2YgQXJyYXlCdWZmZXIgMC5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgYnVnIGlzIGZvdW5kIGluIENocm9tZSA2Ni4wLjMzNTkuMTgxICgyMDE4KS5cclxuICAgICAgICAgICAgICAgIC8vIEl0IGlzIGZpeGVkIHNpbmNlIDIwMTkuXHJcbiAgICAgICAgICAgICAgICAvLyBTbyByZS1jcmVhdGUgRmxvYXQzMkFycmF5IHJpZ2h0IGFmdGVyIGEgd2ViIHdvcmtlciByZWNlaXZlZCBpdC5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhbm5lbEJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsQnVmZmVyc1tpXSA9IG5ldyBGbG9hdDMyQXJyYXkoY2hhbm5lbEJ1ZmZlcnNbaV0uYnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbmNvZGVyLmVuY29kZShjaGFubmVsQnVmZmVycyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2dldEVuY29kZWREYXRhJzpcclxuICAgICAgICAgICAgY2FzZSAnZG9uZSc6XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbWFuZCA9PT0gJ2RvbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rlci5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBlbmNvZGVyLmZsdXNoKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBjb21tYW5kID09PSAnZG9uZScgPyAnbGFzdEVuY29kZWREYXRhJyA6ICdlbmNvZGVkRGF0YScsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyc1xyXG4gICAgICAgICAgICAgICAgfSwgYnVmZmVycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09ICdkb25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLyogZ2xvYmFsIFdvcmtlckdsb2JhbFNjb3BlICovXHJcbi8vIFJ1biBvbmx5IGlmIGl0IGlzIGluIHdlYiB3b3JrZXIgZW52aXJvbm1lbnRcclxuaWYgKHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKSB7XHJcbiAgICBpbml0V29ya2VyKHNlbGYpO1xyXG59XHJcblxuLyoqXHJcbiAqIGNyZWF0ZSBhdWRpbyBlbGVtZW50XHJcbiAqIEB0eXBlIHtIVE1MRWxlbWVudH1cclxuICovXHJcbmxldCBsb2NhbEF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcclxubG9jYWxBdWRpby5tdXRlZCA9IHRydWVcclxubG9jYWxBdWRpby5oaWRkZW4gPSB0cnVlXHJcbmxvY2FsQXVkaW8uYXV0b3BsYXkgPSB0cnVlXHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobG9jYWxBdWRpbylcclxuXHJcbmxldCBzdHJlYW0gPSBudWxsXHJcbmxldCBmaWxlTmFtZSA9IG51bGw7XHJcbmxldCBhdWRpb0N0eCA9IG51bGxcclxubGV0IGF1ZGlvUmVjb3JkZXIgPSB7fVxyXG5sZXQgcmVjb3JkaW5nRHVyYXRpb24gPSAzMDAwMDsgICAvLyDmlofku7blvZXliLbml7bpl7QgMzBzXHJcbmxldCByZWNvcmRlckNhbGxiYWNrID0gbnVsbFxyXG5cclxuLyoqXHJcbiAqICBOb24tc3RhbmRhcmQgb3B0aW9uc1xyXG4gKiBAdHlwZSB7e09nZ09wdXNFbmNvZGVyV2FzbVBhdGg6IHN0cmluZ319XHJcbiAqL1xyXG5jb25zdCB3b3JrZXJPcHRpb25zID0ge1xyXG4gICAgT2dnT3B1c0VuY29kZXJXYXNtUGF0aDogJy4vT2dnT3B1c0VuY29kZXIud2FzbScsXHJcbiAgICAvLyBPZ2dPcHVzRW5jb2Rlcldhc21QYXRoOiAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9vcHVzLW1lZGlhLXJlY29yZGVyQDAuNy4xOS9PZ2dPcHVzRW5jb2Rlci53YXNtJ1xyXG59O1xyXG53aW5kb3cuTWVkaWFSZWNvcmRlciA9IE9nZ09wdXNNZWRpYVJlY29yZGVyO1xyXG5cclxuLyoqXHJcbiAqIGNyZWF0ZSBNZWRpYVJlY29yZGVyIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBzdHJlYW1cclxuICogQHBhcmFtIGR1cmF0aW9uXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTWVkaWFSZWNvcmRlcihzdHJlYW0sIGR1cmF0aW9uKSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IHttaW1lVHlwZTogJ2F1ZGlvL29nZyd9O1xyXG4gICAgbGV0IHJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtLCBvcHRpb25zLCB3b3JrZXJPcHRpb25zLCBkdXJhdGlvbik7XHJcbiAgICBsZXQgZGF0YUNodW5rcyA9IFtdO1xyXG5cclxuICAgIHJlY29yZGVyLm9uc3RhcnQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGRhdGFDaHVua3MgPSBbXTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVjb3JkZXIgc3RhcnRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGRhdGFDaHVua3MucHVzaChlLmRhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWNvcmRlciBkYXRhIGF2YWlsYWJsZSAnKTtcclxuICAgIH1cclxuXHJcbiAgICByZWNvcmRlci5vbnN0b3AgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWNvcmRlciBjb21wbGV0ZSEnKVxyXG4gICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoZGF0YUNodW5rcywgeyd0eXBlJzogcmVjb3JkZXIubWltZVR5cGV9KTtcclxuICAgICAgICBkYXRhQ2h1bmtzID0gW107XHJcbiAgICAgICAgaWYoIWJsb2Iuc2l6ZSl7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhjZXB0aW9uOiBCbG9iIGlzIGVtcHR5JylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHJlY29yZGVyQ2FsbGJhY2spe1xyXG4gICAgICAgICAgICByZWNvcmRlckNhbGxiYWNrKGJsb2IpXHJcbiAgICAgICAgICAgIGF1ZGlvUmVjb3JkZXIgPSBudWxsXHJcbiAgICAgICAgICAgIGF1ZGlvQ3R4ID0gbnVsbFxyXG4gICAgICAgICAgICBzdHJlYW0gPSBudWxsXHJcbiAgICAgICAgICAgIHJlY29yZGVyQ2FsbGJhY2sgPSBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlY29yZGVyLm9ucGF1c2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWNvcmRlciBwYXVzZWQnKVxyXG4gICAgfVxyXG5cclxuICAgIHJlY29yZGVyLm9ucmVzdW1lID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnUmVjb3JkZXIgcmVzdW1lZCcpXHJcbiAgICB9XHJcblxyXG4gICAgcmVjb3JkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGlmICghZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFlcnJvci5uYW1lKSB7XHJcbiAgICAgICAgICAgIGVycm9yLm5hbWUgPSAnVW5rbm93bkVycm9yJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlcnJvci5uYW1lLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdpbnZhbGlkc3RhdGUnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIE1lZGlhUmVjb3JkZXIgaXMgbm90IGluIGEgc3RhdGUgaW4gd2hpY2ggdGhlIHByb3Bvc2VkIG9wZXJhdGlvbiBpcyBhbGxvd2VkIHRvIGJlIGV4ZWN1dGVkLicsIGVycm9yKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ25vdHN1cHBvcnRlZCcpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNSU1FIHR5cGUgKCcsIG9wdGlvbnMubWltZVR5cGUsICcpIGlzIG5vdCBzdXBwb3J0ZWQuJywgZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignc2VjdXJpdHknKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWVkaWFSZWNvcmRlciBzZWN1cml0eSBlcnJvcicsIGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG9sZGVyIGNvZGUgYmVsb3dcclxuICAgICAgICBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnT3V0T2ZNZW1vcnknKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBVQSBoYXMgZXhoYXVzZWQgdGhlIGF2YWlsYWJsZSBtZW1vcnkuIFVzZXIgYWdlbnRzIFNIT1VMRCBwcm92aWRlIGFzIG11Y2ggYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhcyBwb3NzaWJsZSBpbiB0aGUgbWVzc2FnZSBhdHRyaWJ1dGUuJywgZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0lsbGVnYWxTdHJlYW1Nb2RpZmljYXRpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0EgbW9kaWZpY2F0aW9uIHRvIHRoZSBzdHJlYW0gaGFzIG9jY3VycmVkIHRoYXQgbWFrZXMgaXQgaW1wb3NzaWJsZSB0byBjb250aW51ZSByZWNvcmRpbmcuIEFuIGV4YW1wbGUgd291bGQgYmUgdGhlIGFkZGl0aW9uIG9mIGEgVHJhY2sgd2hpbGUgcmVjb3JkaW5nIGlzIG9jY3VycmluZy4gVXNlciBhZ2VudHMgU0hPVUxEIHByb3ZpZGUgYXMgbXVjaCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFzIHBvc3NpYmxlIGluIHRoZSBtZXNzYWdlIGF0dHJpYnV0ZS4nLCBlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnT3RoZXJSZWNvcmRpbmdFcnJvcicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVXNlZCBmb3IgYW4gZmF0YWwgZXJyb3Igb3RoZXIgdGhhbiB0aG9zZSBsaXN0ZWQgYWJvdmUuIFVzZXIgYWdlbnRzIFNIT1VMRCBwcm92aWRlIGFzIG11Y2ggYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhcyBwb3NzaWJsZSBpbiB0aGUgbWVzc2FnZSBhdHRyaWJ1dGUuJywgZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0dlbmVyaWNFcnJvcicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIFVBIGNhbm5vdCBwcm92aWRlIHRoZSBjb2RlYyBvciByZWNvcmRpbmcgb3B0aW9uIHRoYXQgaGFzIGJlZW4gcmVxdWVzdGVkLicsIGVycm9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNZWRpYVJlY29yZGVyIEVycm9yJywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignUmVjb3JkZXIgZW5jb3VudGVycyBlcnJvcjonICsgZXJyb3IubWVzc2FnZSlcclxuICAgICAgICBpZiAocmVjb3JkZXIuX3N0YXRlICE9PSAnaW5hY3RpdmUnICYmIHJlY29yZGVyLl9zdGF0ZSAhPT0gJ3N0b3BwZWQnKSB7XHJcbiAgICAgICAgICAgIHJlY29yZGVyLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiByZWNvcmRlclxyXG59XHJcblxyXG4vKipcclxuICog6YCa6L+HQXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24g55Sf5oiQ5paH5Lu25rWBXHJcbiAqIEBwYXJhbSBidWZmZXJcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVNvdW5kU291cmNlKGJ1ZmZlcikge1xyXG4gICAgbGV0IHNvdW5kU291cmNlID0gYXVkaW9DdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XHJcbiAgICBzb3VuZFNvdXJjZS5idWZmZXIgPSBidWZmZXI7XHJcbiAgICBsZXQgZGVzdGluYXRpb24gPSBhdWRpb0N0eC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7XHJcbiAgICBzb3VuZFNvdXJjZS5jb25uZWN0KGRlc3RpbmF0aW9uKTtcclxuICAgIHNvdW5kU291cmNlLnN0YXJ0KCk7XHJcblxyXG4gICAgbG9jYWxBdWRpby5zcmNPYmplY3QgPSBkZXN0aW5hdGlvbi5zdHJlYW1cclxuICAgIHN0cmVhbSA9IGRlc3RpbmF0aW9uLnN0cmVhbVxyXG59XHJcblxyXG4vKipcclxuICogQXVkaW8gaXMgcmVhZHkgdG8gc3RhcnQgcGxheWluZ1xyXG4gKi9cclxubG9jYWxBdWRpby5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBsb2NhbEF1ZGlvLnBsYXkoKVxyXG4gICAgICAgIGF1ZGlvUmVjb3JkZXIgPSBjcmVhdGVNZWRpYVJlY29yZGVyKHN0cmVhbSwgcmVjb3JkaW5nRHVyYXRpb24pXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIE1lZGlhUmVjb3JkZXIgaXMgc3VjY2Vzc2Z1bCwgU3RhcnQgcmVjb3JkZXIuLi4nKVxyXG4gICAgICAgIGF1ZGlvUmVjb3JkZXIuc3RhcnRSZWNvcmRpbmcoKVxyXG4gICAgfWNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYE1lZGlhUmVjb3JkZXIgaXMgZmFpbGVkOiAke2UubWVzc2FnZX1gKTtcclxuICAgICAgICBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoKSk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG4vKipcclxuICogV2hlbiB0aGUgdXBsb2FkZWQgZmlsZSBpcyBsZXNzIHRoYW4gMzBzLCBhZnRlciBhdWRpbyBwbGF5YmFjayBlbmRzLCBzdG9wIHRoZSByZWNvcmRlclxyXG4gKi9cclxubG9jYWxBdWRpby5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYoYXVkaW9SZWNvcmRlci5fc3RhdGUgIT09ICdpbmFjdGl2ZScgJiYgYXVkaW9SZWNvcmRlci5fc3RhdGUgIT09ICdzdG9wcGVkJyl7XHJcbiAgICAgICAgYXVkaW9SZWNvcmRlci5zdG9wUmVjb3JkaW5nKClcclxuICAgIH1cclxufSk7XHJcblxyXG4vKipcclxuICogQ2hlY2sgYXZhaWxhYmxlIGNvbnRlbnQgdHlwZXMgY29tcGF0aWJpbGl0eVxyXG4gKi9cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgIGlmIChPZ2dPcHVzTWVkaWFSZWNvcmRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignTm8gT3B1c01lZGlhUmVjb3JkZXIgZm91bmQnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnRUeXBlcyA9IFtcclxuICAgICAgICAgICAgJ2F1ZGlvL3dhdmUnLFxyXG4gICAgICAgICAgICAnYXVkaW8vd2F2JyxcclxuICAgICAgICAgICAgJ2F1ZGlvL29nZycsXHJcbiAgICAgICAgICAgICdhdWRpby9vZ2c7Y29kZWNzPW9wdXMnLFxyXG4gICAgICAgICAgICAnYXVkaW8vd2VibScsXHJcbiAgICAgICAgICAgICdhdWRpby93ZWJtO2NvZGVjcz1vcHVzJ1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29udGVudFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSArICcgaXMgJyArIChNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZCh0eXBlKSA/ICdzdXBwb3J0ZWQnIDogJ05PVCBzdXBwb3J0ZWQnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbi8qKlxyXG4gKiBVcGxvYWQgbG9jYWwgYXVkaW8gZmlsZVxyXG4gKiDkvb/nlKhGaWxlUmVhZGVy6K+75Y+W5LiK5Lyg5paH5Lu277yM6L2s5o2i5Li6c3RyZWFtXHJcbiAqL1xyXG5mdW5jdGlvbiByZWNvcmRUb09nZyAoZmlsZSwgY2FsbGJhY2spe1xyXG4gICAgY29uc29sZS5sb2coJ1JlY29yZGVyIGF1ZGlvIGZpbGUgdG8gb2dnJylcclxuICAgIGZpbGVOYW1lID0gZmlsZS5uYW1lLnJlcGxhY2UoL1xcLlteXFwuXSskLywgJycpXHJcbiAgICBhdWRpb0N0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcclxuICAgIGxldCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxyXG4gICAgZmlsZVJlYWRlci5maWxlID0gZmlsZTtcclxuICAgIHJlY29yZGVyQ2FsbGJhY2sgPSBjYWxsYmFja1xyXG5cclxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2ZpbGUgcmVhZGUgb25sb2FkLi4uJylcclxuICAgICAgICBhdWRpb0N0eC5kZWNvZGVBdWRpb0RhdGEoZS50YXJnZXQucmVzdWx0KS50aGVuKGNyZWF0ZVNvdW5kU291cmNlKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci50b1N0cmluZygpKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGVSZWFkZXIuZmlsZSk7XHJcbn0iXX0=
